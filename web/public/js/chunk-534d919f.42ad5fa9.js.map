{"version":3,"sources":["webpack:///./src/viewsMobile/mobileHome/index.vue","webpack:///./src/viewsMobile/mobileHome/index.vue?e327","webpack:///./src/viewsMobile/mobileHome/index.vue?84e1"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$options","isHome","_createBlock","_component_Icon","type","size","onClick","_cache","$event","_ctx","$router","back","_toDisplayString","$data","routeName","total","activeMenu","_createVNode","_component_router_view","Component","_KeepAlive","_resolveDynamicComponent","draftCount","badge","mobileOrder","onTotal","_hoisted_3","_Fragment","_renderList","routeList","item","index","key","_normalizeClass","active","name","toPath","_component_Badge","count","overflow-count","icon","title","data","this","$route","watch","deep","immediate","handler","curRoute","find","meta","computed","methods","push","changeBadge","returnCode","getDraftCount","err","$Message","error","message","mounted","order","JSON","parse","sessionStorage","getItem","mobileCashier","reduce","pre","next","$EventBus","$on","beforeUnmount","$off","__exports__","render"],"mappings":"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","file":"public/js/chunk-534d919f.42ad5fa9.js","sourcesContent":["<!--\r\n * @Author: zzx\r\n * @Date: 2023-09-16 16:18:29\r\n * @LastEditors: zzx\r\n * @LastEditTime: 2023-12-18 20:40:28\r\n-->\r\n<template>\r\n  <div class=\"mobileHome\">\r\n    <div class=\"home-header\">\r\n      <Icon\r\n        v-if=\"!isHome\"\r\n        type=\"ios-arrow-back\"\r\n        size=\"25\"\r\n        @click=\"$router.back()\"\r\n        class=\"header-icon left\"\r\n      />\r\n      <p>{{ routeName }}{{ typeof total[activeMenu] == \"number\" ? `（${total[activeMenu]}）` : \"\" }}</p>\r\n    </div>\r\n    <router-view v-slot=\"{ Component }\" class=\"home-container\">\r\n      <keep-alive>\r\n        <component :is=\"Component\" :draftCount=\"badge.mobileOrder\" @total=\"total[activeMenu] = $event\" />\r\n      </keep-alive>\r\n    </router-view>\r\n    <div class=\"home-footer\" v-show=\"isHome\">\r\n      <div\r\n        v-for=\"(item, index) in routeList\"\r\n        :key=\"index\"\r\n        class=\"menu-item\"\r\n        :class=\"{active: activeMenu === item.name}\"\r\n        @click=\"toPath(item)\"\r\n      >\r\n        <Badge :count=\"badge[item.name] || 0\" overflow-count=\"99\" class=\"menu-badge\">\r\n          <Icon :type=\"item.icon\" />\r\n        </Badge>\r\n        <p>{{ item.title }}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getDraftCount } from \"@/axios\";\r\n\r\nexport default {\r\n  name: \"mobileHome\",\r\n  data() {\r\n    return {\r\n      routeName: \"\",\r\n      activeMenu: this.$route.name,\r\n      routeList: [\r\n        { title: \"商品\", name: \"mobileGood\", icon: \"ios-home-outline\" },\r\n        { title: \"结账\", name: \"mobileCashier\", icon: \"ios-cart-outline\" },\r\n        { title: \"订单\", name: \"mobileOrder\", icon: \"ios-clipboard-outline\" },\r\n        { title: \"客户\", name: \"mobileUser\", icon: \"ios-contacts-outline\" },\r\n        { title: \"特价\", name: \"mobileSpecial\", icon: \"ios-pricetag-outline\" },\r\n      ],\r\n      badge: {},\r\n      total: {},\r\n    };\r\n  },\r\n  watch: {\r\n    $route: {\r\n      deep: true,\r\n      immediate: true,\r\n      handler({ name }) {\r\n        this.activeMenu = name;\r\n        const curRoute = this.routeList.find((item) => item.name === name) || {};\r\n        this.routeName = curRoute.title || this.$route.meta.title || this.routeList[0].title;\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    isHome() {\r\n      return !!this.routeList.find((item) => item.name === this.activeMenu);\r\n    },\r\n  },\r\n  methods: {\r\n    toPath({ name }) {\r\n      this.$router.push({ name });\r\n    },\r\n    changeBadge(data) {\r\n      this.badge = { ...this.badge, ...data };\r\n    },\r\n    async getDraftCount() {\r\n      try {\r\n        const { returnCode, data } = await getDraftCount() || {};\r\n        if (returnCode === 0) {\r\n          this.badge.mobileOrder = data || 0;\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`获取草稿数量失败：${err.message || err}`);\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    const order = JSON.parse(sessionStorage.getItem(\"order\") || \"[]\");\r\n    this.badge = {\r\n      mobileCashier: order.reduce((pre, next) => pre + +next.count, 0),\r\n    };\r\n    this.getDraftCount();\r\n    this.$EventBus.$on(\"badge\", this.changeBadge);\r\n    this.$EventBus.$on(\"saveOrder\", this.getDraftCount);\r\n  },\r\n  beforeUnmount() {\r\n    this.$EventBus.$off(\"badge\", this.changeBadge);\r\n    this.$EventBus.$off(\"saveOrder\", this.getDraftCount);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.mobileHome {\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  .home-header {\r\n    flex: none;\r\n    width: 100%;\r\n    height: 46px;\r\n    line-height: 46px;\r\n    text-align: center;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    border-bottom: 1px solid #DDD;\r\n    position: relative;\r\n    .header-icon {\r\n      position: absolute;\r\n      top: 50%;\r\n      transform: translateY(-50%);\r\n      &.left {\r\n        left: 10px;\r\n      }\r\n      &.right {\r\n        right: 10px;\r\n      }\r\n    }\r\n  }\r\n  .home-container {\r\n    flex: 1;\r\n    overflow: hidden;\r\n  }\r\n  .home-footer {\r\n    flex: none;\r\n    height: 50px;\r\n    display: flex;\r\n    border-top: 1px solid #DDD;\r\n    border-radius: 4px 4px 0 0;\r\n    .menu-item {\r\n      flex: 1;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      align-items: center;\r\n      i {\r\n        font-size: 22px;\r\n      }\r\n      p {\r\n        font-size: 12px;\r\n      }\r\n      &.active {\r\n        color: #2d8cf0;\r\n      }\r\n    }\r\n    .menu-badge {\r\n      :deep(.ivu-badge-count) {\r\n        font-size: 10px;\r\n        min-width: 16px;\r\n        height: 16px;\r\n        line-height: 14px;\r\n        border-radius: 8px;\r\n        right: -10px;\r\n        top: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=28fda575&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=28fda575&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\goodCashier\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-28fda575\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=28fda575&lang=less&scoped=true\""],"sourceRoot":""}