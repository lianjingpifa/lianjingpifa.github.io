(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d03399c"],{"66e3":function(e,t,a){"use strict";a("846b")},"846b":function(e,t,a){},a20b:function(e,t,a){"use strict";a.r(t);var o=a("7a23");const c={class:"container"},l=["onClick"],n={class:"card-top"},s={class:"remarks"},r={key:0,class:"remarks"},d={key:1,class:"h100"};function i(e,t,a,i,u,b){const p=Object(o["resolveComponent"])("Icon"),m=Object(o["resolveComponent"])("van-tab"),h=Object(o["resolveComponent"])("van-tabs"),O=Object(o["resolveComponent"])("van-search"),j=Object(o["resolveComponent"])("van-sidebar-item"),v=Object(o["resolveComponent"])("van-sidebar"),f=Object(o["resolveComponent"])("viListScroll"),M=Object(o["resolveComponent"])("allUsersMap"),V=Object(o["resolveComponent"])("add-user-modal"),g=Object(o["resolveComponent"])("single-user-map"),k=Object(o["resolveComponent"])("audit-user-modal"),C=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(p,{type:u.isMapMode?"ios-list":"ios-pin-outline",size:"32",onClick:t[0]||(t[0]=e=>u.isMapMode=!u.isMapMode),class:"vi-header-icon left"},null,8,["type"]),Object(o["createVNode"])(p,{type:"ios-person-add-outline",size:"34",onClick:t[1]||(t[1]=e=>b.onSelect("change",{})),class:"vi-header-icon right"}),u.isMapMode?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",d,[Object(o["createVNode"])(M,{ref:"userMap",onChangeUser:t[6]||(t[6]=e=>b.onSelect("change",e)),onDeleteUser:t[7]||(t[7]=e=>b.onSelect("delete",e)),onOpenHistoryOrder:t[8]||(t[8]=e=>b.onSelect("order",e)),onOpenSpecialMng:t[9]||(t[9]=e=>b.onSelect("special",e)),onClose:t[10]||(t[10]=e=>u.isMapMode=!1)},null,512)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])(h,{active:u.status,"onUpdate:active":t[2]||(t[2]=e=>u.status=e),onChange:b.reSearch},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(m,{title:"用户审批",name:"2",badge:a.draftCount||void 0},null,8,["badge"]),Object(o["createVNode"])(m,{title:"用户管理",name:"1,3"})]),_:1},8,["active","onChange"]),Object(o["createVNode"])(O,{modelValue:u.keyword,"onUpdate:modelValue":t[3]||(t[3]=e=>u.keyword=e),shape:"round",placeholder:"请输入客户名称搜索",onClear:b.reSearch,onSearch:b.reSearch,class:"search-input"},null,8,["modelValue","onClear","onSearch"]),Object(o["createElementVNode"])("div",c,["2"!=u.status?(Object(o["openBlock"])(),Object(o["createBlock"])(v,{key:0,modelValue:u.label,"onUpdate:modelValue":t[4]||(t[4]=e=>u.label=e),onChange:b.reSearch,class:"sidebar"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(j,{title:"全部"}),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(u.dictMap.user,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:t,title:e.name},null,8,["title"]))),128)),Object(o["createVNode"])(j,{title:"其他"})]),_:1},8,["modelValue","onChange"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(f,{ref:"list",getData:b.getData,onOnUpdate:t[5]||(t[5]=t=>e.$emit("total",t.total)),class:"flex-1 h100"},{default:Object(o["withCtx"])(({item:e})=>[Object(o["createElementVNode"])("div",{class:"card",onClick:t=>b.openPopup(e)},[Object(o["createElementVNode"])("p",n,Object(o["toDisplayString"])("2"==e.status?e.nickName:e.name),1),Object(o["createElementVNode"])("p",s,"联系电话："+Object(o["toDisplayString"])(e.phone||"无"),1),"2"==u.status?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",r,"备注："+Object(o["toDisplayString"])(e.remarks||"无"),1)):Object(o["createCommentVNode"])("",!0)],8,l)]),_:1},8,["getData"])])],64)),Object(o["createVNode"])(V,{modelValue:u.showUserModal,"onUpdate:modelValue":t[11]||(t[11]=e=>u.showUserModal=e),detailData:u.detailData,onSave:b.reSearch},null,8,["modelValue","detailData","onSave"]),Object(o["createVNode"])(g,{modelValue:u.showMapModal,"onUpdate:modelValue":t[12]||(t[12]=e=>u.showMapModal=e),curRow:u.detailData},null,8,["modelValue","curRow"]),Object(o["createVNode"])(k,{modelValue:u.showAuditModal,"onUpdate:modelValue":t[13]||(t[13]=e=>u.showAuditModal=e),detailData:u.detailData,onSave:b.reSearch},null,8,["modelValue","detailData","onSave"]),Object(o["createVNode"])(C,{show:u.showPopup,"onUpdate:show":t[14]||(t[14]=e=>u.showPopup=e),title:u.detailData.name,actions:b.actions,"cancel-text":"取消","close-on-click-action":"",onSelect:t[15]||(t[15]=e=>b.onSelect(e.type))},null,8,["show","title","actions"])])}a("14d9");var u=a("3e47"),b=a("aad9"),p=a("df7b"),m=a("b351"),h=a("eeb9"),O=a("2af9"),j=a("c64b"),v=a("b046"),f=a("31fd"),M=a("ff79"),V=a("4360");const g=Object(V["a"])();var k={name:"mobileUser",components:{[u["a"].name]:u["a"],[b["a"].name]:b["a"],[p["a"].name]:p["a"],[m["a"].name]:m["a"],viListScroll:O["g"],addUserModal:j["a"],singleUserMap:v["a"],allUsersMap:f["a"],auditUserModal:M["a"]},props:{draftCount:{type:Number,default:void 0}},data(){return{dictMap:g.dictMap,status:"2",label:"",keyword:"",showUserModal:!1,detailData:{},showPopup:!1,showMapModal:!1,isMapMode:!1,showAuditModal:!1}},watch:{draftCount(){this.reSearch()}},computed:{actions(){return[{name:"删除",type:"delete",color:"#f66161"},..."2"==this.detailData.status?[{name:"审批",type:"audit",color:"#07c160"}]:[{name:"特价",type:"special",color:"#07c160"},{name:"历史订单",type:"order",color:"#2d8cf0"},...this.detailData.longitude&&this.detailData.latitude?[{name:"定位",type:"location",color:"#07c160"}]:[],{name:"修改",type:"change"}]]}},methods:{reSearch(){var e;this.isMapMode?this.$refs.userMap.getUsersList():null===(e=this.$refs.list)||void 0===e||e.reSearch()},getData(e){const t=["",...this.dictMap.user.map(e=>e.id),"其他"];return Object(h["y"])({...e,name:this.keyword,status:this.status,label:t[this.label]})},deleteUser({userId:e,name:t}){this.$Modal.confirm({title:"删除客户",content:`是否确认删除${t}？`,onOk:async()=>{try{const{returnCode:t,data:a}=await Object(h["i"])({userIds:""+e})||{};0===t&&a&&(this.$Message.success("删除成功"),this.reSearch())}catch(t){this.$Message.error("删除失败："+(t.message||t))}}})},openPopup(e){this.detailData={...e},this.showPopup=!0},onSelect(e,t=this.detailData){"change"===e?(this.detailData={...t},this.showUserModal=!0):"special"===e?this.$router.push({name:"mobileSpecial",state:{params:{userId:t.userId,name:t.name}}}):"order"===e?this.$router.push({name:"mobileOrder",state:{params:{userId:t.userId,name:t.name}}}):"delete"===e?this.deleteUser(t):"location"===e?this.showMapModal=!0:"audit"===e&&(this.showAuditModal=!0)}}},C=(a("66e3"),a("6b0d")),w=a.n(C);const S=w()(k,[["render",i],["__scopeId","data-v-5aa295fb"]]);t["default"]=S},a68d:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var o=a("7a23"),c=a("1fba"),l=a("e5f6"),n=a("450f");const[s,r]=Object(c["a"])("sidebar"),d=Symbol(s),i={modelValue:Object(l["c"])(0)};var u=Object(o["defineComponent"])({name:s,props:i,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const{linkChildren:c}=Object(n["useChildren"])(d),l=()=>+e.modelValue,s=e=>{e!==l()&&(t("update:modelValue",e),t("change",e))};return c({getActive:l,setActive:s}),()=>{var e;return Object(o["createVNode"])("div",{role:"tablist",class:r()},[null==(e=a.default)?void 0:e.call(a)])}}})},b351:function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var o=a("23f9"),c=a("7a23"),l=a("1fba"),n=a("fa7c"),s=a("e5f6"),r=a("a68d"),d=a("450f"),i=a("4e5e"),u=a("8be7");const[b,p]=Object(l["a"])("sidebar-item"),m=Object(n["a"])({},i["b"],{dot:Boolean,title:String,badge:s["f"],disabled:Boolean,badgeProps:Object});var h=Object(c["defineComponent"])({name:b,props:m,emits:["click"],setup(e,{emit:t,slots:a}){const o=Object(i["c"])(),{parent:l,index:n}=Object(d["useParent"])(r["a"]);if(!l)return void 0;const s=()=>{e.disabled||(t("click",n.value),l.setActive(n.value),o())};return()=>{const{dot:t,badge:o,title:r,disabled:d}=e,i=n.value===l.getActive();return Object(c["createVNode"])("div",{role:"tab",class:p({select:i,disabled:d}),tabindex:d?void 0:0,"aria-selected":i,onClick:s},[Object(c["createVNode"])(u["a"],Object(c["mergeProps"])({dot:t,class:p("text"),content:o},e.badgeProps),{default:()=>[a.title?a.title():r]})])}}});const O=Object(o["a"])(h)},df7b:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var o=a("23f9"),c=a("a68d");const l=Object(o["a"])(c["b"])}}]);