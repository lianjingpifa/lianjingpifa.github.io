(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c8b9993"],{"13d5":function(e,t,o){"use strict";var n=o("23e7"),c=o("d58f").left,a=o("a640"),r=o("2d00"),i=o("605d"),l=!i&&r>79&&r<83,u=l||!a("reduce");n({target:"Array",proto:!0,forced:u},{reduce:function(e){var t=arguments.length;return c(this,e,t,t>1?arguments[1]:void 0)}})},4183:function(e,t,o){"use strict";o.r(t);o("13d5"),o("14d9");var n=o("7a23"),c=o("eeb9"),a=o("6605");const r={class:"mobileHome"},i={class:"home-header"},l={class:"home-footer"},u=["onClick"];var s={__name:"index",setup(e){const t=Object(a["c"])(),o=Object(a["d"])(),s=Object(n["inject"])("$Message",()=>{}),b=[{title:"商品",name:"mobileGood",icon:"ios-home-outline"},{title:"结账",name:"mobileCashier",icon:"ios-cart-outline"},{title:"订单",name:"mobileOrder",icon:"ios-clipboard-outline"},{title:"客户",name:"mobileUser",icon:"ios-contacts-outline"},{title:"我的",name:"mobileMy",icon:"ios-person-outline"}],d=Object(n["ref"])(""),m=Object(n["ref"])(t.name),v=Object(n["ref"])({}),O=Object(n["ref"])({});Object(n["watch"])(()=>t,({name:e})=>{m.value=e;const o=b.find(t=>t.name===e)||{};d.value=o.title||t.meta.title||b[0].title},{deep:!0,immediate:!0});const f=Object(n["computed"])(()=>!!b.find(e=>e.name===m.value));async function j(){try{const{returnCode:e,data:t}=await Object(c["q"])()||{};0===e&&(v.value.mobileOrder=t||0)}catch(e){s.error("获取草稿数量失败："+(e.message||e))}}async function p(){try{const{returnCode:e,data:t}=await Object(c["p"])()||{};0===e&&(v.value.mobileUser=t||0)}catch(e){s.error("获取待审批数量失败："+(e.message||e))}}function w(e){v.value={...v.value,...e}}return Object(n["onMounted"])(()=>{const e=JSON.parse(sessionStorage.getItem("order")||"[]");v.value={mobileCashier:e.reduce((e,t)=>e+ +t.count,0)},j(),p(),window.$EventBus.$on("badge",w),window.$EventBus.$on("saveOrder",j)}),Object(n["onBeforeUnmount"])(()=>{window.$EventBus.$off("badge",w),window.$EventBus.$off("saveOrder",j)}),(e,t)=>{const c=Object(n["resolveComponent"])("Icon"),a=Object(n["resolveComponent"])("router-view"),s=Object(n["resolveComponent"])("Badge");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createElementVNode"])("div",i,[f.value?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,type:"ios-arrow-back",size:"25",onClick:t[0]||(t[0]=t=>e.$router.back()),class:"vi-header-icon left"})),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(d.value)+Object(n["toDisplayString"])("number"==typeof O.value[m.value]?`（${O.value[m.value]}）`:""),1)]),Object(n["createVNode"])(a,{class:"home-container"},{default:Object(n["withCtx"])(({Component:e})=>[(Object(n["openBlock"])(),Object(n["createBlock"])(n["KeepAlive"],null,[(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e),{draftCount:v.value[m.value],onTotal:t[1]||(t[1]=e=>O.value[m.value]=e)},null,40,["draftCount"]))],1024))]),_:1}),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",l,[(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(b,(e,t)=>Object(n["createElementVNode"])("div",{key:t,class:Object(n["normalizeClass"])(["menu-item",{active:m.value===e.name}]),onClick:t=>Object(n["unref"])(o).push(e.name)},[Object(n["createVNode"])(s,{count:v.value[e.name]||0,"overflow-count":"99",class:"menu-badge"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{type:e.icon},null,8,["type"])]),_:2},1032,["count"]),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.title),1)],10,u)),64))],512),[[n["vShow"],f.value]])])}}},b=(o("a587"),o("6b0d")),d=o.n(b);const m=d()(s,[["__scopeId","data-v-05b5f4c8"]]);t["default"]=m},"605d":function(e,t,o){"use strict";var n=o("da84"),c=o("c6b6");e.exports="process"===c(n.process)},"96e5":function(e,t,o){},a587:function(e,t,o){"use strict";o("96e5")},a640:function(e,t,o){"use strict";var n=o("d039");e.exports=function(e,t){var o=[][e];return!!o&&n((function(){o.call(null,t||function(){return 1},1)}))}},d58f:function(e,t,o){"use strict";var n=o("59ed"),c=o("7b0b"),a=o("44ad"),r=o("07fa"),i=TypeError,l=function(e){return function(t,o,l,u){n(o);var s=c(t),b=a(s),d=r(s),m=e?d-1:0,v=e?-1:1;if(l<2)while(1){if(m in b){u=b[m],m+=v;break}if(m+=v,e?m<0:d<=m)throw i("Reduce of empty array with no initial value")}for(;e?m>=0:d>m;m+=v)m in b&&(u=o(u,b[m],m,s));return u}};e.exports={left:l(!1),right:l(!0)}}}]);