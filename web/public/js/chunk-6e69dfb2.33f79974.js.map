{"version":3,"sources":["webpack:///./node_modules/core-js/internals/delete-property-or-throw.js","webpack:///./src/views/cashierMng/index.vue?0bb5","webpack:///./src/views/goodMng/addGoodModal.vue","webpack:///./src/views/goodMng/addGoodModal.vue?b93f","webpack:///./node_modules/clone/clone.js","webpack:///./src/constant/index.js","webpack:///./node_modules/core-js/modules/es.array.unshift.js","webpack:///./src/views/cashierMng/index.vue","webpack:///./src/views/cashierMng/index.vue?0a3a"],"names":["tryToString","$TypeError","TypeError","module","exports","O","P","_createBlock","_component_Modal","title","$options","showModal","$event","width","class-name","footer","_withCtx","_createVNode","_component_Button","type","onClick","_cache","submit","loading","$data","_component_Form","ref","model","formData","rules","label-width","onKeydown","_withKeys","class","_component_FormItem","label","prop","_component_viInput","name","standard","unit","_component_viInputNumber","price","min","step","_component_RadioGroup","_createElementBlock","_Fragment","_renderList","TYPE_MAP","item","key","_component_Radio","$props","showCount","count","integer","props","modelValue","Boolean","default","detailData","Object","data","verifyName","async","rule","value","callback","this","verifyGoods","Error","required","message","validator","trigger","computed","goodId","get","set","val","$emit","watch","deep","handler","$refs","form","resetFields","clone","methods","validate","valid","$Message","error","_index","_rowKey","params","saveGoods","success","err","__exports__","render","_instanceof","obj","nativeMap","nativeSet","nativePromise","Map","_","Set","Promise","parent","circular","depth","prototype","includeNonEnumerable","allParents","allChildren","useBuffer","Buffer","_clone","child","proto","resolve","reject","then","__isArray","__isRegExp","RegExp","source","__getRegExpFlags","lastIndex","__isDate","Date","getTime","isBuffer","allocUnsafe","length","copy","create","getPrototypeOf","index","indexOf","push","i","forEach","keyChild","valueChild","entryChild","add","attrs","getOwnPropertyDescriptor","getOwnPropertySymbols","symbols","symbol","descriptor","enumerable","defineProperty","allPropertyNames","getOwnPropertyNames","propertyName","Infinity","__objToStr","o","toString","call","re","flags","global","ignoreCase","multiline","clonePrototype","c","1","99","IS_BULK","$","toObject","lengthOfArrayLike","setArrayLength","deletePropertyOrThrow","doesNotExceedSafeInteger","INCORRECT_RESULT","unshift","properErrorOnNonWritableLength","writable","FORCED","target","arity","forced","len","argCount","arguments","k","to","j","_createElementVNode","_component_viLayoutUpDown","onOnMount","addErd","up","_hoisted_1","curOrderId","_hoisted_2","_toDisplayString","_component_Icon","size","deleteOrderId","_hoisted_3","_component_Select","curUserId","filterable","clearable","allUsers","_component_Option","userId","_hoisted_4","newUserName","placeholder","onOnEnter","confirmAddUser","newUserLoading","down","_hoisted_5","_hoisted_6","_hoisted_7","curGoodId","onOnChange","selectGood","allGoods","_hoisted_8","_hoisted_9","curGood","_hoisted_10","_hoisted_11","_hoisted_12","originPrice","originUnit","originStandard","_hoisted_13","toFixed","_hoisted_14","_hoisted_15","confirmAdd","_hoisted_16","_component_Table","columns","goodList","height","stripe","_hoisted_17","isBulk","originIsBulk","_hoisted_19","_component_van_radio_group","model-value","_component_van_radio","remarks","operate","deleteGood","_hoisted_20","_hoisted_21","showGoodModal","Array","fill","map","parseInt","Math","random","parseFloat","totalPrice","clearAll","saveOrder","saveLoading","_component_viPrint","list","total","user-data","curUser","onPrint","_component_add_good_modal","onSave","saveGood","components","Table","_Table","viPrint","addGoodModal","erd","align","minWidth","slot","printLoading","reduce","pre","next","$route","immediate","history","state","keys","$Modal","confirm","content","onOk","initData","changeUser","find","good","orderId","$nextTick","JSON","parse","returnCode","printOrder","bool","focus","info","findIndex","splice","status","undefined","detail","stringify","$EventBus","getUsersList","special","userData","verifyUsers","saveUsers","getGoodsList","getAllGoods","getAllUsers","user","values","tag","elementResizeDetector","listenTo","table","offsetHeight","activated","beforeUnmount","uninstall"],"mappings":"kHACA,IAAIA,EAAc,EAAQ,QAEtBC,EAAaC,UAEjBC,EAAOC,QAAU,SAAUC,EAAGC,GAC5B,WAAYD,EAAEC,GAAI,MAAML,EAAW,0BAA4BD,EAAYM,GAAK,OAASN,EAAYK,M,oCCNvG,W,4cCCEE,yBA2BQC,EAAA,CA3BAC,MAAOC,EAAAD,M,WAAgBC,EAAAC,U,qCAAAD,EAAAC,UAASC,GAAGC,MAAO,IAAKC,aAAW,yB,CAuBrDC,OAAMC,qBACf,IAA0D,CAA1DC,yBAA0DC,EAAA,CAAlDC,KAAK,OAAQC,QAAKC,EAAA,KAAAA,EAAA,GAAAT,GAAEF,EAAAC,WAAY,I,8BAAO,IAAE,C,6BAAF,Q,MAC/CM,yBAAqEC,EAAA,CAA7DC,KAAK,UAAWC,QAAOV,EAAAY,OAASC,QAASC,EAAAD,S,8BAAS,IAAE,C,6BAAF,Q,6DAxB5D,IAqBO,CArBPN,yBAqBOQ,EAAA,CArBDC,IAAI,OAAQC,MAAOH,EAAAI,SAAWC,MAAOL,EAAAK,MAAQC,cAAa,GAAKC,UAAOC,sBAAQtB,EAAAY,OAAM,WAAEW,MAAM,O,8BAChG,IAEW,CAFXhB,yBAEWiB,EAAA,CAFDC,MAAM,MAAMC,KAAK,Q,8BACzB,IAA2C,CAA3CnB,yBAA2CoB,EAAA,C,WAAzBb,EAAAI,SAASU,K,qCAATd,EAAAI,SAASU,KAAI1B,I,+BAEjCK,yBAEWiB,EAAA,CAFDC,MAAM,MAAMC,KAAK,Y,8BACzB,IAA+C,CAA/CnB,yBAA+CoB,EAAA,C,WAA7Bb,EAAAI,SAASW,S,qCAATf,EAAAI,SAASW,SAAQ3B,I,+BAErCK,yBAEWiB,EAAA,CAFDC,MAAM,MAAMC,KAAK,Q,8BACzB,IAA2C,CAA3CnB,yBAA2CoB,EAAA,C,WAAzBb,EAAAI,SAASY,K,qCAAThB,EAAAI,SAASY,KAAI5B,I,+BAEjCK,yBAEWiB,EAAA,CAFDC,MAAM,MAAMC,KAAK,S,8BACzB,IAA6E,CAA7EnB,yBAA6EwB,EAAA,C,WAArDjB,EAAAI,SAASc,M,qCAATlB,EAAAI,SAASc,MAAK9B,GAAG+B,IAAK,EAAIC,KAAM,I,+BAE1D3B,yBAIWiB,EAAA,CAJDC,MAAM,MAAMC,KAAK,Q,8BACzB,IAEa,CAFbnB,yBAEa4B,EAAA,C,WAFQrB,EAAAI,SAAST,K,qCAATK,EAAAI,SAAST,KAAIP,I,8BACzB,IAA+B,E,2BAAtCkC,gCAAiFC,cAAA,KAAAC,wBAApDxB,EAAAyB,SAAQ,CAAtBC,EAAMC,K,yBAArB5C,yBAAiF6C,EAAA,CAAzCD,IAAKA,EAAMhB,MAAOgB,G,8BAAK,IAAU,C,0DAAPD,GAAI,K,8DAGjCG,EAAAC,W,yBAAzC/C,yBAEW2B,EAAA,C,MAFDC,MAAM,MAAMC,KAAK,S,8BACzB,IAAyE,CAAzEnB,yBAAyEwB,EAAA,C,WAAjDjB,EAAAI,SAAS2B,M,qCAAT/B,EAAAI,SAAS2B,MAAK3C,GAAE4C,QAAA,GAASb,IAAK,G,2MAe/C,GACbL,KAAM,eACNmB,MAAO,CACLC,WAAY,CACVvC,KAAMwC,QACNC,SAAS,GAEXC,WAAY,CACV1C,KAAM2C,OACNF,UACE,MAAO,KAGXN,UAAW,CACTnC,KAAMwC,QACNC,SAAS,IAGbG,OACE,MAAMC,EAAaC,MAAOC,EAAMC,EAAOC,KACrC,GAAID,GAASE,KAAKR,WAAWvB,OAAS+B,KAAKzC,SAASU,KAAM,CACxD,MAAM,KAAEyB,SAAeO,eAAY,CACjChC,KAAM6B,KACF,GACN,GAAIJ,EACF,OAAOK,EAAS,IAAIG,MAAM,aAG9BH,KAEF,MAAO,CACLnB,gBACArB,SAAU,GACVC,MAAO,CACLS,KAAM,CACJ,CAAEkC,UAAU,EAAMC,QAAS,WAC3B,CAAEC,UAAWV,EAAYW,QAAS,UAGtCpD,SAAS,IAGbqD,SAAU,CACRnE,QACE,OAAW4D,KAAKR,WAAWgB,OAAgB,KAAP,MAA5B,MAEVlE,UAAW,CACTmE,MACE,OAAOT,KAAKX,YAEdqB,IAAIC,GACFX,KAAKY,MAAM,oBAAqBD,GAC3BA,GACHX,KAAKY,MAAM,YAKnBC,MAAO,CACLrB,WAAY,CACVsB,MAAM,EACNC,UACEf,KAAKgB,MAAMC,KAAKC,cAChBlB,KAAKzC,SAAW4D,IAAMnB,KAAKR,eAIjC4B,QAAS,CACPnE,SACE+C,KAAK9C,SAAU,EACf8C,KAAKgB,MAAMC,KAAKI,SAASzB,UACvB,IAAK0B,EAGH,OAFAtB,KAAKuB,SAASC,MAAM,gBACpBxB,KAAK9C,SAAU,GAGjB,IACE,MAAM,OAAEuE,EAAM,QAAEC,EAAO,MAAExC,KAAUyC,GAAW3B,KAAKzC,UAC7C,KAAEmC,SAAekC,eAAUD,IAAW,GACxCjC,IACFM,KAAKuB,SAASM,QAAW7B,KAAK5D,MAAP,MACvB4D,KAAKY,MAAM,OAAQ,IAAKZ,KAAKzC,WAC7ByC,KAAKgB,MAAMC,KAAKC,cAChBlB,KAAK1D,WAAY,GAEnB,MAAOwF,GACP9B,KAAKuB,SAASC,MAAO,SAAOM,EAAI1B,SAAW0B,IAC3C,QACA9B,KAAK9C,SAAU,Q,qBCvHzB,MAAM6E,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,U,sBCPf,6BACA,aAEA,SAASC,EAAYC,EAAKpF,GACxB,OAAe,MAARA,GAAgBoF,aAAepF,EAGxC,IAAIqF,EASAC,EAOAC,EAfJ,IACEF,EAAYG,IACZ,MAAMC,GAGNJ,EAAY,aAId,IACEC,EAAYI,IACZ,MAAMD,GACNH,EAAY,aAId,IACEC,EAAgBI,QAChB,MAAMF,GACNF,EAAgB,aAwBlB,SAASlB,EAAMuB,EAAQC,EAAUC,EAAOC,EAAWC,GACzB,kBAAbH,IACTC,EAAQD,EAASC,MACjBC,EAAYF,EAASE,UACrBC,EAAuBH,EAASG,qBAChCH,EAAWA,EAASA,UAItB,IAAII,EAAa,GACbC,EAAc,GAEdC,EAA6B,oBAAVC,EASvB,SAASC,EAAOT,EAAQE,GAEtB,GAAe,OAAXF,EACF,OAAO,KAET,GAAc,IAAVE,EACF,OAAOF,EAET,IAAIU,EACAC,EACJ,GAAqB,iBAAVX,EACT,OAAOA,EAGT,GAAIT,EAAYS,EAAQP,GACtBiB,EAAQ,IAAIjB,OACP,GAAIF,EAAYS,EAAQN,GAC7BgB,EAAQ,IAAIhB,OACP,GAAIH,EAAYS,EAAQL,GAC7Be,EAAQ,IAAIf,GAAc,SAAUiB,EAASC,GAC3Cb,EAAOc,MAAK,SAAS1D,GACnBwD,EAAQH,EAAOrD,EAAO8C,EAAQ,OAC7B,SAASd,GACVyB,EAAOJ,EAAOrB,EAAKc,EAAQ,eAG1B,GAAIzB,EAAMsC,UAAUf,GACzBU,EAAQ,QACH,GAAIjC,EAAMuC,WAAWhB,GAC1BU,EAAQ,IAAIO,OAAOjB,EAAOkB,OAAQC,EAAiBnB,IAC/CA,EAAOoB,YAAWV,EAAMU,UAAYpB,EAAOoB,gBAC1C,GAAI3C,EAAM4C,SAASrB,GACxBU,EAAQ,IAAIY,KAAKtB,EAAOuB,eACnB,IAAIhB,GAAaC,EAAOgB,SAASxB,GAStC,OANEU,EAFEF,EAAOiB,YAEDjB,EAAOiB,YAAYzB,EAAO0B,QAG1B,IAAIlB,EAAOR,EAAO0B,QAE5B1B,EAAO2B,KAAKjB,GACLA,EACEnB,EAAYS,EAAQxC,OAC7BkD,EAAQ3D,OAAO6E,OAAO5B,GAEE,oBAAbG,GACTQ,EAAQ5D,OAAO8E,eAAe7B,GAC9BU,EAAQ3D,OAAO6E,OAAOjB,KAGtBD,EAAQ3D,OAAO6E,OAAOzB,GACtBQ,EAAQR,GAIZ,GAAIF,EAAU,CACZ,IAAI6B,EAAQzB,EAAW0B,QAAQ/B,GAE/B,IAAc,GAAV8B,EACF,OAAOxB,EAAYwB,GAErBzB,EAAW2B,KAAKhC,GAChBM,EAAY0B,KAAKtB,GAiBnB,IAAK,IAAIuB,KAdL1C,EAAYS,EAAQP,IACtBO,EAAOkC,SAAQ,SAAS9E,EAAOhB,GAC7B,IAAI+F,EAAW1B,EAAOrE,EAAK8D,EAAQ,GAC/BkC,EAAa3B,EAAOrD,EAAO8C,EAAQ,GACvCQ,EAAM1C,IAAImE,EAAUC,MAGpB7C,EAAYS,EAAQN,IACtBM,EAAOkC,SAAQ,SAAS9E,GACtB,IAAIiF,EAAa5B,EAAOrD,EAAO8C,EAAQ,GACvCQ,EAAM4B,IAAID,MAIArC,EAAQ,CACpB,IAAIuC,EACA5B,IACF4B,EAAQxF,OAAOyF,yBAAyB7B,EAAOsB,IAG7CM,GAAsB,MAAbA,EAAMvE,MAGnB0C,EAAMuB,GAAKxB,EAAOT,EAAOiC,GAAI/B,EAAQ,IAGvC,GAAInD,OAAO0F,sBACT,KAAIC,EAAU3F,OAAO0F,sBAAsBzC,GAC3C,IAASiC,EAAI,EAAGA,EAAIS,EAAQhB,OAAQO,IAAK,CAGvC,IAAIU,EAASD,EAAQT,GACjBW,EAAa7F,OAAOyF,yBAAyBxC,EAAQ2C,KACrDC,GAAeA,EAAWC,YAAezC,KAG7CM,EAAMiC,GAAUlC,EAAOT,EAAO2C,GAASzC,EAAQ,GAC1C0C,EAAWC,YACd9F,OAAO+F,eAAepC,EAAOiC,EAAQ,CACnCE,YAAY,MAMpB,GAAIzC,EACF,KAAI2C,EAAmBhG,OAAOiG,oBAAoBhD,GAClD,IAASiC,EAAI,EAAGA,EAAIc,EAAiBrB,OAAQO,IAAK,CAChD,IAAIgB,EAAeF,EAAiBd,GAChCW,EAAa7F,OAAOyF,yBAAyBxC,EAAQiD,GACrDL,GAAcA,EAAWC,aAG7BnC,EAAMuC,GAAgBxC,EAAOT,EAAOiD,GAAe/C,EAAQ,GAC3DnD,OAAO+F,eAAepC,EAAOuC,EAAc,CACzCJ,YAAY,MAKlB,OAAOnC,EAGT,MAxIuB,oBAAZT,IACTA,GAAW,GAEO,oBAATC,IACTA,EAAQgD,KAoIHzC,EAAOT,EAAQE,GAqBxB,SAASiD,EAAWC,GAClB,OAAOrG,OAAOoD,UAAUkD,SAASC,KAAKF,GAIxC,SAAS/B,EAAS+B,GAChB,MAAoB,kBAANA,GAAoC,kBAAlBD,EAAWC,GAI7C,SAASrC,EAAUqC,GACjB,MAAoB,kBAANA,GAAoC,mBAAlBD,EAAWC,GAI7C,SAASpC,EAAWoC,GAClB,MAAoB,kBAANA,GAAoC,oBAAlBD,EAAWC,GAI7C,SAASjC,EAAiBoC,GACxB,IAAIC,EAAQ,GAIZ,OAHID,EAAGE,SAAQD,GAAS,KACpBD,EAAGG,aAAYF,GAAS,KACxBD,EAAGI,YAAWH,GAAS,KACpBA,EAIT,OAxCA/E,EAAMmF,eAAiB,SAAwB5D,GAC7C,GAAe,OAAXA,EACF,OAAO,KAET,IAAI6D,EAAI,aAER,OADAA,EAAE1D,UAAYH,EACP,IAAI6D,GAQbpF,EAAM0E,WAAaA,EAKnB1E,EAAM4C,SAAWA,EAKjB5C,EAAMsC,UAAYA,EAKlBtC,EAAMuC,WAAaA,EASnBvC,EAAM0C,iBAAmBA,EAElB1C,EA3PP,GA8PkCrF,EAAOC,UACvCD,EAAOC,QAAUoF,K,iEC/PnB,oEAAO,MAAMvC,EAAW,CACtB4H,EAAG,KACHC,GAAI,MAGOC,EAAW7H,GAAsB,MAAbA,EAAK/B,M,oCCJtC,IAAI6J,EAAI,EAAQ,QACZC,EAAW,EAAQ,QACnBC,EAAoB,EAAQ,QAC5BC,EAAiB,EAAQ,QACzBC,EAAwB,EAAQ,QAChCC,EAA2B,EAAQ,QAGnCC,EAAqC,IAAlB,GAAGC,QAAQ,GAG9BC,EAAiC,WACnC,IAEE1H,OAAO+F,eAAe,GAAI,SAAU,CAAE4B,UAAU,IAASF,UACzD,MAAO1F,GACP,OAAOA,aAAiB3F,YAIxBwL,EAASJ,IAAqBE,IAIlCR,EAAE,CAAEW,OAAQ,QAASjE,OAAO,EAAMkE,MAAO,EAAGC,OAAQH,GAAU,CAE5DH,QAAS,SAAiBrI,GACxB,IAAI7C,EAAI4K,EAAS5G,MACbyH,EAAMZ,EAAkB7K,GACxB0L,EAAWC,UAAUvD,OACzB,GAAIsD,EAAU,CACZV,EAAyBS,EAAMC,GAC/B,IAAIE,EAAIH,EACR,MAAOG,IAAK,CACV,IAAIC,EAAKD,EAAIF,EACTE,KAAK5L,EAAGA,EAAE6L,GAAM7L,EAAE4L,GACjBb,EAAsB/K,EAAG6L,GAEhC,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAUI,IAC5B9L,EAAE8L,GAAKH,UAAUG,GAEnB,OAAOhB,EAAe9K,EAAGyL,EAAMC,O,kLCjC1B9J,MAAM,U,QAEPmK,gCAAkB,YAAZ,SAAK,I,QAIbA,gCAAkB,YAAZ,SAAK,I,QAQXA,gCAAmC,QAA7BnK,MAAM,SAAQ,YAAQ,I,GAMzBA,MAAM,Y,GACJA,MAAM,a,QACTmK,gCAAkB,YAAZ,SAAK,I,GASRnK,MAAM,kB,GACNA,MAAM,W,GACJA,MAAM,c,GACJA,MAAM,c,qBASLA,MAAM,U,GAKFA,MAAM,S,GAGXA,MAAM,gB,GAeZA,MAAM,YAAYP,IAAI,S,GAShBO,MAAM,W,iBAWJA,MAAM,sB,iBAuBdA,MAAM,e,wlBA/Gf1B,yBA2IiB8L,EAAA,CA3IAC,UAAS5L,EAAA6L,QAAM,CACnBC,GAAExL,qBACX,IAiBM,CAjBNoL,gCAiBM,MAjBNK,EAiBM,CAhBYjL,EAAAkL,Y,yBAAhB5J,gCAIWC,cAAA,CAAAI,IAAA,IAHTwJ,EACAP,gCAA6B,YAAAQ,6BAApBpL,EAAAkL,YAAU,GACnBzL,yBAAoG4L,EAAA,CAA9F1L,KAAK,WAAW2L,KAAK,KAAM1L,QAAOV,EAAAqM,cAAetM,MAAM,OAAOwB,MAAM,yB,iEAE5E+K,EACA/L,yBAMSgM,EAAA,C,WANQzL,EAAA0L,U,qCAAA1L,EAAA0L,UAAStM,GAAEc,IAAI,OAAOyL,WAAA,GAAWC,UAAA,GAAUnL,MAAM,Y,8BAE9D,IAAwB,E,2BAD1Ba,gCAIyBC,cAAA,KAAAC,wBAHRxB,EAAA6L,SAARnK,I,yBADT3C,yBAIyB+M,EAAA,CAFtBnK,IAAKD,EAAKqK,OACVpJ,MAAOjB,EAAKqK,Q,8BACd,IAAe,C,0DAAZrK,EAAKZ,MAAI,K,sDAEfkL,EACAvM,yBAAwGoB,EAAA,C,WAAtFb,EAAAiM,Y,qCAAAjM,EAAAiM,YAAW7M,GAAE8M,YAAY,OAAQC,UAAUjN,EAAAkN,eAAgB3L,MAAM,Y,mCACnFhB,yBAAoGC,EAAA,CAA5FC,KAAK,UAAWC,QAAOV,EAAAkN,eAAiBrM,QAASC,EAAAqM,eAAgB5L,MAAM,S,8BAAQ,IAAI,C,6BAAJ,U,kCAGhF6L,KAAI9M,qBACb,IA6CM,CA7CNoL,gCA6CM,MA7CN2B,EA6CM,CA5CJ3B,gCASM,MATN4B,EASM,CARJC,EACAhN,yBAMSgM,EAAA,C,WANQzL,EAAA0M,U,qCAAA1M,EAAA0M,UAAStN,GAAEuM,WAAA,GAAWC,UAAA,GAAWe,WAAWzN,EAAA0N,WAAYnM,MAAM,Y,8BAE3E,IAAwB,E,2BAD1Ba,gCAIyBC,cAAA,KAAAC,wBAHRxB,EAAA6M,SAARnL,I,yBADT3C,yBAIyB+M,EAAA,CAFtBnK,IAAKD,EAAK2B,OACVV,MAAOjB,EAAK2B,Q,8BACd,IAAe,C,0DAAZ3B,EAAKZ,MAAI,K,qEAGjB8J,gCAiCM,MAjCNkC,EAiCM,C,4BAhCJlC,gCAAoD,IAApDmC,EAA4C,OAAI,M,aAApB7N,EAAA8N,QAAQ3J,U,4BACpCuH,gCA8BM,MA9BNqC,EA8BM,CA7BJrC,gCAgBM,MAhBNsC,EAgBM,CAfJtC,gCAAoD,KAAhD3L,MAAOC,EAAA8N,QAAQlM,MAAM,QAAKsK,6BAAGlM,EAAA8N,QAAQlM,MAAI,EAAAqM,GAC7CvC,gCAaI,UAX4B1L,EAAA8N,QAAQ9L,OAAShC,EAAA8N,QAAQI,aAAsClO,EAAA8N,QAAQhM,MAAQ9B,EAAA8N,QAAQK,YAAuCnO,EAAA8N,QAAQjM,UAAY7B,EAAA8N,QAAQM,gB,yBADxLhM,gCAOoE,OAPpEiM,EAOC,IAACnC,6BAAGlM,EAAA8N,QAAQI,aAAelO,EAAA8N,QAAQI,YAAYI,QAAQ,IAAD,I,oEAAa,KACnEpC,6BAAGlM,EAAA8N,QAAQ9L,OAAShC,EAAA8N,QAAQ9L,MAAMsM,QAAQ,IAAK,MAEhDpC,6BAAGlM,EAAA8N,QAAQhM,MAAO,IAClB,GAAA4J,gCAAiD,OAAjD6C,EAAiDrC,6BAA1BlM,EAAA8N,QAAQjM,UAAQ,O,4BAG3C6J,gCAWM,MAXN8C,EAWM,CAVJjO,yBAOiBwB,EAAA,CANff,IAAI,Q,WACKhB,EAAA8N,QAAQjL,M,qCAAR7C,EAAA8N,QAAQjL,MAAK3C,GACtB8M,YAAY,KACZlK,QAAA,GACCb,IAAK,EACLgL,UAAUjN,EAAAyO,Y,mCAEblO,yBAAyDC,EAAA,CAAhDE,QAAKC,EAAA,KAAAA,EAAA,GAAAT,GAAEY,EAAA0M,UAAY,IAAIjM,MAAM,S,8BAAQ,IAAE,C,6BAAF,Q,MAC9ChB,yBAAoEC,EAAA,CAA5DC,KAAK,UAAWC,QAAOV,EAAAyO,WAAYlN,MAAM,S,8BAAQ,IAAE,C,6BAAF,Q,uCAVzBvB,EAAA8N,QAAQ3J,W,kBAlBZnE,EAAA8N,QAAQ3J,cAiC5CuH,gCAwCM,MAxCNgD,EAwCM,CAvCJnO,yBAsCQoO,EAAA,CAtCAC,QAAS9N,EAAA8N,QAAUvL,KAAMvC,EAAA+N,SAAWC,OAAQhO,EAAAgO,OAAQC,OAAA,I,CAC/ClN,SAAQvB,qBACjB,EADqB6H,WAAK,CAC1B5H,yBAAoFoB,EAAA,C,WAAlEb,EAAA+N,SAAS1G,GAAOtG,S,yBAAhBf,EAAA+N,SAAS1G,GAAOtG,SAAQ3B,EAAE8M,YAAY,KAAKzL,MAAM,Q,+CAE1DO,KAAIxB,qBACb,EADiB6H,WAAK,CACtB5H,yBAAgFoB,EAAA,C,WAA9Db,EAAA+N,SAAS1G,GAAOrG,K,yBAAhBhB,EAAA+N,SAAS1G,GAAOrG,KAAI5B,EAAE8M,YAAY,KAAKzL,MAAM,Q,+CAEtDS,MAAK1B,qBACd,EADkB6H,WAAK,CACvBuD,gCAcM,MAdNsD,EAcM,CAZwBlO,EAAA+N,SAAS1G,GAAOnG,OAASlB,EAAA+N,SAAS1G,GAAO+F,aAAoCpN,EAAA+N,SAAS1G,GAAOrG,MAAQhB,EAAA+N,SAAS1G,GAAOgG,YAAqCrN,EAAA+N,SAAS1G,GAAOtG,UAAYf,EAAA+N,SAAS1G,GAAOiG,gBAA2CtN,EAAA+N,SAAS1G,GAAO8G,QAAUnO,EAAA+N,SAAS1G,GAAO+G,c,yBADvT9M,gCASqD,K,MAFlD1B,QAAKR,GAAEY,EAAA+N,SAAS1G,GAAOnG,MAAQlB,EAAA+N,SAAS1G,GAAO+F,YAChD3M,MAAM,sB,8BACP,MAAEmK,gCAA8C,YAAAQ,6BAArCpL,EAAA+N,SAAS1G,GAAO+F,aAAW,I,6CACvCxC,gCAEM,MAFNyD,EAEM,C,6BAF0B,OAC5B5O,yBAAoFwB,EAAA,C,WAA5DjB,EAAA+N,SAAS1G,GAAOnG,M,yBAAhBlB,EAAA+N,SAAS1G,GAAOnG,MAAK9B,EAAG+B,IAAK,EAAIC,KAAM,I,mDAI5DW,MAAKvC,qBACd,EADkB6H,WAAK,CACvB5H,yBAAgFwB,EAAA,C,WAAxDjB,EAAA+N,SAAS1G,GAAOtF,M,yBAAhB/B,EAAA+N,SAAS1G,GAAOtF,MAAK3C,EAAE4C,QAAA,GAASb,IAAK,G,+CAEpDgN,OAAM3O,qBACf,EADmB6H,WAAK,CACxB5H,yBAEkB6O,EAAA,CAFAC,cAAavO,EAAA+N,SAAS1G,GAAO8G,Q,8BAC7C,IAAgG,CAAhG1O,yBAAgG+O,EAAA,CAApF1N,MAAM,EAAOlB,QAAKR,GAAEY,EAAA+N,SAAS1G,GAAO8G,QAAUnO,EAAA+N,SAAS1G,GAAO8G,Q,8BAAQ,IAAE,C,6BAAF,Q,sDAG3EM,QAAOjP,qBAChB,EADoB6H,WAAK,CACzB5H,yBAAmFoB,EAAA,C,WAAjEb,EAAA+N,SAAS1G,GAAOoH,Q,yBAAhBzO,EAAA+N,SAAS1G,GAAOoH,QAAOrP,EAAE8M,YAAY,KAAKzL,MAAM,Q,+CAEzDiO,QAAOlP,qBAChB,EADoB6H,WAAK,CACzBuD,gCAA2D,KAAvDhL,QAAKR,GAAEF,EAAAyP,WAAWtH,GAAQ5G,MAAM,kBAAiB,KAAE,EAAAmO,K,4CAKpDrP,OAAMC,qBACf,IAyBM,CAzBNoL,gCAyBM,MAzBNiE,EAyBM,CAxBJjE,gCAgBM,YAfJnL,yBAAkEC,EAAA,CAA1DC,KAAK,UAAWC,QAAKC,EAAA,KAAAA,EAAA,GAAAT,GAAEY,EAAA8O,eAAgB,I,8BAAM,IAAI,C,6BAAJ,U,MACrDrP,yBAagBC,EAAA,CAZbE,QAAKC,EAAA,KAAAA,EAAA,GAAAT,IAAkBY,EAAA+N,SAAQ,IAAOgB,MAAK,IAAKC,OAAOC,IAAG,CAAEvN,EAAM2F,K,YAAoEA,EAAK,G,eAA0CA,EAAK,G,WAAsCA,EAAK,G,MAAkC6H,SAAoB,IAAXC,KAAKC,U,OAA4CC,WAAsB,IAAXF,KAAKC,UAAgB5B,QAAO,QAWzW/M,MAAM,S,8BACP,IAAM,C,6BAAN,Y,QAEHmK,gCAA2B,SAAxB,OAAIQ,6BAAGpL,EAAAsP,YAAU,GACpB1E,gCAKM,YAJJnL,yBAAoEC,EAAA,CAA5DC,KAAK,QAASC,QAAKC,EAAA,KAAAA,EAAA,GAAAT,GAAEF,EAAAqQ,YAAY9O,MAAM,S,8BAAQ,IAAI,C,6BAAJ,U,MACvDhB,yBAAkFC,EAAA,CAAzEE,QAAKC,EAAA,KAAAA,EAAA,GAAAT,GAAEF,EAAAsQ,UAAU,MAAOzP,QAASC,EAAAyP,YAAahP,MAAM,S,8BAAQ,IAAI,C,6BAAJ,U,oBAErEhB,yBAAqGiQ,EAAA,CAA3FC,KAAM3P,EAAA+N,SAAW6B,MAAO5P,EAAAsP,WAAaO,YAAW3Q,EAAA4Q,QAAUC,QAAKlQ,EAAA,KAAAA,EAAA,GAAAT,GAAEF,EAAAsQ,UAAU,O,yCAGzF/P,yBAAoFuQ,EAAA,C,WAA3DhQ,EAAA8O,c,uCAAA9O,EAAA8O,cAAa1P,GAAE0C,UAAA,GAAWmO,OAAM/Q,EAAAgR,U,mKAahD,GACbpP,KAAM,aACNqP,WAAY,CAAEC,MAAKC,OAAEC,eAASC,qBAC9BhO,OACE,MAAO,CACLiO,IAAK,KACL3D,SAAU,GACVhB,SAAU,GACVa,UAAW,GACXhB,UAAW,GACXR,WAAY,GACZ6C,SAAU,GACVC,OAAQ,EACRF,QAAS,CACP,CAAE7O,MAAO,KAAMU,KAAM,QAAS8Q,MAAO,SAAUpR,MAAO,IACtD,CAAEJ,MAAO,KAAM0C,IAAK,OAAQ8O,MAAO,SAAUC,SAAU,KACvD,CAAEzR,MAAO,KAAM0R,KAAM,WAAYF,MAAO,SAAUpR,MAAO,KACzD,CAAEJ,MAAO,KAAM0R,KAAM,OAAQF,MAAO,SAAUpR,MAAO,KACrD,CAAEJ,MAAO,KAAM0R,KAAM,QAASF,MAAO,SAAUpR,MAAO,KACtD,CAAEJ,MAAO,KAAM0R,KAAM,QAASF,MAAO,SAAUpR,MAAO,KACtD,CAAEJ,MAAO,OAAQ0R,KAAM,SAAUF,MAAO,SAAUpR,MAAO,KACzD,CAAEJ,MAAO,KAAM0R,KAAM,UAAWF,MAAO,SAAUpR,MAAO,KACxD,CAAEJ,MAAO,KAAM0R,KAAM,UAAWF,MAAO,SAAUpR,MAAO,MAE1DiQ,WAAY,OACZR,eAAe,EACf8B,cAAc,EACdnB,aAAa,EACbxD,YAAa,GACbI,gBAAgB,IAGpB3I,MAAO,CACLqK,SAAU,CACRpK,MAAM,EACNC,QAAQ+L,GACN9M,KAAKyM,YACHK,EAAKkB,OAAO,CAACC,EAAKC,IAASD,KAAQC,EAAKhP,MAAQgP,EAAK7P,OAAOsM,QAAQ,GAAI,IAAM,GAC9EA,QAAQ,KAGdwD,OAAQ,CACNrN,MAAM,EACNsN,WAAW,EACXrN,SAAQ,KAAE9C,IACR,GAAa,eAATA,EAAuB,OAC3B,MAAM,OAAE0D,EAAS,IAAO0M,QAAQC,MAC3B7O,OAAO8O,KAAK5M,GAAQyC,SACrBpE,KAAKkL,SAAS9G,OAChBpE,KAAKwO,OAAOC,QAAQ,CAClBrS,MAAO,OACPsS,QAAS,yBACTC,KAAMA,KACJ3O,KAAK4O,SAASjN,MAIlB3B,KAAK4O,SAASjN,MAIpBkH,UAAUA,GACR7I,KAAK6O,WAAWhG,KAGpBtI,SAAU,CACR0M,UACE,OAAOjN,KAAKgJ,SAAS8F,KAAMjQ,GAASA,EAAKqK,QAAUlJ,KAAK6I,YAAc,IAExEsB,UACE,MAAM4E,EAAO/O,KAAKgK,SAAS8E,KAAMjQ,GAASA,EAAK2B,QAAUR,KAAK6J,YAAc,GAE5E,OADAkF,EAAK7P,MAAQ,EACN6P,IAGX3N,QAAS,CACPwN,SAASjN,GACP3B,KAAK6I,UAAYlH,EAAOuH,QAAUvH,EAAOuH,OAAS,GAClDlJ,KAAKqI,WAAa1G,EAAOqN,SAAW,GACpChP,KAAKiP,UAAU,KACbjP,KAAKkL,SAAWgE,KAAKC,MAAMxN,EAAOuJ,UAAY,MAC3CkB,IAAKvN,IACgB,SAAhB8C,EAAO7E,OACT+B,EAAKR,MAAQQ,EAAK0L,aAEb1L,IAGXwP,QAAQC,MAAM3M,OAAS,MAG3B,mBACE,IACE3B,KAAK+N,cAAe,EACpB,MAAM,WAAEqB,EAAU,KAAE1P,SAAe2P,eAAW,CAC5CvC,KAAM9M,KAAKkL,SACX6B,MAAO/M,KAAKyM,cACR,GACa,IAAf2C,GAAoB1P,GACtBM,KAAKuB,SAASM,QAAQ,QAExB,MAAOC,GACP9B,KAAKuB,SAASC,MAAO,SAAOM,EAAI1B,SAAW0B,IAC3C,QACA9B,KAAK+N,cAAe,IAGxBrF,gBACE1I,KAAKwO,OAAOC,QAAQ,CAClBrS,MAAO,OACPsS,QAAS,YACTC,KAAMA,KACJ3O,KAAKqI,WAAa,OAIxBqE,SAAS4C,GACHA,GACFtP,KAAKkL,SAAW,GAChBlL,KAAK6J,UAAY,IAEjB7J,KAAKwO,OAAOC,QAAQ,CAClBrS,MAAO,OACPsS,QAAS,cACTC,KAAMA,KACJ3O,KAAKkL,SAAW,GAChBlL,KAAK6J,UAAY,OAKzBE,aACE/J,KAAKiP,UAAU,KACbjP,KAAKgB,MAAM9B,MAAMqQ,WAGrBzE,aACE,IAAK9K,KAAKmK,QAAQjL,MAAO,OAAOc,KAAKuB,SAASiO,KAAK,WACnD,MAAMhL,EAAQxE,KAAKkL,SAASuE,UAAW5Q,GAASA,EAAK2B,SAAWR,KAAKmK,QAAQ3J,SAC9D,IAAXgE,EACFxE,KAAKkL,SAAShE,QAAQ,IAAKlH,KAAKmK,UAEhCnK,KAAKkL,SAAS1G,GAAOtF,OAASc,KAAKmK,QAAQjL,MAE7Cc,KAAK6J,UAAY,IAEnBiC,WAAWtH,GACTxE,KAAKwO,OAAOC,QAAQ,CAClBrS,MAAO,OACPsS,QAAS,aACTC,KAAMA,KACJ3O,KAAKkL,SAASwE,OAAOlL,EAAO,OAIlC,gBAAgBmL,GACd,GAAc,KAAVA,IAAkB3P,KAAK6I,UACzB,OAAO7I,KAAKuB,SAASiO,KAAK,WACrB,GAAc,KAAVG,GAAkB3P,KAAK6I,UAGlC,IACE7I,KAAK4M,aAAc,EACnB,MAAM,WAAEwC,EAAU,KAAE1P,SAAeiN,eAAU,CAC3CqC,QAAShP,KAAKqI,iBAAcuH,EAC5B1G,OAAQlJ,KAAK6I,UACb8G,SACA5C,MAAO/M,KAAKyM,WACZoD,OAAQX,KAAKY,UAAU9P,KAAKkL,aACxB,GACa,IAAfkE,GAAoB1P,IACtBM,KAAKuB,SAASM,QAAQ,QACtB7B,KAAK+P,UAAUnP,MAAM,aACrBZ,KAAK0M,UAAS,GACd1M,KAAK6I,UAAY,GACjB7I,KAAKqI,WAAa,GAClBrI,KAAKgQ,gBAEP,MAAOlO,GACP9B,KAAKuB,SAASC,MAAO,WAASM,EAAI1B,SAAW0B,IAC7C,QACA9B,KAAK4M,aAAc,IAGvBiC,aACE,MAAM,QAAEoB,EAAU,IAAOjQ,KAAKiN,QAC9BjN,KAAKgK,SAAWhK,KAAKgK,SAASoC,IAAKvN,IAE7BA,EAAKV,OAASU,EAAK2L,YAAc3L,EAAKX,WAAaW,EAAK4L,eAC1D5L,EAAKR,MAAQ4R,EAAQpR,EAAK2B,SAAW3B,EAAK0L,YAE1C1L,EAAKR,MAAQQ,EAAK0L,YAEb1L,IAETmB,KAAKkL,SAAWlL,KAAKkL,SAASkB,IAAKvN,IAE7BA,EAAKV,OAASU,EAAK2L,YAAc3L,EAAKX,WAAaW,EAAK4L,eAC1D5L,EAAKR,MAAQ4R,EAAQpR,EAAK2B,SAAW3B,EAAK0L,YAE1C1L,EAAKR,MAAQQ,EAAK0L,YAEb1L,KAGX,uBACE,GAAKmB,KAAKoJ,YAIV,IACEpJ,KAAKwJ,gBAAiB,EACtB,MAAQ9J,KAAMwQ,SAAmBC,eAAY,CAC3ClS,KAAM+B,KAAKoJ,eACP,GACN,GAAI8G,EAIF,OAHAlQ,KAAKuB,SAASC,MAAM,YACpBxB,KAAK6I,UAAYqH,EAAShH,YAC1BlJ,KAAKoJ,YAAc,IAGrB,MAAM,KAAE1J,SAAe0Q,eAAU,CAAEnS,KAAM+B,KAAKoJ,eAAkB,GAC5D1J,IACFM,KAAKuB,SAASM,QAAQ,QACtB7B,KAAK6I,UAAYnJ,EAAKwJ,OACtBlJ,KAAKoJ,YAAc,GACnBpJ,KAAKgQ,gBAEP,MAAOlO,GACP9B,KAAKuB,SAASC,MAAO,WAASM,EAAI1B,SAAW0B,IAC7C,QACA9B,KAAKwJ,gBAAiB,OAxBtBxJ,KAAKuB,SAASiO,KAAK,gBA2BvBnC,SAAS3N,GACPM,KAAKkL,SAAShE,QAAQ,IAAKxH,IAC3BM,KAAKqQ,gBAEP,qBACE,IACE,MAAM,WAAEjB,EAAU,KAAE1P,SAAe4Q,kBAAiB,GACjC,IAAflB,IACFpP,KAAKgK,SAAWtK,GAAQA,EAAK0M,IAAKvN,IAChCA,EAAK0L,YAAc1L,EAAKR,OAAS,EACjCQ,EAAKV,KAAOU,EAAKV,MAAQ,GACzBU,EAAK2L,WAAa3L,EAAKV,MAAQ,GAC/BU,EAAKX,SAAWW,EAAKX,UAAY,GACjCW,EAAK4L,eAAiB5L,EAAKX,UAAY,GACvCW,EAAKyM,OAAS5E,eAAQ7H,GACtBA,EAAK0M,aAAe7E,eAAQ7H,GACrBA,KACH,IAER,MAAOiD,GACP9B,KAAKuB,SAASC,MAAO,aAAWM,EAAI1B,SAAW0B,MAGnD,qBACE,IACE,MAAM,WAAEsN,EAAU,KAAE1P,SAAe6Q,kBAAiB,GACpD,GAAmB,IAAfnB,IACFpP,KAAKgJ,SAAWtJ,GAAQA,EAAK0M,IAAKvN,IAChC,MAAMoR,EAAU,GAKhB,OAJApR,EAAKoR,QAAQrL,QAASD,IACpBsL,EAAQtL,EAAEnE,SAAWmE,EAAEtG,QAEzBQ,EAAKoR,QAAUA,EACRpR,KACH,GACFmB,KAAK6I,WAAW,CAClB,MAAM2H,EAAO9Q,EAAKoP,KAAMjQ,GAASA,EAAKqK,SAAWlJ,KAAK6I,YAAc,GACpE7I,KAAKgB,MAAMwP,KAAKC,OAAS,CAAC,CAAE3Q,MAAOE,KAAK6I,UAAW/K,MAAO0S,EAAKvS,KAAMyS,IAAK,QAG9E,MAAO5O,GACP9B,KAAKuB,SAASC,MAAO,aAAWM,EAAI1B,SAAW0B,MAInDoG,SACElI,KAAK2N,IAAMgD,MACX3Q,KAAK2N,IAAIiD,SAAS5Q,KAAKgB,MAAM6P,MAAO,KAClC7Q,KAAKmL,OAASnL,KAAKgB,MAAM6P,MAAMC,iBAIrCC,YACE/Q,KAAKqQ,eACLrQ,KAAKgQ,gBAEPgB,gBACEhR,KAAK2N,IAAIsD,UAAUjR,KAAKgB,MAAM6P,S,iCCzblC,MAAM9O,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E","file":"public/js/chunk-6e69dfb2.33f79974.js","sourcesContent":["'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=6f01656a&lang=less&scoped=true\"","<template>\r\n  <Modal :title=\"title\" v-model=\"showModal\" :width=\"400\" class-name=\"vertical-center-modal\">\r\n    <Form ref=\"form\" :model=\"formData\" :rules=\"rules\" :label-width=\"60\" @keydown.enter=\"submit\" class=\"plr\">\r\n      <FormItem label=\"名称:\" prop=\"name\">\r\n        <viInput v-model=\"formData.name\"></viInput>\r\n      </FormItem>\r\n      <FormItem label=\"规格:\" prop=\"standard\">\r\n        <viInput v-model=\"formData.standard\"></viInput>\r\n      </FormItem>\r\n      <FormItem label=\"单位:\" prop=\"unit\">\r\n        <viInput v-model=\"formData.unit\"></viInput>\r\n      </FormItem>\r\n      <FormItem label=\"单价:\" prop=\"price\">\r\n        <viInputNumber v-model=\"formData.price\" :min=\"0\" :step=\"0.5\"></viInputNumber>\r\n      </FormItem>\r\n      <FormItem label=\"种类:\" prop=\"type\">\r\n        <RadioGroup v-model=\"formData.type\">\r\n          <Radio v-for=\"(item, key) in TYPE_MAP\" :key=\"key\" :label=\"key\">{{ item }}</Radio>\r\n        </RadioGroup>\r\n      </FormItem>\r\n      <FormItem label=\"数量:\" prop=\"count\" v-if=\"showCount\">\r\n        <viInputNumber v-model=\"formData.count\" integer :min=\"0\"></viInputNumber>\r\n      </FormItem>\r\n    </Form>\r\n    <template #footer>\r\n      <Button type=\"text\" @click=\"showModal = false\">取消</Button>\r\n      <Button type=\"primary\" @click=\"submit\" :loading=\"loading\">确定</Button>\r\n    </template>\r\n  </Modal>\r\n</template>\r\n\r\n<script>\r\nimport { saveGoods, verifyGoods } from \"@/axios\";\r\nimport { TYPE_MAP } from \"@/constant\";\r\nimport clone from \"clone\";\r\n\r\nexport default {\r\n  name: \"addGoodModal\",\r\n  props: {\r\n    modelValue: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    detailData: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      }\r\n    },\r\n    showCount: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    const verifyName = async (rule, value, callback) => {\r\n      if (value && this.detailData.name !== this.formData.name) {\r\n        const { data } = await verifyGoods({\r\n          name: value,\r\n        }) || {};\r\n        if (data) {\r\n          return callback(new Error(\"该商品名称已存在\"));\r\n        }\r\n      }\r\n      callback();\r\n    };\r\n    return {\r\n      TYPE_MAP,\r\n      formData: {},\r\n      rules: {\r\n        name: [\r\n          { required: true, message: \"请输入商品名称\" },\r\n          { validator: verifyName, trigger: \"blur\", }\r\n        ],\r\n      },\r\n      loading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    title() {\r\n      return `${!this.detailData.goodId ? \"新增\" : \"编辑\"}商品`;\r\n    },\r\n    showModal: {\r\n      get() {\r\n        return this.modelValue;\r\n      },\r\n      set(val) {\r\n        this.$emit(\"update:modelValue\", val);\r\n        if (!val) {\r\n          this.$emit(\"close\");\r\n        }\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    detailData: {\r\n      deep: true,\r\n      handler() {\r\n        this.$refs.form.resetFields();\r\n        this.formData = clone(this.detailData);\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    submit() {\r\n      this.loading = true;\r\n      this.$refs.form.validate(async (valid) => {\r\n        if (!valid) {\r\n          this.$Message.error(\"数据校验不通过\");\r\n          this.loading = false;\r\n          return;\r\n        }\r\n        try {\r\n          const { _index, _rowKey, count, ...params } = this.formData;\r\n          const { data } = await saveGoods(params) || {};\r\n          if (data) {\r\n            this.$Message.success(`${this.title}成功`);\r\n            this.$emit(\"save\", { ...this.formData });\r\n            this.$refs.form.resetFields();\r\n            this.showModal = false;\r\n          }\r\n        } catch (err) {\r\n          this.$Message.error(`请求失败：${err.message || err}`);\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n","import { render } from \"./addGoodModal.vue?vue&type=template&id=35760676\"\nimport script from \"./addGoodModal.vue?vue&type=script&lang=js\"\nexport * from \"./addGoodModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\goodCashier\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","export const TYPE_MAP = {\r\n  1: \"整件\",\r\n  99: \"散装\",\r\n};\r\n\r\nexport const IS_BULK = (item) => item.type == \"99\";\r\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_RESULT || !properErrorOnNonWritableLength();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n","<!--\r\n * @Author: zzx\r\n * @Date: 2023-09-12 21:26:12\r\n * @LastEditors: zzx\r\n * @LastEditTime: 2023-12-03 23:25:53\r\n-->\r\n<template>\r\n  <viLayoutUpDown @onMount=\"addErd\">\r\n    <template #up>\r\n      <div class=\"header\">\r\n        <template v-if=\"curOrderId\">\r\n          <span>订单编号：</span>\r\n          <span>{{ curOrderId }}</span>\r\n          <Icon type=\"md-close\" size=\"25\" @click=\"deleteOrderId\" title=\"重建订单\" class=\"vi-link-pointer mr-10\" />\r\n        </template>\r\n        <span>客户名称：</span>\r\n        <Select v-model=\"curUserId\" ref=\"user\" filterable clearable class=\"vi-width\">\r\n          <Option\r\n            v-for=\"item in allUsers\"\r\n            :key=\"item.userId\"\r\n            :value=\"item.userId\"\r\n          >{{ item.name }}</Option>\r\n        </Select>\r\n        <span class=\"ml-15\">没有？快速新增：</span>\r\n        <viInput v-model=\"newUserName\" placeholder=\"客户名称\" @on-enter=\"confirmAddUser\" class=\"vi-width\"></viInput>\r\n        <Button type=\"success\" @click=\"confirmAddUser\" :loading=\"newUserLoading\" class=\"ml-10\">新增客户</Button>\r\n      </div>\r\n    </template>\r\n    <template #down>\r\n      <div class=\"good-box\">\r\n        <div class=\"flex-none\">\r\n          <span>商品名称：</span>\r\n          <Select v-model=\"curGoodId\" filterable clearable @on-change=\"selectGood\" class=\"vi-width\">\r\n            <Option\r\n              v-for=\"item in allGoods\"\r\n              :key=\"item.goodId\"\r\n              :value=\"item.goodId\"\r\n            >{{ item.name }}</Option>\r\n          </Select>\r\n        </div>\r\n        <div class=\"search-wrapper\">\r\n          <p class=\"no-data\" v-show=\"!curGood.goodId\">暂无数据</p>\r\n          <div class=\"search-box\" v-show=\"curGood.goodId\">\r\n            <div class=\"search-msg\">\r\n              <b :title=\"curGood.name\">商品名称：{{ curGood.name }}</b>\r\n              <p>\r\n                <span\r\n                  v-if=\"\r\n                    curGood.price != curGood.originPrice &&\r\n                      curGood.unit == curGood.originUnit &&\r\n                        curGood.standard == curGood.originStandard\r\n                  \"\r\n                  class=\"origin\"\r\n                >￥{{ curGood.originPrice && curGood.originPrice.toFixed(2) }}</span>\r\n                ￥{{ curGood.price && curGood.price.toFixed(2) }}\r\n                /\r\n                {{ curGood.unit }}\r\n                <span class=\"ml-10\">{{ curGood.standard }}</span>\r\n              </p>\r\n            </div>\r\n            <div class=\"search-input\" v-show=\"curGood.goodId\">\r\n              <viInputNumber\r\n                ref=\"count\"\r\n                v-model=\"curGood.count\"\r\n                placeholder=\"数量\"\r\n                integer\r\n                :min=\"0\"\r\n                @on-enter=\"confirmAdd\"\r\n              ></viInputNumber>\r\n              <Button @click=\"curGoodId = ''\" class=\"ml-10\">取消</Button>\r\n              <Button type=\"primary\" @click=\"confirmAdd\" class=\"ml-10\">增加</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"table-box\" ref=\"table\">\r\n        <Table :columns=\"columns\" :data=\"goodList\" :height=\"height\" stripe>\r\n          <template #standard=\"{ index }\">\r\n            <viInput v-model=\"goodList[index].standard\" placeholder=\"规格\" class=\"w100\"></viInput>\r\n          </template>\r\n          <template #unit=\"{ index }\">\r\n            <viInput v-model=\"goodList[index].unit\" placeholder=\"单位\" class=\"w100\"></viInput>\r\n          </template>\r\n          <template #price=\"{ index }\">\r\n            <div class=\"flex-bc\">\r\n              <p\r\n                v-if=\"\r\n                  goodList[index].price != goodList[index].originPrice &&\r\n                    goodList[index].unit == goodList[index].originUnit &&\r\n                      goodList[index].standard == goodList[index].originStandard &&\r\n                        goodList[index].isBulk == goodList[index].originIsBulk\r\n                \"\r\n                @click=\"goodList[index].price = goodList[index].originPrice\"\r\n                class=\"origin w40 pointer\"\r\n              >￥ <span>{{ goodList[index].originPrice }}</span></p>\r\n              <div class=\"w60 flex-cc flex-1\">\r\n                ￥ <viInputNumber v-model=\"goodList[index].price\" :min=\"0\" :step=\"0.5\"></viInputNumber>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <template #count=\"{ index }\">\r\n            <viInputNumber v-model=\"goodList[index].count\" integer :min=\"0\"></viInputNumber>\r\n          </template>\r\n          <template #isBulk=\"{ index }\">\r\n            <van-radio-group :model-value=\"goodList[index].isBulk\">\r\n              <van-radio :name=\"true\" @click=\"goodList[index].isBulk = !goodList[index].isBulk\">散装</van-radio>\r\n            </van-radio-group>\r\n          </template>\r\n          <template #remarks=\"{ index }\">\r\n            <viInput v-model=\"goodList[index].remarks\" placeholder=\"备注\" class=\"w100\"></viInput>\r\n          </template>\r\n          <template #operate=\"{ index }\">\r\n            <a @click=\"deleteGood(index)\" class=\"vi-red-pointer\">删除</a>\r\n          </template>\r\n        </Table>\r\n      </div>\r\n    </template>\r\n    <template #footer>\r\n      <div class=\"page-footer\">\r\n        <div>\r\n          <Button type=\"primary\" @click=\"showGoodModal = true\">新增商品</Button>\r\n          <Button\r\n            @click=\"\r\n              goodList = new Array(90).fill().map((item, index) => {\r\n                return {\r\n                  name: `物品${index + 1}`,\r\n                  standard: `规格${index + 1}`,\r\n                  unit: `单位${index + 1}`,\r\n                  count: parseInt(Math.random() * 100),\r\n                  price: +parseFloat(Math.random() * 100).toFixed(2),\r\n                };\r\n              })\r\n            \"\r\n            class=\"ml-10\"\r\n          >生成随机订单</Button>\r\n        </div>\r\n        <p>总计：￥{{ totalPrice }}</p>\r\n        <div>\r\n          <Button type=\"error\" @click=\"clearAll()\" class=\"ml-10\">清空商品</Button>\r\n          <Button @click=\"saveOrder('1')\" :loading=\"saveLoading\" class=\"ml-10\">保存草稿</Button>\r\n          <!-- <Button type=\"success\" @click=\"printOrder\" :loading=\"printLoading\" class=\"ml-10\">打印小票</Button> -->\r\n          <viPrint :list=\"goodList\" :total=\"totalPrice\" :user-data=\"curUser\" @print=\"saveOrder('2')\"></viPrint>\r\n        </div>\r\n      </div>\r\n      <add-good-modal v-model=\"showGoodModal\" showCount @save=\"saveGood\"></add-good-modal>\r\n    </template>\r\n  </viLayoutUpDown>\r\n</template>\r\n\r\n<script>\r\nimport { Table } from \"view-ui-plus\";\r\nimport elementResizeDetector from \"element-resize-detector\";\r\nimport { getAllGoods, getAllUsers, printOrder, saveOrder, saveUsers, verifyUsers } from \"@/axios\";\r\nimport { viPrint } from \"@/components\";\r\nimport addGoodModal from \"@/views/goodMng/addGoodModal\";\r\nimport { IS_BULK } from \"@/constant\";\r\n\r\nexport default {\r\n  name: \"cashierMng\",\r\n  components: { Table, viPrint, addGoodModal },\r\n  data() {\r\n    return {\r\n      erd: null,\r\n      allGoods: [],\r\n      allUsers: [],\r\n      curGoodId: \"\",\r\n      curUserId: \"\",\r\n      curOrderId: \"\",\r\n      goodList: [],\r\n      height: 0,\r\n      columns: [\r\n        { title: \"序号\", type: \"index\", align: \"center\", width: 80 },\r\n        { title: \"名称\", key: \"name\", align: \"center\", minWidth: 150 },\r\n        { title: \"规格\", slot: \"standard\", align: \"center\", width: 120 },\r\n        { title: \"单位\", slot: \"unit\", align: \"center\", width: 100 },\r\n        { title: \"数量\", slot: \"count\", align: \"center\", width: 100 },\r\n        { title: \"单价\", slot: \"price\", align: \"center\", width: 200 },\r\n        { title: \"是否散装\", slot: \"isBulk\", align: \"center\", width: 100 },\r\n        { title: \"备注\", slot: \"remarks\", align: \"center\", width: 200 },\r\n        { title: \"操作\", slot: \"operate\", align: \"center\", width: 100 },\r\n      ],\r\n      totalPrice: \"0.00\",\r\n      showGoodModal: false,\r\n      printLoading: false,\r\n      saveLoading: false,\r\n      newUserName: \"\",\r\n      newUserLoading: false,\r\n    };\r\n  },\r\n  watch: {\r\n    goodList: {\r\n      deep: true,\r\n      handler(list) {\r\n        this.totalPrice = (\r\n          list.reduce((pre, next) => pre + +(next.count * next.price).toFixed(2), 0) || 0\r\n        ).toFixed(2);\r\n      }\r\n    },\r\n    $route: {\r\n      deep: true,\r\n      immediate: true,\r\n      handler({ name }) {\r\n        if (name !== \"cashierMng\") return;\r\n        const { params = {} } = history.state;\r\n        if (!Object.keys(params).length) return;\r\n        if (this.goodList.length) {\r\n          this.$Modal.confirm({\r\n            title: \"编辑确认\",\r\n            content: \"页面存在草稿数据，是否删除草稿，显示订单内容\",\r\n            onOk: () => {\r\n              this.initData(params);\r\n            },\r\n          });\r\n        } else {\r\n          this.initData(params);\r\n        }\r\n      }\r\n    },\r\n    curUserId(curUserId) {\r\n      this.changeUser(curUserId);\r\n    },\r\n  },\r\n  computed: {\r\n    curUser() {\r\n      return this.allUsers.find((item) => item.userId == this.curUserId) || {};\r\n    },\r\n    curGood() {\r\n      const good = this.allGoods.find((item) => item.goodId == this.curGoodId) || {};\r\n      good.count = 1;\r\n      return good;\r\n    },\r\n  },\r\n  methods: {\r\n    initData(params) {\r\n      this.curUserId = params.userId ? +params.userId : \"\";\r\n      this.curOrderId = params.orderId || \"\";\r\n      this.$nextTick(() => { // curUserId修改会触发goodList赋值\r\n        this.goodList = JSON.parse(params.goodList || \"[]\")\r\n          .map((item) => {\r\n            if (params.type === \"copy\") {\r\n              item.price = item.originPrice; // 只是复制订单，没有选择客户，所以没有特价\r\n            }\r\n            return item;\r\n          });\r\n        // 清空历史，防止残留\r\n        history.state.params = {};\r\n      });\r\n    },\r\n    async printOrder() {\r\n      try {\r\n        this.printLoading = true;\r\n        const { returnCode, data } = await printOrder({\r\n          list: this.goodList,\r\n          total: this.totalPrice,\r\n        }) || {};\r\n        if (returnCode === 0 && data) {\r\n          this.$Message.success(\"打印成功\");\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`打印失败：${err.message || err}`);\r\n      } finally {\r\n        this.printLoading = false;\r\n      }\r\n    },\r\n    deleteOrderId() {\r\n      this.$Modal.confirm({\r\n        title: \"重建订单\",\r\n        content: \"是否确认重建订单？\",\r\n        onOk: () => {\r\n          this.curOrderId = \"\";\r\n        },\r\n      });\r\n    },\r\n    clearAll(bool) {\r\n      if (bool) {\r\n        this.goodList = [];\r\n        this.curGoodId = \"\";\r\n      } else {\r\n        this.$Modal.confirm({\r\n          title: \"清空商品\",\r\n          content: \"是否确认清空所有商品？\",\r\n          onOk: () => {\r\n            this.goodList = [];\r\n            this.curGoodId = \"\";\r\n          },\r\n        });\r\n      }\r\n    },\r\n    selectGood() {\r\n      this.$nextTick(() => {\r\n        this.$refs.count.focus();\r\n      });\r\n    },\r\n    confirmAdd() {\r\n      if (!this.curGood.count) return this.$Message.info(\"请输入商品数量\");\r\n      const index = this.goodList.findIndex((item) => item.goodId === this.curGood.goodId);\r\n      if (index === -1) {\r\n        this.goodList.unshift({ ...this.curGood });\r\n      } else {\r\n        this.goodList[index].count += this.curGood.count;\r\n      }\r\n      this.curGoodId = \"\";\r\n    },\r\n    deleteGood(index) {\r\n      this.$Modal.confirm({\r\n        title: \"移除商品\",\r\n        content: \"是否确认移除该商品？\",\r\n        onOk: () => {\r\n          this.goodList.splice(index, 1);\r\n        },\r\n      });\r\n    },\r\n    async saveOrder(status) {\r\n      if (status == \"1\" && !this.curUserId) {\r\n        return this.$Message.info(\"请填写客户名称\");\r\n      } else if (status == \"2\" && !this.curUserId) {\r\n        return;\r\n      }\r\n      try {\r\n        this.saveLoading = true;\r\n        const { returnCode, data } = await saveOrder({\r\n          orderId: this.curOrderId || undefined,\r\n          userId: this.curUserId,\r\n          status, // 1草稿，2结算\r\n          total: this.totalPrice,\r\n          detail: JSON.stringify(this.goodList),\r\n        }) || {};\r\n        if (returnCode === 0 && data) {\r\n          this.$Message.success(\"保存成功\");\r\n          this.$EventBus.$emit(\"saveOrder\");\r\n          this.clearAll(true);\r\n          this.curUserId = \"\";\r\n          this.curOrderId = \"\";\r\n          this.getUsersList(); // 刷新用户特价\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`保存草稿失败：${err.message || err}`);\r\n      } finally {\r\n        this.saveLoading = false;\r\n      }\r\n    },\r\n    changeUser() {\r\n      const { special = {} } = this.curUser;\r\n      this.allGoods = this.allGoods.map((item) => {\r\n        // 规格、单位没改过才用特价\r\n        if (item.unit === item.originUnit && item.standard === item.originStandard) {\r\n          item.price = special[item.goodId] || item.originPrice; // 没有的用原价\r\n        } else {\r\n          item.price = item.originPrice; // 没有的用原价\r\n        }\r\n        return item;\r\n      });\r\n      this.goodList = this.goodList.map((item) => {\r\n        // 规格、单位没改过才用特价\r\n        if (item.unit === item.originUnit && item.standard === item.originStandard) {\r\n          item.price = special[item.goodId] || item.originPrice; // 没有的用原价\r\n        } else {\r\n          item.price = item.originPrice; // 没有的用原价\r\n        }\r\n        return item;\r\n      });\r\n    },\r\n    async confirmAddUser() {\r\n      if (!this.newUserName) {\r\n        this.$Message.info(\"请输入要新增的客户名称\");\r\n        return;\r\n      }\r\n      try {\r\n        this.newUserLoading = true;\r\n        const { data: userData } = await verifyUsers({\r\n          name: this.newUserName,\r\n        }) || {};\r\n        if (userData) {\r\n          this.$Message.error(\"该客户名称已存在\");\r\n          this.curUserId = userData.userId;\r\n          this.newUserName = \"\";\r\n          return;\r\n        }\r\n        const { data } = await saveUsers({ name: this.newUserName }) || {};\r\n        if (data) {\r\n          this.$Message.success(\"新增成功\");\r\n          this.curUserId = data.userId;\r\n          this.newUserName = \"\";\r\n          this.getUsersList();\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`新增客户失败：${err.message || err}`);\r\n      } finally {\r\n        this.newUserLoading = false;\r\n      }\r\n    },\r\n    saveGood(data) {\r\n      this.goodList.unshift({ ...data });\r\n      this.getGoodsList();\r\n    },\r\n    async getGoodsList() {\r\n      try {\r\n        const { returnCode, data } = await getAllGoods() || {};\r\n        if (returnCode === 0) {\r\n          this.allGoods = data && data.map((item) => {\r\n            item.originPrice = item.price || 0; // 保存原价\r\n            item.unit = item.unit || \"\";\r\n            item.originUnit = item.unit || \"\"; // 保存原单位\r\n            item.standard = item.standard || \"\";\r\n            item.originStandard = item.standard || \"\"; // 保存原规格\r\n            item.isBulk = IS_BULK(item); // 是否散装\r\n            item.originIsBulk = IS_BULK(item); // 保存种类\r\n            return item;\r\n          }) || [];\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`获取商品字典失败：${err.message || err}`);\r\n      }\r\n    },\r\n    async getUsersList() {\r\n      try {\r\n        const { returnCode, data } = await getAllUsers() || {};\r\n        if (returnCode === 0) {\r\n          this.allUsers = data && data.map((item) => {\r\n            const special = {};\r\n            item.special.forEach((i) => {\r\n              special[i.goodId] = +i.price;\r\n            });\r\n            item.special = special;\r\n            return item;\r\n          }) || [];\r\n          if (this.curUserId) {\r\n            const user = data.find((item) => item.userId === this.curUserId) || {};\r\n            this.$refs.user.values = [{ value: this.curUserId, label: user.name, tag: null }];\r\n          }\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`获取客户列表失败：${err.message || err}`);\r\n      }\r\n    },\r\n    // 放在mounted中获取不到元素\r\n    addErd() {\r\n      this.erd = elementResizeDetector();\r\n      this.erd.listenTo(this.$refs.table, () => {\r\n        this.height = this.$refs.table.offsetHeight;\r\n      });\r\n    },\r\n  },\r\n  activated() {\r\n    this.getGoodsList();\r\n    this.getUsersList();\r\n  },\r\n  beforeUnmount() {\r\n    this.erd.uninstall(this.$refs.table);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.header {\r\n  padding: 10px 12px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.good-box {\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  height: 50px;\r\n  .no-data {\r\n    text-align: center;\r\n    color: #c5c8ce;\r\n  }\r\n  .search-wrapper {\r\n    flex: 1;\r\n    overflow: hidden;\r\n  }\r\n  .search-box {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    margin-left: 15px;\r\n  }\r\n  .search-msg {\r\n    width: calc(100% - 250px);\r\n    margin-right: 10px;\r\n    & > b {\r\n      display: inline-block;\r\n      width: 100%;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n    }\r\n  }\r\n  .search-input {\r\n    flex: none;\r\n    width: 250px;\r\n    & > div {\r\n      width: 100px;\r\n    }\r\n  }\r\n}\r\n.table-box {\r\n  height: calc(100% - 60px);\r\n}\r\n.origin {\r\n  color: #CCCCCC;\r\n  text-decoration: line-through;\r\n  text-align: left;\r\n  flex: none;\r\n}\r\n.page-footer {\r\n  margin: 0 20px;\r\n  height: 50px;\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=6f01656a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=6f01656a&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\goodCashier\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f01656a\"]])\n\nexport default __exports__"],"sourceRoot":""}