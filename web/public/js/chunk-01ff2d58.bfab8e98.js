(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01ff2d58"],{"10c1":function(e,t,a){},"131b":function(e,t,a){"use strict";a("5dbe")},"51d9":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("aad9"),o=a("3e47"),n=a("eeb9"),r=a("2af9"),d=(a("14d9"),a("6605"));const i={class:"detail-container"},u={class:"card-list"},s={class:"title"},b={class:"card-bottom"},O={key:0,class:"price origin"},j={class:"price"},m={key:1,class:"ml-5"},p={key:2,class:"standard"},v={class:"count"},f={class:"f-20"},V={class:"total"};var N={__name:"orderDetailModal",props:{modelValue:{type:Boolean,default:!1},detailData:{type:Object,default(){return{}}}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,l=Object(d["d"])(),o=Object(c["inject"])("$Message",()=>{}),r=Object(c["inject"])("$Modal",()=>{}),N=Object(c["computed"])({get(){return a.modelValue},set(e){t("update:modelValue",e)}});function C(){r.confirm({title:"删除订单",content:"是否确认删除所选订单？",onOk:async()=>{try{const{returnCode:e,data:t}=await Object(n["g"])({orderIds:""+a.detailData.orderId})||{};0===e&&t&&(o.success("删除成功"),window.$EventBus.$emit("saveOrder"),N.value=!1)}catch(e){o.error("删除失败："+(e.message||e))}}})}function k(){N.value=!1,l.push({name:"mobileCashier",state:{params:{type:"change",userId:a.detailData.userId,userName:a.detailData.userName,goodList:a.detailData.detail,orderId:a.detailData.orderId}}})}function h(){N.value=!1,l.push({name:"mobileCashier",state:{params:{type:"copy",goodList:a.detailData.detail}}})}return(t,a)=>{const l=Object(c["resolveComponent"])("van-cell"),o=Object(c["resolveComponent"])("viEmpty"),n=Object(c["resolveComponent"])("Button"),r=Object(c["resolveComponent"])("viModal");return Object(c["openBlock"])(),Object(c["createBlock"])(r,{modelValue:N.value,"onUpdate:modelValue":a[0]||(a[0]=e=>N.value=e),title:"订单详情"},{footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("p",V,"总金额：￥"+Object(c["toDisplayString"])(e.detailData.total),1),Object(c["createVNode"])(n,{type:"primary",onClick:k},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("修改")]),_:1}),Object(c["createVNode"])(n,{type:"success",onClick:h},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("复制")]),_:1}),Object(c["createVNode"])(n,{type:"error",onClick:C},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("删除")]),_:1})]),default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{title:"订单编号",value:e.detailData.orderId,class:"flex-none"},null,8,["value"]),Object(c["createVNode"])(l,{title:"客户名称",value:e.detailData.userName,class:"flex-none"},null,8,["value"]),Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",u,[e.detailData.list.length?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:0})),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.detailData.list,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"card",key:t},[Object(c["createElementVNode"])("p",s,Object(c["toDisplayString"])(e.name),1),Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",null,[e.price!=e.originPrice&&e.unit==e.originUnit&&e.standard==e.originStandard?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",O,"￥"+Object(c["toDisplayString"])(e.originPrice&&e.originPrice.toFixed(2)),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",j,"￥"+Object(c["toDisplayString"])(e.price&&e.price.toFixed(2)),1),e.unit?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",m,"/ "+Object(c["toDisplayString"])(e.unit),1)):Object(c["createCommentVNode"])("",!0),e.standard?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p,Object(c["toDisplayString"])(e.standard),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("p",v,[Object(c["createTextVNode"])("X "),Object(c["createElementVNode"])("span",f,Object(c["toDisplayString"])(e.count),1)])])]))),128))])])]),_:1},8,["modelValue"])}}},C=(a("5901"),a("6b0d")),k=a.n(C);const h=k()(N,[["__scopeId","data-v-d54c9ade"]]);var y=h;const g=["onClick"],D={class:"title"},x={class:"f-16"},w={class:"f-16"},E={class:"f-16"};var B={__name:"mobile",props:{draftCount:{type:Number,default:void 0}},setup(e){const t=e,a=Object(d["c"])(),i=Object(c["ref"])();function u(){var e;null===(e=i.value)||void 0===e||e.reSearch()}Object(c["watch"])(()=>t.draftCount,()=>{u()});const s=Object(c["ref"])({}),b=Object(c["computed"])(()=>{var e,t;return!!(null!==(e=s.value.createTime)&&void 0!==e&&e.length||null!==(t=s.value.updateTime)&&void 0!==t&&t.length)}),O=Object(c["ref"])(""),j=Object(c["ref"])("1"),m=Object(c["ref"])([]),p=Object(c["ref"])([]),v=Object(c["ref"])(""),f=Object(c["ref"])("");function V(){p.value=[],m.value=[]}function N(){v.value="",f.value="",u()}function C(e){const{updateTime:t=[],createTime:a=[]}=s.value,[c,l]=t,[o,r]=a;return Object(n["s"])({...e,userId:v.value,userName:O.value,status:j.value,updateTimeStart:c&&c+" 00:00:00",updateTimeEnd:l&&l+" 23:59:59",createTimeStart:o&&o+" 00:00:00",createTimeEnd:r&&r+" 23:59:59"})}Object(c["watch"])(()=>a,({name:e})=>{if("mobileOrder"!==e)return;const{params:t={}}=history.state;Object.keys(t).length&&(v.value=t.userId,f.value=t.name,O.value="",j.value="2",V(),u(),history.state.params={})},{deep:!0,immediate:!0});const k=Object(c["ref"])(!1);function h(){p.value=s.value.updateTime||[],m.value=s.value.createTime||[],k.value=!0}function B(){s.value={updateTime:p.value,createTime:m.value},k.value=!1,u()}const _=Object(c["ref"])({}),T=Object(c["ref"])(!1);function S(e){_.value={...e,list:JSON.parse(e.detail||"[]"),total:e.total.toFixed(2)},T.value=!0}return Object(c["onActivated"])(()=>{u()}),(t,a)=>{const n=Object(c["resolveComponent"])("Icon"),d=Object(c["resolveComponent"])("van-cell"),s=Object(c["resolveComponent"])("van-search"),I=Object(c["resolveComponent"])("Button"),U=Object(c["resolveComponent"])("viModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{active:j.value,"onUpdate:active":a[0]||(a[0]=e=>j.value=e),onChange:u},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{title:"草稿",name:"1",badge:e.draftCount||void 0},null,8,["badge"]),Object(c["createVNode"])(Object(c["unref"])(o["a"]),{title:"已打印",name:"2"})]),_:1},8,["active"]),Object(c["createVNode"])(s,{modelValue:O.value,"onUpdate:modelValue":a[1]||(a[1]=e=>O.value=e),shape:"round",placeholder:"请输入客户名称搜索","show-action":"",onClear:u,onSearch:u,class:"search-input"},{action:Object(c["withCtx"])(()=>[v.value?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:0,title:"客户名称",value:f.value,class:"user-id-cell"},{"right-icon":Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{type:"md-close",size:"25",onClick:N,class:"vi-link-text ml-10"})]),_:1},8,["value"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(n,{type:b.value?"ios-funnel":"ios-funnel-outline",size:"24",color:b.value?"#2d8cf0":"#555",onClick:h},null,8,["type","color"])]),_:1},8,["modelValue"]),Object(c["createVNode"])(U,{modelValue:k.value,"onUpdate:modelValue":a[4]||(a[4]=e=>k.value=e),title:"更多检索条件"},{footer:Object(c["withCtx"])(()=>[Object(c["createVNode"])(I,{onClick:V},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("重置")]),_:1}),Object(c["createVNode"])(I,{type:"primary",onClick:B},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("检索")]),_:1})]),default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(r["a"]),{modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=e=>p.value=e),title:"修改时间"},null,8,["modelValue"]),Object(c["createVNode"])(Object(c["unref"])(r["a"]),{modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=e=>m.value=e),title:"创建时间"},null,8,["modelValue"])]),_:1},8,["modelValue"]),Object(c["createVNode"])(Object(c["unref"])(r["h"]),{ref_key:"listRef",ref:i,getData:C,class:"container"},{default:Object(c["withCtx"])(({item:e})=>[Object(c["createElementVNode"])("div",{class:"card",onClick:t=>S(e)},[Object(c["createElementVNode"])("p",D,"订单编号："+Object(c["toDisplayString"])(e.orderId),1),Object(c["createElementVNode"])("p",x,"客户名称："+Object(c["toDisplayString"])(e.userName),1),Object(c["createElementVNode"])("p",w,"总 金 额 ：￥"+Object(c["toDisplayString"])(e.total&&e.total.toFixed(2)),1),Object(c["createElementVNode"])("p",E,"修改时间："+Object(c["toDisplayString"])(e.updateTime),1)],8,g)]),_:1},512),Object(c["createVNode"])(Object(c["unref"])(y),{modelValue:T.value,"onUpdate:modelValue":a[5]||(a[5]=e=>T.value=e),detailData:_.value},null,8,["modelValue","detailData"])])}}};a("131b");const _=k()(B,[["__scopeId","data-v-d361df0c"]]);t["default"]=_},5901:function(e,t,a){"use strict";a("10c1")},"5dbe":function(e,t,a){}}]);