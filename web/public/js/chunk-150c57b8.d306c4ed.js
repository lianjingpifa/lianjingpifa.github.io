(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-150c57b8"],{"13d5":function(e,t,o){"use strict";var n=o("23e7"),c=o("d58f").left,a=o("a640"),i=o("2d00"),r=o("605d"),s=!r&&i>79&&i<83,u=s||!a("reduce");n({target:"Array",proto:!0,forced:u},{reduce:function(e){var t=arguments.length;return c(this,e,t,t>1?arguments[1]:void 0)}})},4183:function(e,t,o){"use strict";o.r(t);var n=o("7a23");const c={class:"mobileHome"},a={class:"home-header"},i={class:"home-footer"},r=["onClick"];function s(e,t,o,s,u,l){const d=Object(n["resolveComponent"])("Icon"),b=Object(n["resolveComponent"])("router-view"),m=Object(n["resolveComponent"])("Badge");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createElementVNode"])("div",a,[l.isHome?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,type:"ios-arrow-back",size:"25",onClick:t[0]||(t[0]=t=>e.$router.back()),class:"vi-header-icon left"})),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(u.routeName)+Object(n["toDisplayString"])("number"==typeof u.total[u.activeMenu]?`（${u.total[u.activeMenu]}）`:""),1)]),Object(n["createVNode"])(b,{class:"home-container"},{default:Object(n["withCtx"])(({Component:e})=>[(Object(n["openBlock"])(),Object(n["createBlock"])(n["KeepAlive"],null,[(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e),{draftCount:u.badge[u.activeMenu],onTotal:t[1]||(t[1]=e=>u.total[u.activeMenu]=e)},null,40,["draftCount"]))],1024))]),_:1}),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",i,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(u.routeList,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t,class:Object(n["normalizeClass"])(["menu-item",{active:u.activeMenu===e.name}]),onClick:t=>l.toPath(e)},[Object(n["createVNode"])(m,{count:u.badge[e.name]||0,"overflow-count":"99",class:"menu-badge"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{type:e.icon},null,8,["type"])]),_:2},1032,["count"]),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.title),1)],10,r))),128))],512),[[n["vShow"],l.isHome]])])}o("14d9"),o("13d5");var u=o("eeb9"),l={name:"mobileHome",data(){return{routeName:"",activeMenu:this.$route.name,routeList:[{title:"商品",name:"mobileGood",icon:"ios-home-outline"},{title:"结账",name:"mobileCashier",icon:"ios-cart-outline"},{title:"订单",name:"mobileOrder",icon:"ios-clipboard-outline"},{title:"客户",name:"mobileUser",icon:"ios-contacts-outline"},{title:"我的",name:"mobileMy",icon:"ios-person-outline"}],badge:{},total:{}}},watch:{$route:{deep:!0,immediate:!0,handler({name:e}){this.activeMenu=e;const t=this.routeList.find(t=>t.name===e)||{};this.routeName=t.title||this.$route.meta.title||this.routeList[0].title}}},computed:{isHome(){return!!this.routeList.find(e=>e.name===this.activeMenu)}},methods:{toPath({name:e}){this.$router.push({name:e})},changeBadge(e){this.badge={...this.badge,...e}},async getDraftCount(){try{const{returnCode:e,data:t}=await Object(u["q"])()||{};0===e&&(this.badge.mobileOrder=t||0)}catch(e){this.$Message.error("获取草稿数量失败："+(e.message||e))}},async getAuditUserCount(){try{const{returnCode:e,data:t}=await Object(u["p"])()||{};0===e&&(this.badge.mobileUser=t||0)}catch(e){this.$Message.error("获取待审批数量失败："+(e.message||e))}}},mounted(){const e=JSON.parse(sessionStorage.getItem("order")||"[]");this.badge={mobileCashier:e.reduce((e,t)=>e+ +t.count,0)},this.getDraftCount(),this.getAuditUserCount(),this.$EventBus.$on("badge",this.changeBadge),this.$EventBus.$on("saveOrder",this.getDraftCount)},beforeUnmount(){this.$EventBus.$off("badge",this.changeBadge),this.$EventBus.$off("saveOrder",this.getDraftCount)}},d=(o("8c2a"),o("6b0d")),b=o.n(d);const m=b()(l,[["render",s],["__scopeId","data-v-61050d18"]]);t["default"]=m},"605d":function(e,t,o){"use strict";var n=o("da84"),c=o("c6b6");e.exports="process"===c(n.process)},"8c2a":function(e,t,o){"use strict";o("cc92")},a640:function(e,t,o){"use strict";var n=o("d039");e.exports=function(e,t){var o=[][e];return!!o&&n((function(){o.call(null,t||function(){return 1},1)}))}},cc92:function(e,t,o){},d58f:function(e,t,o){"use strict";var n=o("59ed"),c=o("7b0b"),a=o("44ad"),i=o("07fa"),r=TypeError,s=function(e){return function(t,o,s,u){n(o);var l=c(t),d=a(l),b=i(l),m=e?b-1:0,h=e?-1:1;if(s<2)while(1){if(m in d){u=d[m],m+=h;break}if(m+=h,e?m<0:b<=m)throw r("Reduce of empty array with no initial value")}for(;e?m>=0:b>m;m+=h)m in d&&(u=o(u,d[m],m,l));return u}};e.exports={left:s(!1),right:s(!0)}}}]);