(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-073c4a9a"],{2974:function(e,t,a){"use strict";a("6364")},6364:function(e,t,a){},a20b:function(e,t,a){"use strict";a.r(t);a("14d9");var c=a("7a23"),l=a("aad9"),n=a("3e47"),o=a("df7b"),r=a("b351"),u=a("eeb9"),d=a("2af9"),s=a("c64b"),i=a("b046"),b=a("31fd"),O=a("ff79"),j=a("4360"),m=a("6605");const v={class:"container"},p=["onClick"],f={class:"card-top"},V={class:"remarks"},k={key:0,class:"remarks"},h={key:1,class:"h100"};var g={__name:"index",props:{draftCount:{type:Number,default:void 0}},emits:["total"],setup(e,{emit:t}){const a=e,g=Object(j["a"])(),y=Object(c["computed"])(()=>g.dictMap),C=Object(m["d"])(),N=Object(c["inject"])("$Message",()=>{}),w=Object(c["inject"])("$Modal",()=>{}),B=Object(c["ref"])(),S=Object(c["ref"])(),U=Object(c["ref"])(!1);function x(){var e;U.value?B.value.getUsersList():null===(e=S.value)||void 0===e||e.reSearch()}Object(c["watch"])(()=>a.draftCount,()=>x());const D=Object(c["ref"])({}),E=Object(c["computed"])(()=>[{name:"删除",type:"delete",color:"#f66161"},..."2"==D.value.status?[{name:"审批",type:"audit",color:"#07c160"}]:[{name:"特价",type:"special",color:"#07c160"},{name:"历史订单",type:"order",color:"#2d8cf0"},...D.value.longitude&&D.value.latitude?[{name:"定位",type:"location",color:"#07c160"}]:[],{name:"修改",type:"change"}]]),_=Object(c["ref"])("2"),I=Object(c["ref"])(""),M=Object(c["ref"])("");function A(e){const t=["",...y.value.user.map(e=>e.id),"其他"];return Object(u["y"])({...e,name:M.value,status:_.value,label:t[I.value]})}function P({userId:e,name:t}){w.confirm({title:"删除客户",content:`是否确认删除${t}？`,onOk:async()=>{try{const{returnCode:t,data:a}=await Object(u["i"])({userIds:""+e})||{};0===t&&a&&(N.success("删除成功"),x())}catch(t){N.error("删除失败："+(t.message||t))}}})}const R=Object(c["ref"])(!1);function $(e){D.value={...e},R.value=!0}const z=Object(c["ref"])(!1),F=Object(c["ref"])(!1),J=Object(c["ref"])(!1);function L(e,t=D.value){"change"===e?(D.value={...t},z.value=!0):"special"===e?C.push({name:"mobileSpecial",state:{params:{userId:t.userId,name:t.name}}}):"order"===e?C.push({name:"mobileOrder",state:{params:{userId:t.userId,name:t.name}}}):"delete"===e?P(t):"location"===e?F.value=!0:"audit"===e&&(J.value=!0)}return(a,u)=>{const j=Object(c["resolveComponent"])("Icon"),m=Object(c["resolveComponent"])("van-search"),g=Object(c["resolveComponent"])("van-action-sheet");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(j,{type:U.value?"ios-list":"ios-pin-outline",size:"32",onClick:u[0]||(u[0]=e=>U.value=!U.value),class:"vi-header-icon left"},null,8,["type"]),Object(c["createVNode"])(j,{type:"ios-person-add-outline",size:"34",onClick:u[1]||(u[1]=e=>L("change",{})),class:"vi-header-icon right"}),U.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",h,[Object(c["createVNode"])(Object(c["unref"])(b["a"]),{ref_key:"userMapRef",ref:B,onChangeUser:u[6]||(u[6]=e=>L("change",e)),onDeleteUser:u[7]||(u[7]=e=>L("delete",e)),onOpenHistoryOrder:u[8]||(u[8]=e=>L("order",e)),onOpenSpecialMng:u[9]||(u[9]=e=>L("special",e)),onClose:u[10]||(u[10]=e=>U.value=!1)},null,512)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{active:_.value,"onUpdate:active":u[2]||(u[2]=e=>_.value=e),onChange:x},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(n["a"]),{title:"用户审批",name:"2",badge:e.draftCount||void 0},null,8,["badge"]),Object(c["createVNode"])(Object(c["unref"])(n["a"]),{title:"用户管理",name:"1,3"})]),_:1},8,["active"]),Object(c["createVNode"])(m,{modelValue:M.value,"onUpdate:modelValue":u[3]||(u[3]=e=>M.value=e),shape:"round",placeholder:"请输入客户名称搜索",onClear:x,onSearch:x,class:"search-input"},null,8,["modelValue"]),Object(c["createElementVNode"])("div",v,["2"!=_.value?(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(o["a"]),{key:0,modelValue:I.value,"onUpdate:modelValue":u[4]||(u[4]=e=>I.value=e),onChange:x,class:"sidebar"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(r["a"]),{title:"全部"}),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(y.value.user,(e,t)=>(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["unref"])(r["a"]),{key:t,title:e.name},null,8,["title"]))),128)),Object(c["createVNode"])(Object(c["unref"])(r["a"]),{title:"其他"})]),_:1},8,["modelValue"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(Object(c["unref"])(d["g"]),{ref_key:"listRef",ref:S,getData:A,onOnUpdate:u[5]||(u[5]=e=>t("total",e.total)),class:"flex-1 h100"},{default:Object(c["withCtx"])(({item:e})=>[Object(c["createElementVNode"])("div",{class:"card",onClick:t=>$(e)},[Object(c["createElementVNode"])("p",f,Object(c["toDisplayString"])("2"==e.status?e.nickName:e.name),1),Object(c["createElementVNode"])("p",V,"联系电话："+Object(c["toDisplayString"])(e.phone||"无"),1),"2"==_.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",k,"备注："+Object(c["toDisplayString"])(e.remarks||"无"),1)):Object(c["createCommentVNode"])("",!0)],8,p)]),_:1},512)])],64)),Object(c["createVNode"])(Object(c["unref"])(s["a"]),{modelValue:z.value,"onUpdate:modelValue":u[11]||(u[11]=e=>z.value=e),detailData:D.value,onSave:x},null,8,["modelValue","detailData"]),Object(c["createVNode"])(Object(c["unref"])(i["a"]),{modelValue:F.value,"onUpdate:modelValue":u[12]||(u[12]=e=>F.value=e),curRow:D.value},null,8,["modelValue","curRow"]),Object(c["createVNode"])(Object(c["unref"])(O["a"]),{modelValue:J.value,"onUpdate:modelValue":u[13]||(u[13]=e=>J.value=e),detailData:D.value,onSave:x},null,8,["modelValue","detailData"]),Object(c["createVNode"])(g,{show:R.value,"onUpdate:show":u[14]||(u[14]=e=>R.value=e),title:D.value.name,actions:E.value,"cancel-text":"取消","close-on-click-action":"",onSelect:u[15]||(u[15]=e=>L(e.type))},null,8,["show","title","actions"])])}}},y=(a("2974"),a("6b0d")),C=a.n(y);const N=C()(g,[["__scopeId","data-v-4789d40d"]]);t["default"]=N},a68d:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return i}));var c=a("7a23"),l=a("1fba"),n=a("e5f6"),o=a("450f");const[r,u]=Object(l["a"])("sidebar"),d=Symbol(r),s={modelValue:Object(n["c"])(0)};var i=Object(c["defineComponent"])({name:r,props:s,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const{linkChildren:l}=Object(o["useChildren"])(d),n=()=>+e.modelValue,r=e=>{e!==n()&&(t("update:modelValue",e),t("change",e))};return l({getActive:n,setActive:r}),()=>{var e;return Object(c["createVNode"])("div",{role:"tablist",class:u()},[null==(e=a.default)?void 0:e.call(a)])}}})},b351:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var c=a("23f9"),l=a("7a23"),n=a("1fba"),o=a("fa7c"),r=a("e5f6"),u=a("a68d"),d=a("450f"),s=a("4e5e"),i=a("8be7");const[b,O]=Object(n["a"])("sidebar-item"),j=Object(o["a"])({},s["b"],{dot:Boolean,title:String,badge:r["f"],disabled:Boolean,badgeProps:Object});var m=Object(l["defineComponent"])({name:b,props:j,emits:["click"],setup(e,{emit:t,slots:a}){const c=Object(s["c"])(),{parent:n,index:o}=Object(d["useParent"])(u["a"]);if(!n)return void 0;const r=()=>{e.disabled||(t("click",o.value),n.setActive(o.value),c())};return()=>{const{dot:t,badge:c,title:u,disabled:d}=e,s=o.value===n.getActive();return Object(l["createVNode"])("div",{role:"tab",class:O({select:s,disabled:d}),tabindex:d?void 0:0,"aria-selected":s,onClick:r},[Object(l["createVNode"])(i["a"],Object(l["mergeProps"])({dot:t,class:O("text"),content:c},e.badgeProps),{default:()=>[a.title?a.title():u]})])}}});const v=Object(c["a"])(m)},df7b:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var c=a("23f9"),l=a("a68d");const n=Object(c["a"])(l["b"])}}]);