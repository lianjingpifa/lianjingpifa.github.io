{"version":3,"sources":["webpack:///./node_modules/core-js/internals/delete-property-or-throw.js","webpack:///./src/viewsMobile/mobileCashier/userSelect.vue?b723","webpack:///./node_modules/core-js/modules/es.array.unshift.js","webpack:///./src/viewsMobile/mobileCashier/index.vue?f346","webpack:///./src/viewsMobile/mobileCashier/index.vue","webpack:///./src/viewsMobile/mobileCashier/userSelect.vue","webpack:///./src/viewsMobile/mobileCashier/userSelect.vue?5494","webpack:///./src/viewsMobile/mobileCashier/index.vue?828a","webpack:///./node_modules/vant/es/swipe-cell/SwipeCell.mjs","webpack:///./node_modules/vant/es/swipe-cell/index.mjs"],"names":["tryToString","$TypeError","TypeError","module","exports","O","P","$","toObject","lengthOfArrayLike","setArrayLength","deletePropertyOrThrow","doesNotExceedSafeInteger","INCORRECT_RESULT","unshift","properErrorOnNonWritableLength","Object","defineProperty","writable","error","FORCED","target","proto","arity","forced","item","this","len","argCount","arguments","length","k","to","j","class","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_Spin","fix","show","$data","saveLoading","curOrderId","_createBlock","_component_van_cell","title","value","right-icon","_withCtx","_component_Icon","type","size","onClick","$options","deleteOrderId","curUser","name","_cache","$event","showUserSelect","is-link","_component_userSelect","userId","curUserId","allUsers","_hoisted_2","goodList","_component_viEmpty","key","_Fragment","_renderList","index","_component_van_swipe_cell","right","_component_Button","changeCount","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","_component_viInputNumber","count","integer","min","onOnChange","_hoisted_6","price","originPrice","unit","originUnit","standard","originStandard","isBulk","originIsBulk","_hoisted_8","_hoisted_9","step","_hoisted_10","_component_viInput","placeholder","_hoisted_11","_component_van_field","remarks","label","label-width","clearable","_component_van_radio_group","model-value","_component_van_radio","_hoisted_12","_hoisted_13","totalPrice","_hoisted_14","clearAll","long","shape","saveOrder","_component_viPrint","list","total","user-data","onPrint","_component_van_action_sheet","showModal","newUserLoading","newUserName","color","confirmAddUser","filterName","filterUsers","clickable","selectUser","components","Field","props","modelValue","Boolean","default","Array","Number","String","data","computed","get","set","val","$emit","filter","includes","methods","user","userData","verifyUsers","$Message","success","saveUsers","err","message","info","__exports__","SwipeCell","viPrint","userSelect","watch","deep","handler","reduce","pre","next","toFixed","$EventBus","mobileCashier","sessionStorage","setItem","JSON","stringify","$route","immediate","params","history","state","keys","$Modal","confirm","content","onOk","initData","changeUser","find","orderId","$nextTick","parse","map","bool","findIndex","goodId","splice","onCancel","status","returnCode","undefined","detail","getUsersList","special","getAllUsers","forEach","i","activated","getItem","render","bem","create","swipeCellProps","disabled","leftWidth","rightWidth","beforeClose","Function","stopPropagation","stdin_default","emits","emit","slots","opened","lockClick","startOffset","isInBeforeClosing","root","leftRef","rightRef","offset","dragging","touch","getWidthByRef","ref2","width","open","side","position","close","toggle","Math","abs","THRESHOLD","threshold","onTouchStart","event","start","onTouchMove","deltaX","move","isHorizontal","isEdge","onTouchEnd","setTimeout","args","done","canceled","getClickHandler","stop","renderSideContent","contentSlot","eventName","_a","wrapperStyle","transform","transitionDuration","call"],"mappings":"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","file":"public/js/chunk-362b8313.8c8a41f5.js","sourcesContent":["'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./userSelect.vue?vue&type=style&index=0&id=0171d196&lang=less&scoped=true\"","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_RESULT || !properErrorOnNonWritableLength();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=3159b0a8&lang=less&scoped=true\"","<!--\r\n * @Author: zzx\r\n * @Date: 2023-11-06 20:57:43\r\n * @LastEditors: zzx\r\n * @LastEditTime: 2023-12-17 17:25:28\r\n-->\r\n<template>\r\n  <div class=\"container\">\r\n    <Spin fix :show=\"saveLoading\"></Spin>\r\n    <van-cell title=\"订单编号\" :value=\"curOrderId\" v-if=\"curOrderId\" class=\"flex-none\">\r\n      <template #right-icon>\r\n        <Icon type=\"md-close\" size=\"25\" @click=\"deleteOrderId\" class=\"vi-link-text ml-10\" />\r\n      </template>\r\n    </van-cell>\r\n    <van-cell title=\"客户名称\" :value=\"curUser.name\" @click=\"showUserSelect = true\" is-link class=\"user-select\" />\r\n    <userSelect\r\n      v-model=\"showUserSelect\"\r\n      v-model:userId=\"curUserId\"\r\n      :allUsers=\"allUsers\"\r\n    ></userSelect>\r\n    <div class=\"list\">\r\n      <viEmpty v-if=\"!goodList.length\"></viEmpty>\r\n      <van-swipe-cell v-for=\"(item, index) in goodList\" :key=\"index\">\r\n        <div class=\"card\">\r\n          <div class=\"card-top\">\r\n            <p class=\"title\">{{ item.name }}</p>\r\n            <viInputNumber\r\n              v-model=\"item.count\"\r\n              integer\r\n              :min=\"0\"\r\n              @on-change=\"changeCount(item, $event)\"\r\n              class=\"count-input\"\r\n            ></viInputNumber>\r\n          </div>\r\n          <div class=\"card-middle\">\r\n            <p\r\n              v-if=\"\r\n                item.price != item.originPrice &&\r\n                  item.unit == item.originUnit &&\r\n                    item.standard == item.originStandard &&\r\n                      item.isBulk == item.originIsBulk\r\n              \"\r\n              @click=\"item.price = item.originPrice\"\r\n              class=\"origin\"\r\n            >￥ <span>{{ item.originPrice }}</span></p>\r\n            <div class=\"flex-ac\">\r\n              <label class=\"f-16 mr-5\">￥</label>\r\n              <viInputNumber v-model=\"item.price\" :min=\"0\" :step=\"0.5\" class=\"count-input\"></viInputNumber>\r\n              <label class=\"f-16 ml-10 mr-10\"> / </label>\r\n              <viInput v-model=\"item.unit\" placeholder=\"单位\" class=\"flex-1\"></viInput>\r\n              <viInput v-model=\"item.standard\" placeholder=\"规格\" class=\"flex-1 ml-10\"></viInput>\r\n            </div>\r\n          </div>\r\n          <div class=\"flex-ac\">\r\n            <van-field v-model=\"item.remarks\" label=\"备注：\" label-width=\"50\" clearable placeholder=\"备注，有就填\" />\r\n            <van-radio-group :model-value=\"item.isBulk\" class=\"flex-none\">\r\n              <van-radio :name=\"true\" @click=\"item.isBulk = !item.isBulk\">散装</van-radio>\r\n            </van-radio-group>\r\n          </div>\r\n        </div>\r\n        <template #right>\r\n          <Button type=\"error\" @click=\"changeCount(item, 0)\">删除</Button>\r\n        </template>\r\n      </van-swipe-cell>\r\n    </div>\r\n    <div class=\"bottom-box\">\r\n      <p class=\"total\">总计：￥{{ totalPrice }}</p>\r\n      <div class=\"btn-box\">\r\n        <Button type=\"error\" @click=\"clearAll()\" long size=\"large\" shape=\"circle\">清空商品</Button>\r\n        <Button @click=\"saveOrder('1')\" long size=\"large\" shape=\"circle\" class=\"ml-10\">保存草稿</Button>\r\n        <viPrint\r\n          :list=\"goodList\"\r\n          :total=\"totalPrice\"\r\n          :user-data=\"curUser\"\r\n          size=\"large\"\r\n          long\r\n          shape=\"circle\"\r\n          @print=\"saveOrder('2')\"\r\n        ></viPrint>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Field, SwipeCell } from \"vant\";\r\nimport { viPrint } from \"@/components\";\r\nimport userSelect from \"./userSelect\";\r\nimport { getAllUsers, saveOrder } from \"@/axios\";\r\n\r\nexport default {\r\n  name: \"mobileCashier\",\r\n  components: {\r\n    [Field.name]: Field,\r\n    [SwipeCell.name]: SwipeCell,\r\n    viPrint,\r\n    userSelect,\r\n  },\r\n  data() {\r\n    return {\r\n      allUsers: [],\r\n      curUserId: \"\",\r\n      curOrderId: \"\",\r\n      goodList: [],\r\n      totalPrice: \"0.00\",\r\n      saveLoading: false,\r\n      showUserSelect: false,\r\n    };\r\n  },\r\n  watch: {\r\n    goodList: {\r\n      deep: true,\r\n      handler(list) {\r\n        this.totalPrice = (\r\n          list.reduce((pre, next) => pre + +(next.count * next.price).toFixed(2), 0) || 0\r\n        ).toFixed(2);\r\n        this.$EventBus.$emit(\"badge\", {\r\n          mobileCashier: list.reduce((pre, next) => pre + +next.count, 0),\r\n        });\r\n        sessionStorage.setItem(\"order\", JSON.stringify(list));\r\n      }\r\n    },\r\n    $route: {\r\n      deep: true,\r\n      immediate: true,\r\n      handler({ name }) {\r\n        if (name !== \"mobileCashier\") return;\r\n        const { params = {} } = history.state;\r\n        if (!Object.keys(params).length) return;\r\n        if (this.goodList.length) {\r\n          this.$Modal.confirm({\r\n            title: \"编辑确认\",\r\n            content: \"页面存在草稿数据，是否删除草稿，显示订单内容\",\r\n            onOk: () => {\r\n              this.initData(params);\r\n            },\r\n          });\r\n        } else {\r\n          this.initData(params);\r\n        }\r\n      }\r\n    },\r\n    curUserId(curUserId) {\r\n      this.changeUser(curUserId);\r\n    },\r\n  },\r\n  computed: {\r\n    curUser() {\r\n      return this.allUsers.find((item) => item.userId == this.curUserId) || {};\r\n    },\r\n  },\r\n  methods: {\r\n    initData(params) {\r\n      this.curUserId = params.userId ? +params.userId : \"\";\r\n      this.curOrderId = params.orderId || \"\";\r\n      this.$nextTick(() => { // curUserId修改会触发goodList赋值\r\n        this.goodList = JSON.parse(params.goodList || \"[]\")\r\n          .map((item) => {\r\n            if (params.type === \"copy\") {\r\n              item.price = item.originPrice; // 只是复制订单，没有选择客户，所以没有特价\r\n            }\r\n            return item;\r\n          });\r\n        // 清空历史，防止残留\r\n        history.state.params = {};\r\n      });\r\n    },\r\n    deleteOrderId() {\r\n      this.$Modal.confirm({\r\n        title: \"重建订单\",\r\n        content: \"是否确认重建订单？\",\r\n        onOk: () => {\r\n          this.curOrderId = \"\";\r\n        },\r\n      });\r\n    },\r\n    clearAll(bool) {\r\n      if (bool) {\r\n        this.goodList = [];\r\n      } else {\r\n        this.$Modal.confirm({\r\n          title: \"清空商品\",\r\n          content: \"是否确认清空所有商品？\",\r\n          onOk: () => {\r\n            this.goodList = [];\r\n          },\r\n        });\r\n      }\r\n    },\r\n    changeCount(data, count) {\r\n      const goodList = [...this.goodList];\r\n      const index = goodList.findIndex((item) => item.goodId === data.goodId);\r\n      if (count) {\r\n        if (index === -1) {\r\n          goodList.unshift({ ...data });\r\n        } else {\r\n          goodList.splice(index, 1, { ...data });\r\n        }\r\n        this.goodList = goodList;\r\n      } else if (index !== -1) {\r\n        this.$Modal.confirm({\r\n          title: \"删除商品\",\r\n          content: `确认删除${data.name}?`,\r\n          onOk: () => {\r\n            goodList.splice(index, 1);\r\n            this.goodList = goodList;\r\n          },\r\n          onCancel: () => {\r\n            this.goodList[index] = {\r\n              ...data,\r\n              count: ++count,\r\n            };\r\n          }\r\n        });\r\n      }\r\n    },\r\n    async saveOrder(status) {\r\n      if (status == \"1\" && !this.curUserId) {\r\n        return this.$Message.info(\"请填写客户名称\");\r\n      } else if (status == \"2\" && !this.curUserId) {\r\n        return;\r\n      }\r\n      try {\r\n        this.saveLoading = true;\r\n        const { returnCode, data } = await saveOrder({\r\n          orderId: this.curOrderId || undefined,\r\n          userId: this.curUserId,\r\n          status, // 1草稿，2结算\r\n          total: this.totalPrice,\r\n          detail: JSON.stringify(this.goodList),\r\n        }) || {};\r\n        if (returnCode === 0 && data) {\r\n          this.$Message.success(\"保存成功\");\r\n          this.$EventBus.$emit(\"saveOrder\");\r\n          this.clearAll(true);\r\n          this.curUserId = \"\";\r\n          this.curOrderId = \"\";\r\n          this.getUsersList(); // 刷新用户特价\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`保存草稿失败：${err.message || err}`);\r\n      } finally {\r\n        this.saveLoading = false;\r\n      }\r\n    },\r\n    changeUser() {\r\n      const { special = {} } = this.curUser;\r\n      this.goodList = this.goodList.map((item) => {\r\n        // 规格、单位没改过才用特价\r\n        if (item.unit === item.originUnit && item.standard === item.originStandard) {\r\n          item.price = special[item.goodId] || item.originPrice; // 没有的用原价\r\n        } else {\r\n          item.price = item.originPrice; // 没有的用原价\r\n        }\r\n        return item;\r\n      });\r\n    },\r\n    async getUsersList() {\r\n      try {\r\n        const { returnCode, data } = await getAllUsers() || {};\r\n        if (returnCode === 0) {\r\n          this.allUsers = data && data.map((item) => {\r\n            const special = {};\r\n            item.special.forEach((i) => {\r\n              special[i.goodId] = +i.price;\r\n            });\r\n            item.special = special;\r\n            return item;\r\n          }) || [];\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`获取客户列表失败：${err.message || err}`);\r\n      }\r\n    },\r\n  },\r\n  activated() {\r\n    this.goodList = JSON.parse(sessionStorage.getItem(\"order\") || \"[]\");\r\n    this.getUsersList();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  height: 100%;\r\n  background: #f7f8fa;\r\n  overflow: hidden;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.user-select {\r\n  flex: none;\r\n  :deep(.van-cell:after) {\r\n    border: none;\r\n  }\r\n}\r\n.list {\r\n  flex: 1;\r\n  margin: 10px 0;\r\n  padding: 0 10px;\r\n  overflow: auto;\r\n  position: relative;\r\n  & > div {\r\n    margin-top: 10px;\r\n    &:nth-child(1) {\r\n      margin-top: 0;\r\n    }\r\n  }\r\n  .card {\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding: 10px 10px 0;\r\n    background: #FFFFFF;\r\n    border-radius: 4px;\r\n    .count-input {\r\n      flex: none;\r\n      width: 120px;\r\n    }\r\n    &-top {\r\n      display: flex;\r\n      margin-bottom: 15px;\r\n      .title {\r\n        flex: 1;\r\n        padding-right: 10px;\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n        word-break: break-word;\r\n        line-height: 16px;\r\n      }\r\n    }\r\n    &-middle {\r\n      border-bottom: 1px solid var(--van-border-color);\r\n      padding-bottom: 10px;\r\n      position: relative;\r\n      .origin {\r\n        position: absolute;\r\n        top: -15px;\r\n        font-size: 16px;\r\n        color: #CCCCCC;\r\n        text-decoration: line-through;\r\n        line-height: 15px;\r\n      }\r\n    }\r\n  }\r\n}\r\n.bottom-box {\r\n  flex: none;\r\n  padding: 10px;\r\n  background: #FFFFFF;\r\n  border-radius: 4px 4px 0 0;\r\n  .total {\r\n    text-align: center;\r\n    font-weight: 600;\r\n    font-size: 16px;\r\n    margin-bottom: 10px;\r\n  }\r\n  .btn-box {\r\n    display: flex;\r\n    justify-content: space-around;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <van-action-sheet v-model:show=\"showModal\" title=\"选择客户\">\r\n    <Spin fix :show=\"newUserLoading\"></Spin>\r\n    <div class=\"flex-ac\">\r\n      <van-field v-model=\"newUserName\" label=\"没有？快速新增：\" label-width=\"120\" clearable placeholder=\"客户名称\" />\r\n      <Icon\r\n        type=\"ios-checkmark-circle-outline\"\r\n        color=\"green\"\r\n        size=\"30\"\r\n        class=\"mr-10\"\r\n        @click=\"confirmAddUser\"\r\n      />\r\n    </div>\r\n    <van-field v-model=\"filterName\" label=\"过滤客户：\" label-width=\"80\" clearable placeholder=\"客户名称\" />\r\n    <div class=\"user-list\">\r\n      <van-radio-group v-model=\"curUserId\">\r\n        <viEmpty v-if=\"!filterUsers.length\"></viEmpty>\r\n        <van-cell\r\n          v-for=\"(item) in filterUsers\"\r\n          :key=\"item.userId\"\r\n          :title=\"`${item.name}${item.remarks ? `（${item.remarks}）` : ''}`\"\r\n          clickable\r\n          @click=\"selectUser(item)\"\r\n        >\r\n          <template #right-icon>\r\n            <van-radio :name=\"item.userId\" />\r\n          </template>\r\n        </van-cell>\r\n      </van-radio-group>\r\n    </div>\r\n  </van-action-sheet>\r\n</template>\r\n\r\n<script>\r\nimport { Field } from \"vant\";\r\nimport { saveUsers, verifyUsers } from \"@/axios\";\r\n\r\nexport default {\r\n  name: \"userSelect\",\r\n  components: { [Field.name]: Field },\r\n  props: {\r\n    modelValue: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    allUsers: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    userId: {\r\n      type: [Number, String],\r\n      default: \"\",\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      filterName: \"\",\r\n      newUserName: \"\",\r\n      newUserLoading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    showModal: {\r\n      get() {\r\n        return this.modelValue;\r\n      },\r\n      set(val) {\r\n        this.$emit(\"update:modelValue\", val);\r\n      },\r\n    },\r\n    curUserId: {\r\n      get() {\r\n        return this.userId;\r\n      },\r\n      set(val) {\r\n        this.$emit(\"update:userId\", val);\r\n      },\r\n    },\r\n    filterUsers() {\r\n      return this.allUsers.filter((item) => !this.filterName || item.name.includes(this.filterName));\r\n    },\r\n  },\r\n  methods: {\r\n    selectUser(user) {\r\n      this.curUserId = user.userId;\r\n      this.newUserName = \"\";\r\n      this.showModal = false;\r\n    },\r\n    async confirmAddUser() {\r\n      if (!this.newUserName) {\r\n        this.$Message.info(\"请输入要新增的客户名称\");\r\n        return;\r\n      }\r\n      try {\r\n        this.newUserLoading = true;\r\n        const { data: userData } = await verifyUsers({\r\n          name: this.newUserName,\r\n        }) || {};\r\n        if (userData) {\r\n          this.$Message.success(\"名称已存在\\n已选择\");\r\n          this.selectUser(userData);\r\n          return;\r\n        }\r\n        const { data } = await saveUsers({ name: this.newUserName }) || {};\r\n        if (data) {\r\n          this.$Message.success(\"新增成功\");\r\n          this.selectUser(data);\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`新增客户失败：${err.message || err}`);\r\n      } finally {\r\n        this.newUserLoading = false;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.user-list {\r\n  min-height: 285px;\r\n  max-height: 60vh;\r\n  padding: 10px 0;\r\n  background: #f7f8fa;\r\n  position: relative;\r\n  overflow: auto;\r\n  & > div {\r\n    height: 100%;\r\n    overflow: auto;\r\n    border-radius: 4px;\r\n    padding: 0 10px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./userSelect.vue?vue&type=template&id=0171d196&scoped=true\"\nimport script from \"./userSelect.vue?vue&type=script&lang=js\"\nexport * from \"./userSelect.vue?vue&type=script&lang=js\"\n\nimport \"./userSelect.vue?vue&type=style&index=0&id=0171d196&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\goodCashier\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0171d196\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=3159b0a8&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=3159b0a8&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\goodCashier\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3159b0a8\"]])\n\nexport default __exports__","import { createVNode as _createVNode } from \"vue\";\nimport { ref, reactive, computed, defineComponent } from \"vue\";\nimport { clamp, isDef, numericProp, preventDefault, callInterceptor, createNamespace, makeNumericProp } from \"../utils/index.mjs\";\nimport { useRect, useClickAway, useEventListener } from \"@vant/use\";\nimport { useTouch } from \"../composables/use-touch.mjs\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst [name, bem] = createNamespace(\"swipe-cell\");\nconst swipeCellProps = {\n  name: makeNumericProp(\"\"),\n  disabled: Boolean,\n  leftWidth: numericProp,\n  rightWidth: numericProp,\n  beforeClose: Function,\n  stopPropagation: Boolean\n};\nvar stdin_default = defineComponent({\n  name,\n  props: swipeCellProps,\n  emits: [\"open\", \"close\", \"click\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    let opened;\n    let lockClick;\n    let startOffset;\n    let isInBeforeClosing;\n    const root = ref();\n    const leftRef = ref();\n    const rightRef = ref();\n    const state = reactive({\n      offset: 0,\n      dragging: false\n    });\n    const touch = useTouch();\n    const getWidthByRef = (ref2) => ref2.value ? useRect(ref2).width : 0;\n    const leftWidth = computed(() => isDef(props.leftWidth) ? +props.leftWidth : getWidthByRef(leftRef));\n    const rightWidth = computed(() => isDef(props.rightWidth) ? +props.rightWidth : getWidthByRef(rightRef));\n    const open = (side) => {\n      state.offset = side === \"left\" ? leftWidth.value : -rightWidth.value;\n      if (!opened) {\n        opened = true;\n        emit(\"open\", {\n          name: props.name,\n          position: side\n        });\n      }\n    };\n    const close = (position) => {\n      state.offset = 0;\n      if (opened) {\n        opened = false;\n        emit(\"close\", {\n          name: props.name,\n          position\n        });\n      }\n    };\n    const toggle = (side) => {\n      const offset = Math.abs(state.offset);\n      const THRESHOLD = 0.15;\n      const threshold = opened ? 1 - THRESHOLD : THRESHOLD;\n      const width = side === \"left\" ? leftWidth.value : rightWidth.value;\n      if (width && offset > width * threshold) {\n        open(side);\n      } else {\n        close(side);\n      }\n    };\n    const onTouchStart = (event) => {\n      if (!props.disabled) {\n        startOffset = state.offset;\n        touch.start(event);\n      }\n    };\n    const onTouchMove = (event) => {\n      if (props.disabled) {\n        return;\n      }\n      const {\n        deltaX\n      } = touch;\n      touch.move(event);\n      if (touch.isHorizontal()) {\n        lockClick = true;\n        state.dragging = true;\n        const isEdge = !opened || deltaX.value * startOffset < 0;\n        if (isEdge) {\n          preventDefault(event, props.stopPropagation);\n        }\n        state.offset = clamp(deltaX.value + startOffset, -rightWidth.value, leftWidth.value);\n      }\n    };\n    const onTouchEnd = () => {\n      if (state.dragging) {\n        state.dragging = false;\n        toggle(state.offset > 0 ? \"left\" : \"right\");\n        setTimeout(() => {\n          lockClick = false;\n        }, 0);\n      }\n    };\n    const onClick = (position = \"outside\") => {\n      if (isInBeforeClosing)\n        return;\n      emit(\"click\", position);\n      if (opened && !lockClick) {\n        isInBeforeClosing = true;\n        callInterceptor(props.beforeClose, {\n          args: [{\n            name: props.name,\n            position\n          }],\n          done: () => {\n            isInBeforeClosing = false;\n            close(position);\n          },\n          canceled: () => isInBeforeClosing = false,\n          error: () => isInBeforeClosing = false\n        });\n      }\n    };\n    const getClickHandler = (position, stop) => (event) => {\n      if (stop) {\n        event.stopPropagation();\n      }\n      onClick(position);\n    };\n    const renderSideContent = (side, ref2) => {\n      const contentSlot = slots[side];\n      if (contentSlot) {\n        return _createVNode(\"div\", {\n          \"ref\": ref2,\n          \"class\": bem(side),\n          \"onClick\": getClickHandler(side, true)\n        }, [contentSlot()]);\n      }\n    };\n    useExpose({\n      open,\n      close\n    });\n    useClickAway(root, () => onClick(\"outside\"), {\n      eventName: \"touchstart\"\n    });\n    useEventListener(\"touchmove\", onTouchMove, {\n      target: root\n    });\n    return () => {\n      var _a;\n      const wrapperStyle = {\n        transform: `translate3d(${state.offset}px, 0, 0)`,\n        transitionDuration: state.dragging ? \"0s\" : \".6s\"\n      };\n      return _createVNode(\"div\", {\n        \"ref\": root,\n        \"class\": bem(),\n        \"onClick\": getClickHandler(\"cell\", lockClick),\n        \"onTouchstartPassive\": onTouchStart,\n        \"onTouchend\": onTouchEnd,\n        \"onTouchcancel\": onTouchEnd\n      }, [_createVNode(\"div\", {\n        \"class\": bem(\"wrapper\"),\n        \"style\": wrapperStyle\n      }, [renderSideContent(\"left\", leftRef), (_a = slots.default) == null ? void 0 : _a.call(slots), renderSideContent(\"right\", rightRef)])]);\n    };\n  }\n});\nexport {\n  stdin_default as default,\n  swipeCellProps\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _SwipeCell from \"./SwipeCell.mjs\";\nconst SwipeCell = withInstall(_SwipeCell);\nvar stdin_default = SwipeCell;\nimport { swipeCellProps } from \"./SwipeCell.mjs\";\nexport {\n  SwipeCell,\n  stdin_default as default,\n  swipeCellProps\n};\n"],"sourceRoot":""}