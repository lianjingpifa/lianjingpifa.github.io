(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7459b3f3"],{"1f38":function(e,t,o){"use strict";var a=o("7a23");function n(e,t,o,n,r,l){const c=Object(a["resolveComponent"])("viInput"),i=Object(a["resolveComponent"])("FormItem"),d=Object(a["resolveComponent"])("viInputNumber"),s=Object(a["resolveComponent"])("Radio"),u=Object(a["resolveComponent"])("RadioGroup"),f=Object(a["resolveComponent"])("Form"),b=Object(a["resolveComponent"])("Button"),m=Object(a["resolveComponent"])("Modal");return Object(a["openBlock"])(),Object(a["createBlock"])(m,{title:l.title,modelValue:l.showModal,"onUpdate:modelValue":t[7]||(t[7]=e=>l.showModal=e),width:400,"class-name":"vertical-center-modal"},{footer:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,{type:"text",onClick:t[6]||(t[6]=e=>l.showModal=!1)},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("取消")]),_:1}),Object(a["createVNode"])(b,{type:"primary",onClick:l.submit,loading:r.loading},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("确定")]),_:1},8,["onClick","loading"])]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(f,{ref:"form",model:r.formData,rules:r.rules,"label-width":60,onKeydown:Object(a["withKeys"])(l.submit,["enter"]),class:"plr"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{label:"名称:",prop:"name"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c,{modelValue:r.formData.name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.formData.name=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"规格:",prop:"standard"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c,{modelValue:r.formData.standard,"onUpdate:modelValue":t[1]||(t[1]=e=>r.formData.standard=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"单位:",prop:"unit"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(c,{modelValue:r.formData.unit,"onUpdate:modelValue":t[2]||(t[2]=e=>r.formData.unit=e)},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"单价:",prop:"price"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{modelValue:r.formData.price,"onUpdate:modelValue":t[3]||(t[3]=e=>r.formData.price=e),min:0,step:.5},null,8,["modelValue"])]),_:1}),Object(a["createVNode"])(i,{label:"种类:",prop:"type"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{modelValue:r.formData.type,"onUpdate:modelValue":t[4]||(t[4]=e=>r.formData.type=e)},{default:Object(a["withCtx"])(()=>[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(r.TYPE_MAP,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:t,label:t},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o.showCount?(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:0,label:"数量:",prop:"count"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{modelValue:r.formData.count,"onUpdate:modelValue":t[5]||(t[5]=e=>r.formData.count=e),integer:"",min:0},null,8,["modelValue"])]),_:1})):Object(a["createCommentVNode"])("",!0)]),_:1},8,["model","rules","onKeydown"])]),_:1},8,["title","modelValue"])}o("d9e2");var r=o("eeb9"),l=o("267e"),c=o("2410"),i=o.n(c),d={name:"addGoodModal",props:{modelValue:{type:Boolean,default:!1},detailData:{type:Object,default(){return{}}},showCount:{type:Boolean,default:!1}},data(){const e=async(e,t,o)=>{if(t&&this.detailData.name!==this.formData.name){const{data:e}=await Object(r["z"])({name:t})||{};if(e)return o(new Error("该商品名称已存在"))}o()};return{TYPE_MAP:l["b"],formData:{},rules:{name:[{required:!0,message:"请输入商品名称"},{validator:e,trigger:"blur"}]},loading:!1}},computed:{title(){return(this.detailData.goodId?"编辑":"新增")+"商品"},showModal:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e),e||this.$emit("close")}}},watch:{detailData:{deep:!0,handler(){this.$refs.form.resetFields(),this.formData=i()(this.detailData)}}},methods:{submit(){this.loading=!0,this.$refs.form.validate(async e=>{if(!e)return this.$Message.error("数据校验不通过"),void(this.loading=!1);try{const{_index:e,_rowKey:t,count:o,...a}=this.formData,{data:n}=await Object(r["v"])(a)||{};n&&(this.$Message.success(this.title+"成功"),this.$emit("save",{...this.formData}),this.$refs.form.resetFields(),this.showModal=!1)}catch(t){this.$Message.error("请求失败："+(t.message||t))}finally{this.loading=!1}})}}},s=o("6b0d"),u=o.n(s);const f=u()(d,[["render",n]]);t["a"]=f},2410:function(e,t,o){(function(t){var o=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var o,a,n;try{o=Map}catch(u){o=function(){}}try{a=Set}catch(u){a=function(){}}try{n=Promise}catch(u){n=function(){}}function r(l,c,i,d,u){"object"===typeof c&&(i=c.depth,d=c.prototype,u=c.includeNonEnumerable,c=c.circular);var f=[],b=[],m="undefined"!=typeof t;function p(l,i){if(null===l)return null;if(0===i)return l;var h,j;if("object"!=typeof l)return l;if(e(l,o))h=new o;else if(e(l,a))h=new a;else if(e(l,n))h=new n((function(e,t){l.then((function(t){e(p(t,i-1))}),(function(e){t(p(e,i-1))}))}));else if(r.__isArray(l))h=[];else if(r.__isRegExp(l))h=new RegExp(l.source,s(l)),l.lastIndex&&(h.lastIndex=l.lastIndex);else if(r.__isDate(l))h=new Date(l.getTime());else{if(m&&t.isBuffer(l))return h=t.allocUnsafe?t.allocUnsafe(l.length):new t(l.length),l.copy(h),h;e(l,Error)?h=Object.create(l):"undefined"==typeof d?(j=Object.getPrototypeOf(l),h=Object.create(j)):(h=Object.create(d),j=d)}if(c){var O=f.indexOf(l);if(-1!=O)return b[O];f.push(l),b.push(h)}for(var w in e(l,o)&&l.forEach((function(e,t){var o=p(t,i-1),a=p(e,i-1);h.set(o,a)})),e(l,a)&&l.forEach((function(e){var t=p(e,i-1);h.add(t)})),l){var y;j&&(y=Object.getOwnPropertyDescriptor(j,w)),y&&null==y.set||(h[w]=p(l[w],i-1))}if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(l);for(w=0;w<g.length;w++){var v=g[w],V=Object.getOwnPropertyDescriptor(l,v);(!V||V.enumerable||u)&&(h[v]=p(l[v],i-1),V.enumerable||Object.defineProperty(h,v,{enumerable:!1}))}}if(u){var D=Object.getOwnPropertyNames(l);for(w=0;w<D.length;w++){var _=D[w];V=Object.getOwnPropertyDescriptor(l,_);V&&V.enumerable||(h[_]=p(l[_],i-1),Object.defineProperty(h,_,{enumerable:!1}))}}return h}return"undefined"==typeof c&&(c=!0),"undefined"==typeof i&&(i=1/0),p(l,i)}function l(e){return Object.prototype.toString.call(e)}function c(e){return"object"===typeof e&&"[object Date]"===l(e)}function i(e){return"object"===typeof e&&"[object Array]"===l(e)}function d(e){return"object"===typeof e&&"[object RegExp]"===l(e)}function s(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return r.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},r.__objToStr=l,r.__isDate=c,r.__isArray=i,r.__isRegExp=d,r.__getRegExpFlags=s,r}();e.exports&&(e.exports=o)}).call(this,o("b639").Buffer)},"267e":function(e,t,o){"use strict";o.d(t,"b",(function(){return a})),o.d(t,"a",(function(){return n}));const a={1:"整件",99:"散装"},n=e=>"99"==e.type},"324a":function(e,t,o){"use strict";o.r(t);var a=o("7a23");const n={class:"plr"};function r(e,t,o,r,l,c){const i=Object(a["resolveComponent"])("Icon"),d=Object(a["resolveComponent"])("Spin"),s=Object(a["resolveComponent"])("vi-scan"),u=Object(a["resolveComponent"])("add-good-modal");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",n,[Object(a["createVNode"])(i,{type:"ios-add",size:"34",onClick:t[0]||(t[0]=e=>c.changeModal()),class:"header-icon right"}),Object(a["createVNode"])(d,{fix:"",show:l.loading},null,8,["show"]),Object(a["createVNode"])(s,{ref:"scan","close-after-scan":"",onScan:c.onScan},null,8,["onScan"]),Object(a["createVNode"])(u,{modelValue:l.showGoodModal,"onUpdate:modelValue":t[1]||(t[1]=e=>l.showGoodModal=e),detailData:l.detailData,onSave:c.saveData},null,8,["modelValue","detailData","onSave"])])}var l=o("2af9"),c=o("1f38"),i=o("eeb9"),d={name:"mobileEnter",components:{viScan:l["k"],addGoodModal:c["a"]},data(){return{loading:!1,showGoodModal:!1,detailData:{}}},methods:{saveData(){this.$EventBus.$emit("saveGood"),this.$refs.scan.openScan()},async onScan(e){try{this.loading=!0;const{data:{code:t,msg:o,data:a}}=await Object(i["j"])(e)||{};1==t?this.detailData={name:a.goodsName,standard:a.standard,price:+a.price}:(this.detailData={},this.$Message.info(o+"\n免费接口查不到信息\n自己填吧")),this.showGoodModal=!0}catch(t){this.$Message.error("获取商品信息失败："+(t.message||t))}finally{this.loading=!1}},changeModal(e){this.detailData={...e},this.showGoodModal=!0}}},s=(o("8111"),o("6b0d")),u=o.n(s);const f=u()(d,[["render",r],["__scopeId","data-v-aae2d978"]]);t["default"]=f},"3b59":function(e,t,o){},8111:function(e,t,o){"use strict";o("3b59")}}]);
//# sourceMappingURL=chunk-7459b3f3.a9123a61.js.map