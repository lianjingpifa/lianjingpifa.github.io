{"version":3,"sources":["webpack:///./src/viewsMobile/mobileOrder/index.vue","webpack:///./src/viewsMobile/mobileOrder/orderDetail.vue","webpack:///./src/viewsMobile/mobileOrder/orderDetail.vue?9641","webpack:///./src/viewsMobile/mobileOrder/index.vue?a06b","webpack:///./src/viewsMobile/mobileOrder/orderDetail.vue?a674","webpack:///./src/viewsMobile/mobileOrder/index.vue?20bc"],"names":["class","_createElementBlock","_createVNode","_component_van_tabs","active","$data","status","$event","onChange","$options","reSearch","_component_van_tab","title","name","badge","$props","draftCount","undefined","_component_van_search","keyword","shape","placeholder","show-action","onClear","onSearch","action","_withCtx","curUserId","_createBlock","_component_van_cell","value","curName","right-icon","_component_Icon","type","size","onClick","deleteUserId","color","timeData","createTime","updateTime","openMoreFilter","_component_van_action_sheet","show","showMore","_component_viCalendar","_createElementVNode","_hoisted_1","_component_Button","long","resetTime","confirmSearch","_component_viListScroll","ref","getData","default","item","openDetail","_hoisted_3","_toDisplayString","orderId","_hoisted_4","userName","_hoisted_5","total","toFixed","_hoisted_6","_component_orderDetail","showDetail","detailData","showModal","_hoisted_2","list","length","_component_viEmpty","key","_Fragment","_renderList","index","price","originPrice","unit","originUnit","standard","originStandard","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","count","_hoisted_11","_hoisted_12","_hoisted_13","changeOrder","copyOrder","deleteOrder","props","modelValue","Boolean","Object","computed","get","this","set","val","$emit","methods","$Modal","confirm","content","onOk","async","returnCode","data","deleteOrders","orderIds","$Message","success","$EventBus","err","error","message","$router","push","state","params","userId","goodList","detail","__exports__","components","Tab","Tabs","viListScroll","viCalendar","orderDetail","Number","watch","$route","deep","immediate","handler","history","keys","_this$$refs$list","$refs","param","updateTimeStart","updateTimeEnd","createTimeStart","createTimeEnd","getOrdersByPage","JSON","parse","activated","render"],"mappings":"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","file":"public/js/chunk-35de3bd7.e5c92a6e.js","sourcesContent":["<!--\r\n * @Author: zzx\r\n * @Date: 2023-11-11 15:07:00\r\n * @LastEditors: zzx\r\n * @LastEditTime: 2023-11-23 19:20:25\r\n-->\r\n<template>\r\n  <div>\r\n    <van-tabs v-model:active=\"status\" @change=\"reSearch\">\r\n      <van-tab title=\"草稿\" name=\"1\" :badge=\"draftCount || undefined\"></van-tab>\r\n      <van-tab title=\"已打印\" name=\"2\"></van-tab>\r\n    </van-tabs>\r\n    <van-search\r\n      v-model=\"keyword\"\r\n      shape=\"round\"\r\n      placeholder=\"请输入客户名称搜索\"\r\n      show-action\r\n      @clear=\"reSearch\"\r\n      @search=\"reSearch\"\r\n      class=\"search-input\"\r\n    >\r\n      <template #action>\r\n        <van-cell title=\"客户名称\" :value=\"curName\" v-if=\"curUserId\" class=\"user-id-cell\">\r\n          <template #right-icon>\r\n            <Icon type=\"md-close\" size=\"25\" @click=\"deleteUserId\" class=\"vi-link-text ml-10\" />\r\n          </template>\r\n        </van-cell>\r\n        <Icon\r\n          type=\"ios-funnel-outline\"\r\n          size=\"24\"\r\n          :color=\"timeData.createTime || timeData.updateTime ? '#2d8cf0' : '#555'\"\r\n          @click=\"openMoreFilter\"\r\n        />\r\n      </template>\r\n    </van-search>\r\n    <van-action-sheet v-model:show=\"showMore\" title=\"更多检索条件\">\r\n      <viCalendar v-model=\"updateTime\" title=\"修改时间\"></viCalendar>\r\n      <viCalendar v-model=\"createTime\" title=\"创建时间\"></viCalendar>\r\n      <div class=\"flex m-15\">\r\n        <Button size=\"large\" long shape=\"circle\" @click=\"resetTime\" class=\"mr-10\">重置</Button>\r\n        <Button type=\"primary\" size=\"large\" long shape=\"circle\" @click=\"confirmSearch\">检索</Button>\r\n      </div>\r\n    </van-action-sheet>\r\n    <viListScroll ref=\"list\" :getData=\"getData\" class=\"container\">\r\n      <template #default=\"{ item }\">\r\n        <div class=\"card\" @click=\"openDetail(item)\">\r\n          <p class=\"title\">订单编号：{{ item.orderId }}</p>\r\n          <p class=\"f-16\">客户名称：{{ item.userName }}</p>\r\n          <p class=\"f-16\">总 金 额 ：￥{{ item.total && item.total.toFixed(2) }}</p>\r\n          <p class=\"f-16\">修改时间：{{ item.updateTime }}</p>\r\n        </div>\r\n      </template>\r\n    </viListScroll>\r\n    <orderDetail v-model=\"showDetail\" :detailData=\"detailData\"></orderDetail>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Tab, Tabs } from \"vant\";\r\nimport { getOrdersByPage } from \"@/axios\";\r\nimport { viListScroll, viCalendar } from \"@/components\";\r\nimport orderDetail from \"./orderDetail\";\r\n\r\nexport default {\r\n  name: \"mobileOrder\",\r\n  components: {\r\n    [Tab.name]: Tab,\r\n    [Tabs.name]: Tabs,\r\n    viListScroll,\r\n    viCalendar,\r\n    orderDetail,\r\n  },\r\n  props: {\r\n    draftCount: {\r\n      type: Number,\r\n      default: undefined,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      keyword: \"\",\r\n      status: \"1\",\r\n      timeData: {},\r\n      createTime: [],\r\n      updateTime: [],\r\n      showMore: false,\r\n      curUserId: \"\",\r\n      curName: \"\",\r\n      showDetail: false,\r\n      detailData: {},\r\n    };\r\n  },\r\n  watch: {\r\n    draftCount() {\r\n      this.reSearch();\r\n    },\r\n    $route: {\r\n      deep: true,\r\n      immediate: true,\r\n      handler({ name }) {\r\n        if (name !== \"mobileOrder\") return;\r\n        const { params = {} } = history.state;\r\n        if (!Object.keys(params).length) return;\r\n        this.curUserId = params.userId;\r\n        this.curName = params.name;\r\n        this.keyword = \"\";\r\n        this.status = \"2\"; // 历史订单看已打印的\r\n        this.resetTime();\r\n        this.reSearch();\r\n        // 清空历史，防止残留\r\n        history.state.params = {};\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    deleteUserId() {\r\n      this.curUserId = \"\";\r\n      this.curName = \"\";\r\n      this.reSearch();\r\n    },\r\n    reSearch() {\r\n      this.$refs.list?.reSearch();\r\n    },\r\n    getData(param) {\r\n      const { updateTime = [], createTime = [] } = this.timeData;\r\n      const [updateTimeStart, updateTimeEnd] = updateTime;\r\n      const [createTimeStart, createTimeEnd] = createTime;\r\n      return getOrdersByPage({\r\n        ...param,\r\n        userId: this.curUserId,\r\n        userName: this.keyword,\r\n        status: this.status,\r\n        updateTimeStart: updateTimeStart && `${updateTimeStart} 00:00:00`,\r\n        updateTimeEnd: updateTimeEnd && `${updateTimeEnd} 23:59:59`,\r\n        createTimeStart: createTimeStart && `${createTimeStart} 00:00:00`,\r\n        createTimeEnd: createTimeEnd && `${createTimeEnd} 23:59:59`,\r\n      });\r\n    },\r\n    openMoreFilter() {\r\n      this.updateTime = this.timeData.updateTime || [];\r\n      this.createTime = this.timeData.createTime || [];\r\n      this.showMore = true;\r\n    },\r\n    resetTime() {\r\n      this.updateTime = [];\r\n      this.createTime = [];\r\n    },\r\n    confirmSearch() {\r\n      this.timeData = {\r\n        updateTime: this.updateTime,\r\n        createTime: this.createTime,\r\n      };\r\n      this.showMore = false;\r\n      this.reSearch();\r\n    },\r\n    openDetail(data) {\r\n      this.detailData = {\r\n        ...data,\r\n        list: JSON.parse(data.detail || \"[]\"),\r\n        total: data.total.toFixed(2),\r\n      };\r\n      this.showDetail = true;\r\n    },\r\n  },\r\n  activated() {\r\n    this.reSearch();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.user-id-cell {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 40px;\r\n  width: auto;\r\n  line-height: var(--van-search-input-height);\r\n  :deep(.ivu-icon) {\r\n    line-height: var(--van-search-input-height);\r\n  }\r\n}\r\n.search-input {\r\n  border-radius: 0 0 4px 4px;\r\n  position: relative;\r\n}\r\n.container {\r\n  height: calc(100% - 98px);\r\n}\r\n.card {\r\n  padding: 10px;\r\n  background: #FFFFFF;\r\n  border-radius: 4px;\r\n  align-items: flex-end;\r\n  .title {\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n  }\r\n}\r\n:deep(.van-badge--top-right) {\r\n  left: calc(100% + 10px);\r\n  right: auto;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n}\r\n</style>\r\n","<template>\r\n  <van-action-sheet v-model:show=\"showModal\" title=\"订单详情\">\r\n    <van-cell title=\"订单编号\" :value=\"detailData.orderId\"></van-cell>\r\n    <van-cell title=\"客户名称\" :value=\"detailData.userName\"></van-cell>\r\n    <div class=\"detail-container\">\r\n      <div class=\"card-list\">\r\n        <viEmpty v-if=\"!detailData.list.length\"></viEmpty>\r\n        <div class=\"card\" v-for=\"(item, index) in detailData.list\" :key=\"index\">\r\n          <p class=\"title\">{{ item.name }}</p>\r\n          <div class=\"card-bottom\">\r\n            <div>\r\n              <span\r\n                v-if=\"\r\n                  item.price != item.originPrice &&\r\n                    item.unit == item.originUnit &&\r\n                      item.standard == item.originStandard\r\n                \"\r\n                class=\"price origin\"\r\n              >￥{{ item.originPrice && item.originPrice.toFixed(2) }}</span>\r\n              <span class=\"price\">￥{{ item.price && item.price.toFixed(2) }}</span>\r\n              <span class=\"ml-5\" v-if=\"item.unit\">/ {{ item.unit }}</span>\r\n              <span class=\"standard\" v-if=\"item.standard\">{{ item.standard }}</span>\r\n            </div>\r\n            <p class=\"count\">X <span class=\"f-20\">{{ item.count }}</span></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"detail-footer\">\r\n      <p class=\"total\">总金额：￥{{ detailData.total }}</p>\r\n      <div class=\"btn-box\">\r\n        <Button type=\"primary\" @click=\"changeOrder\" size=\"large\" long shape=\"circle\" class=\"ml-10\">修改</Button>\r\n        <Button type=\"success\" @click=\"copyOrder\" size=\"large\" long shape=\"circle\" class=\"ml-10\">复制</Button>\r\n        <Button type=\"error\" @click=\"deleteOrder\" size=\"large\" long shape=\"circle\" class=\"ml-10\">删除</Button>\r\n      </div>\r\n    </div>\r\n  </van-action-sheet>\r\n</template>\r\n\r\n<script>\r\nimport { deleteOrders } from \"@/axios\";\r\n\r\nexport default {\r\n  name: \"mobileOrderDetail\",\r\n  props: {\r\n    modelValue: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    detailData: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    showModal: {\r\n      get() {\r\n        return this.modelValue;\r\n      },\r\n      set(val) {\r\n        this.$emit(\"update:modelValue\", val);\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    deleteOrder() {\r\n      this.$Modal.confirm({\r\n        title: \"删除订单\",\r\n        content: \"是否确认删除所选订单？\",\r\n        onOk: async () => {\r\n          try {\r\n            const { returnCode, data } = await deleteOrders({\r\n              orderIds: `${this.detailData.orderId}`,\r\n            }) || {};\r\n            if (returnCode === 0 && data) {\r\n              this.$Message.success(\"删除成功\");\r\n              this.$EventBus.$emit(\"saveOrder\");\r\n              this.showModal = false;\r\n            }\r\n          } catch (err) {\r\n            this.$Message.error(`删除失败：${err.message || err}`);\r\n          }\r\n        },\r\n      });\r\n    },\r\n    changeOrder() {\r\n      this.showModal = false;\r\n      this.$router.push({\r\n        name: \"mobileCashier\",\r\n        state: {\r\n          params: {\r\n            type: \"change\",\r\n            userId: this.detailData.userId,\r\n            goodList: this.detailData.detail,\r\n            orderId: this.detailData.orderId,\r\n          }\r\n        },\r\n      });\r\n    },\r\n    copyOrder() {\r\n      this.showModal = false;\r\n      this.$router.push({\r\n        name: \"mobileCashier\",\r\n        state: {\r\n          params: { type: \"copy\", goodList: this.detailData.detail },\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.detail-container {\r\n  height: 45vh;\r\n  overflow: hidden;\r\n  background: #f7f8fa;\r\n  padding: 10px 0;\r\n  .card-list {\r\n    height: 100%;\r\n    overflow: auto;\r\n    padding: 0 10px;\r\n    border-radius: 4px;\r\n    position: relative;\r\n  }\r\n  .card {\r\n    padding: 10px;\r\n    background: #FFFFFF;\r\n    position: relative;\r\n    &:after {\r\n      content: \" \";\r\n      position: absolute;\r\n      bottom: 0;\r\n      right: 10px;\r\n      left: 10px;\r\n      border-bottom: 1px solid var(--van-cell-border-color);\r\n    }\r\n    &:nth-last-child(1)::after {\r\n      border-bottom: none;\r\n    }\r\n    .title {\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      line-height: 18px;\r\n    }\r\n    &-bottom {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      .price {\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n        color: #555555;\r\n      }\r\n      .origin {\r\n        font-size: 14px;\r\n        color: #CCCCCC;\r\n        text-decoration: line-through;\r\n        margin-right: 5px;\r\n      }\r\n      .standard {\r\n        display: inline-block;\r\n        margin: 0 0 4px 5px;\r\n        padding: 0 4px;\r\n        border: 1px solid #07c160;\r\n        border-radius: 4px;\r\n        font-size: 12px;\r\n        vertical-align: middle;\r\n      }\r\n      .count {\r\n        font-weight: 600;\r\n      }\r\n    }\r\n  }\r\n}\r\n.detail-footer {\r\n  padding: 10px;\r\n  background: #FFFFFF;\r\n  border-radius: 4px 4px 0 0;\r\n  .total {\r\n    text-align: center;\r\n    font-weight: 600;\r\n    font-size: 16px;\r\n    margin-bottom: 10px;\r\n  }\r\n  .btn-box {\r\n    display: flex;\r\n    justify-content: space-around;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./orderDetail.vue?vue&type=template&id=80dcde4a&scoped=true\"\nimport script from \"./orderDetail.vue?vue&type=script&lang=js\"\nexport * from \"./orderDetail.vue?vue&type=script&lang=js\"\n\nimport \"./orderDetail.vue?vue&type=style&index=0&id=80dcde4a&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\goodCashier\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-80dcde4a\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=cdd467de&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=cdd467de&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\goodCashier\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-cdd467de\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./orderDetail.vue?vue&type=style&index=0&id=80dcde4a&lang=less&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=cdd467de&lang=less&scoped=true\""],"sourceRoot":""}