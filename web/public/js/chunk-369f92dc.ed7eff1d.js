(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-369f92dc"],{"0aeb":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("aad9"),o=a("3e47"),n=a("eeb9"),r=a("2af9"),i=(a("14d9"),a("6605"));const d={class:"detail-container"},s={class:"card-list"},u={class:"title"},b={class:"card-bottom"},O={key:0,class:"price origin"},j={class:"price"},m={key:1,class:"ml-5"},p={key:2,class:"standard"},v={class:"count"},f={class:"f-20"},V={class:"detail-footer"},N={class:"total"},h={class:"btn-box"};var g={__name:"orderDetail",props:{modelValue:{type:Boolean,default:!1},detailData:{type:Object,default(){return{}}}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,l=Object(i["d"])(),o=Object(c["inject"])("$Message",()=>{}),r=Object(c["inject"])("$Modal",()=>{}),g=Object(c["computed"])({get(){return a.modelValue},set(e){t("update:modelValue",e)}});function C(){r.confirm({title:"删除订单",content:"是否确认删除所选订单？",onOk:async()=>{try{const{returnCode:e,data:t}=await Object(n["g"])({orderIds:""+a.detailData.orderId})||{};0===e&&t&&(o.success("删除成功"),window.$EventBus.$emit("saveOrder"),g.value=!1)}catch(e){o.error("删除失败："+(e.message||e))}}})}function k(){g.value=!1,l.push({name:"mobileCashier",state:{params:{type:"change",userId:a.detailData.userId,goodList:a.detailData.detail,orderId:a.detailData.orderId}}})}function y(){g.value=!1,l.push({name:"mobileCashier",state:{params:{type:"copy",goodList:a.detailData.detail}}})}return(t,a)=>{const l=Object(c["resolveComponent"])("van-cell"),o=Object(c["resolveComponent"])("viEmpty"),n=Object(c["resolveComponent"])("Button"),r=Object(c["resolveComponent"])("van-action-sheet");return Object(c["openBlock"])(),Object(c["createBlock"])(r,{show:g.value,"onUpdate:show":a[0]||(a[0]=e=>g.value=e),title:"订单详情"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{title:"订单编号",value:e.detailData.orderId},null,8,["value"]),Object(c["createVNode"])(l,{title:"客户名称",value:e.detailData.userName},null,8,["value"]),Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("div",s,[e.detailData.list.length?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:0})),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.detailData.list,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"card",key:t},[Object(c["createElementVNode"])("p",u,Object(c["toDisplayString"])(e.name),1),Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",null,[e.price!=e.originPrice&&e.unit==e.originUnit&&e.standard==e.originStandard?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",O,"￥"+Object(c["toDisplayString"])(e.originPrice&&e.originPrice.toFixed(2)),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",j,"￥"+Object(c["toDisplayString"])(e.price&&e.price.toFixed(2)),1),e.unit?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",m,"/ "+Object(c["toDisplayString"])(e.unit),1)):Object(c["createCommentVNode"])("",!0),e.standard?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p,Object(c["toDisplayString"])(e.standard),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("p",v,[Object(c["createTextVNode"])("X "),Object(c["createElementVNode"])("span",f,Object(c["toDisplayString"])(e.count),1)])])]))),128))])]),Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("p",N,"总金额：￥"+Object(c["toDisplayString"])(e.detailData.total),1),Object(c["createElementVNode"])("div",h,[Object(c["createVNode"])(n,{type:"primary",onClick:k,size:"large",long:"",shape:"circle"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("修改")]),_:1}),Object(c["createVNode"])(n,{type:"success",onClick:y,size:"large",long:"",shape:"circle"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("复制")]),_:1}),Object(c["createVNode"])(n,{type:"error",onClick:C,size:"large",long:"",shape:"circle"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("删除")]),_:1})])])]),_:1},8,["show"])}}},C=(a("89d0"),a("6b0d")),k=a.n(C);const y=k()(g,[["__scopeId","data-v-410fd406"]]);var w=y;const E={class:"flex m-15"},D=["onClick"],x={class:"title"},B={class:"f-16"},_={class:"f-16"},T={class:"f-16"};var S={__name:"index",props:{draftCount:{type:Number,default:void 0}},setup(e){const t=e,a=Object(i["c"])(),d=Object(c["ref"])();function s(){var e;null===(e=d.value)||void 0===e||e.reSearch()}Object(c["watch"])(()=>t.draftCount,()=>{s()});const u=Object(c["ref"])(""),b=Object(c["ref"])("1"),O=Object(c["ref"])({}),j=Object(c["ref"])([]),m=Object(c["ref"])([]),p=Object(c["ref"])(""),v=Object(c["ref"])("");function f(){m.value=[],j.value=[]}function V(){p.value="",v.value="",s()}function N(e){const{updateTime:t=[],createTime:a=[]}=O.value,[c,l]=t,[o,r]=a;return Object(n["t"])({...e,userId:p.value,userName:u.value,status:b.value,updateTimeStart:c&&c+" 00:00:00",updateTimeEnd:l&&l+" 23:59:59",createTimeStart:o&&o+" 00:00:00",createTimeEnd:r&&r+" 23:59:59"})}Object(c["watch"])(()=>a,({name:e})=>{if("mobileOrder"!==e)return;const{params:t={}}=history.state;Object.keys(t).length&&(p.value=t.userId,v.value=t.name,u.value="",b.value="2",f(),s(),history.state.params={})},{deep:!0,immediate:!0});const h=Object(c["ref"])(!1);function g(){m.value=O.value.updateTime||[],j.value=O.value.createTime||[],h.value=!0}function C(){O.value={updateTime:m.value,createTime:j.value},h.value=!1,s()}const k=Object(c["ref"])({}),y=Object(c["ref"])(!1);function S(e){k.value={...e,list:JSON.parse(e.detail||"[]"),total:e.total.toFixed(2)},y.value=!0}return Object(c["onActivated"])(()=>{s()}),(t,a)=>{const n=Object(c["resolveComponent"])("Icon"),i=Object(c["resolveComponent"])("van-cell"),I=Object(c["resolveComponent"])("van-search"),U=Object(c["resolveComponent"])("Button"),z=Object(c["resolveComponent"])("van-action-sheet");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{active:b.value,"onUpdate:active":a[0]||(a[0]=e=>b.value=e),onChange:s},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{title:"草稿",name:"1",badge:e.draftCount||void 0},null,8,["badge"]),Object(c["createVNode"])(Object(c["unref"])(o["a"]),{title:"已打印",name:"2"})]),_:1},8,["active"]),Object(c["createVNode"])(I,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=e=>u.value=e),shape:"round",placeholder:"请输入客户名称搜索","show-action":"",onClear:s,onSearch:s,class:"search-input"},{action:Object(c["withCtx"])(()=>[p.value?(Object(c["openBlock"])(),Object(c["createBlock"])(i,{key:0,title:"客户名称",value:v.value,class:"user-id-cell"},{"right-icon":Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{type:"md-close",size:"25",onClick:V,class:"vi-link-text ml-10"})]),_:1},8,["value"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(n,{type:"ios-funnel-outline",size:"24",color:O.value.createTime||O.value.updateTime?"#2d8cf0":"#555",onClick:g},null,8,["color"])]),_:1},8,["modelValue"]),Object(c["createVNode"])(z,{show:h.value,"onUpdate:show":a[4]||(a[4]=e=>h.value=e),title:"更多检索条件"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(r["a"]),{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e),title:"修改时间"},null,8,["modelValue"]),Object(c["createVNode"])(Object(c["unref"])(r["a"]),{modelValue:j.value,"onUpdate:modelValue":a[3]||(a[3]=e=>j.value=e),title:"创建时间"},null,8,["modelValue"]),Object(c["createElementVNode"])("div",E,[Object(c["createVNode"])(U,{size:"large",long:"",shape:"circle",onClick:f,class:"mr-10"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("重置")]),_:1}),Object(c["createVNode"])(U,{type:"primary",size:"large",long:"",shape:"circle",onClick:C},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("检索")]),_:1})])]),_:1},8,["show"]),Object(c["createVNode"])(Object(c["unref"])(r["g"]),{ref_key:"listRef",ref:d,getData:N,class:"container"},{default:Object(c["withCtx"])(({item:e})=>[Object(c["createElementVNode"])("div",{class:"card",onClick:t=>S(e)},[Object(c["createElementVNode"])("p",x,"订单编号："+Object(c["toDisplayString"])(e.orderId),1),Object(c["createElementVNode"])("p",B,"客户名称："+Object(c["toDisplayString"])(e.userName),1),Object(c["createElementVNode"])("p",_,"总 金 额 ：￥"+Object(c["toDisplayString"])(e.total&&e.total.toFixed(2)),1),Object(c["createElementVNode"])("p",T,"修改时间："+Object(c["toDisplayString"])(e.updateTime),1)],8,D)]),_:1},512),Object(c["createVNode"])(Object(c["unref"])(w),{modelValue:y.value,"onUpdate:modelValue":a[5]||(a[5]=e=>y.value=e),detailData:k.value},null,8,["modelValue","detailData"])])}}};a("ece5");const I=k()(S,[["__scopeId","data-v-1892345a"]]);t["default"]=I},"402c":function(e,t,a){},"89d0":function(e,t,a){"use strict";a("402c")},cfb3:function(e,t,a){},ece5:function(e,t,a){"use strict";a("cfb3")}}]);