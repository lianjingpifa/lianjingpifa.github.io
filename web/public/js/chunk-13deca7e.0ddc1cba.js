(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13deca7e"],{2410:function(t,e,i){(function(e){var i=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var i,n,r;try{i=Map}catch(u){i=function(){}}try{n=Set}catch(u){n=function(){}}try{r=Promise}catch(u){r=function(){}}function o(s,a,h,l,u){"object"===typeof a&&(h=a.depth,l=a.prototype,u=a.includeNonEnumerable,a=a.circular);var p=[],f=[],d="undefined"!=typeof e;function g(s,h){if(null===s)return null;if(0===h)return s;var _,y;if("object"!=typeof s)return s;if(t(s,i))_=new i;else if(t(s,n))_=new n;else if(t(s,r))_=new r((function(t,e){s.then((function(e){t(g(e,h-1))}),(function(t){e(g(t,h-1))}))}));else if(o.__isArray(s))_=[];else if(o.__isRegExp(s))_=new RegExp(s.source,c(s)),s.lastIndex&&(_.lastIndex=s.lastIndex);else if(o.__isDate(s))_=new Date(s.getTime());else{if(d&&e.isBuffer(s))return _=e.allocUnsafe?e.allocUnsafe(s.length):new e(s.length),s.copy(_),_;t(s,Error)?_=Object.create(s):"undefined"==typeof l?(y=Object.getPrototypeOf(s),_=Object.create(y)):(_=Object.create(l),y=l)}if(a){var v=p.indexOf(s);if(-1!=v)return f[v];p.push(s),f.push(_)}for(var m in t(s,i)&&s.forEach((function(t,e){var i=g(e,h-1),n=g(t,h-1);_.set(i,n)})),t(s,n)&&s.forEach((function(t){var e=g(t,h-1);_.add(e)})),s){var O;y&&(O=Object.getOwnPropertyDescriptor(y,m)),O&&null==O.set||(_[m]=g(s[m],h-1))}if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(s);for(m=0;m<b.length;m++){var x=b[m],E=Object.getOwnPropertyDescriptor(s,x);(!E||E.enumerable||u)&&(_[x]=g(s[x],h-1),E.enumerable||Object.defineProperty(_,x,{enumerable:!1}))}}if(u){var S=Object.getOwnPropertyNames(s);for(m=0;m<S.length;m++){var I=S[m];E=Object.getOwnPropertyDescriptor(s,I);E&&E.enumerable||(_[I]=g(s[I],h-1),Object.defineProperty(_,I,{enumerable:!1}))}}return _}return"undefined"==typeof a&&(a=!0),"undefined"==typeof h&&(h=1/0),g(s,h)}function s(t){return Object.prototype.toString.call(t)}function a(t){return"object"===typeof t&&"[object Date]"===s(t)}function h(t){return"object"===typeof t&&"[object Array]"===s(t)}function l(t){return"object"===typeof t&&"[object RegExp]"===s(t)}function c(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return o.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},o.__objToStr=s,o.__isDate=a,o.__isArray=h,o.__isRegExp=l,o.__getRegExpFlags=c,o}();t.exports&&(t.exports=i)}).call(this,i("b639").Buffer)},"29f6":function(t,e,i){"use strict";e["a"]={POINT:"point",LINE:"line"}},"31fd":function(t,e,i){"use strict";var n=i("7a23");const r=t=>(Object(n["pushScopeId"])("data-v-387cb778"),t=t(),Object(n["popScopeId"])(),t),o={ref:"userPopup"},s={class:"popup"},a={class:"popup-header"},h={class:"title"},l={class:"popup-content"},c={class:"mb-10"},u=r(()=>Object(n["createElementVNode"])("div",{class:"mt-10"},null,-1)),p=r(()=>Object(n["createElementVNode"])("div",{class:"mt-10"},null,-1)),f={ref:"clusterPopup"},d={class:"popup"},g={class:"popup-header"},_=r(()=>Object(n["createElementVNode"])("span",{class:"title"},"聚合点位",-1)),y={class:"popup-content"},v=["onClick"],m={ref:"emptyPopup"},O={class:"popup"},b={class:"popup-content tc"};function x(t,e,i,r,x,E){const S=Object(n["resolveComponent"])("Button"),I=Object(n["resolveComponent"])("Option"),C=Object(n["resolveComponent"])("Select"),w=Object(n["resolveComponent"])("viMap");return Object(n["openBlock"])(),Object(n["createBlock"])(w,{onOnMount:E.onMount,class:"h100"},{default:Object(n["withCtx"])(()=>[x.isMobile?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(S,{key:0,type:"success",onClick:e[0]||(e[0]=e=>t.$emit("close")),class:"list-mode"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("列表模式")]),_:1})),Object(n["createVNode"])(C,{modelValue:x.curUserId,"onUpdate:modelValue":e[1]||(e[1]=t=>x.curUserId=t),ref:"user",filterable:"",clearable:"",class:"select-user"},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(x.allUsers,t=>(Object(n["openBlock"])(),Object(n["createBlock"])(I,{key:t.userId,value:t.userId},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("span",h,Object(n["toDisplayString"])(x.curUser.name),1),Object(n["createElementVNode"])("span",{class:"close",onClick:e[2]||(e[2]=t=>x.userOverlay.setPosition(void 0))}," X ")]),Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("p",null,"电话："+Object(n["toDisplayString"])(x.curUser.phone||"-"),1),Object(n["createElementVNode"])("p",c,"备注："+Object(n["toDisplayString"])(x.curUser.remarks||"-"),1),Object(n["createVNode"])(S,{type:"primary",onClick:e[3]||(e[3]=e=>t.$emit("changeUser",x.curUser)),size:"small"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("修改")]),_:1}),Object(n["createVNode"])(S,{type:"error",onClick:e[4]||(e[4]=e=>t.$emit("deleteUser",x.curUser)),size:"small",class:"ml-10"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("删除")]),_:1}),u,Object(n["createVNode"])(S,{type:"success",onClick:e[5]||(e[5]=e=>t.$emit("openSpecialMng",x.curUser)),size:"small"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("特价")]),_:1}),Object(n["createVNode"])(S,{type:"primary",onClick:e[6]||(e[6]=e=>t.$emit("openHistoryOrder",x.curUser)),size:"small",class:"ml-10"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("历史订单")]),_:1}),p,Object(n["createVNode"])(S,{type:"primary",onClick:E.toMapNavigation,size:"small"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("导航")]),_:1},8,["onClick"]),Object(n["createVNode"])(S,{onClick:E.verifyLonlat,size:"small",class:"ml-10"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("校准")]),_:1},8,["onClick"])])])],512),Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("div",g,[_,Object(n["createElementVNode"])("span",{class:"close",onClick:e[7]||(e[7]=t=>x.clusterOverlay.setPosition(void 0))}," X ")]),Object(n["createElementVNode"])("div",y,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(x.userList,(t,e)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",{key:e,onClick:e=>E.showUserDetail(t),class:"pointer"},Object(n["toDisplayString"])(e+1)+"、"+Object(n["toDisplayString"])(t.name),9,v))),128))])])],512),Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",b,[x.showVerify?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createVNode"])(S,{onClick:E.closeEmptyOverlay,size:"small"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("取消")]),_:1},8,["onClick"]),Object(n["createVNode"])(S,{type:"success",onClick:E.confirmVerify,size:"small",class:"ml-10"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("确认")]),_:1},8,["onClick"])],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createVNode"])(S,{type:"success",onClick:e[8]||(e[8]=e=>t.$emit("changeUser",x.curUser)),size:"small"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(x.curUserId?"定位":"新增"),1)]),_:1}),Object(n["createVNode"])(S,{type:"primary",onClick:E.toMapNavigation,size:"small",class:"ml-10"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("导航")]),_:1},8,["onClick"])],64)),Object(n["createElementVNode"])("span",{onClick:e[9]||(e[9]=(...t)=>E.closeEmptyOverlay&&E.closeEmptyOverlay(...t)),class:"ml-10 pointer"}," X ")])])],512)]),_:1},8,["onOnMount"])}var E=i("3e6b"),S=i("5831"),I=i("01d4"),C=i("4cdf"),w=i("f623"),j=i("f403"),T=i("a568"),R=i("92fa"),A=i("0af5"),k=i("1300"),F=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),D=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return i.resolution=void 0,i.distance=void 0!==e.distance?e.distance:20,i.features=[],i.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return Object(R["a"])(e.getType()==w["a"].POINT,10),e},i.boundRefresh_=i.refresh.bind(i),i.setSource(e.source||null),i}return F(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(I["a"].CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(I["a"].CHANGE,this.boundRefresh_),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=Object(A["j"])(),e=this.distance*this.resolution,i=this.source.getFeatures(),n={},r=0,o=i.length;r<o;r++){var s=i[r];if(!(Object(k["c"])(s)in n)){var a=this.geometryFunction(s);if(a){var h=a.getCoordinates();Object(A["m"])(h,t),Object(A["c"])(t,e,t);var l=this.source.getFeaturesInExtent(t);l=l.filter((function(t){var e=Object(k["c"])(t);return!(e in n)&&(n[e]=!0,!0)})),this.features.push(this.createCluster(l))}}}},e.prototype.createCluster=function(t){for(var e=[0,0],i=t.length-1;i>=0;--i){var n=this.geometryFunction(t[i]);n?Object(T["a"])(e,n.getCoordinates()):t.splice(i,1)}Object(T["e"])(e,1/t.length);var r=new C["a"](new j["a"](e));return r.set("features",t),r},e}(S["a"]),M=D,L=i("e269"),P=i("592d"),N={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},G=i("cd7e"),B=i("1e8d"),V=i("0999"),Y=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),W={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},U=function(t){function e(e){var i=t.call(this)||this;i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container "+G["d"],i.element.style.position="absolute",i.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!==typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addEventListener(Object(L["b"])(W.ELEMENT),i.handleElementChanged),i.addEventListener(Object(L["b"])(W.MAP),i.handleMapChanged),i.addEventListener(Object(L["b"])(W.OFFSET),i.handleOffsetChanged),i.addEventListener(Object(L["b"])(W.POSITION),i.handlePositionChanged),i.addEventListener(Object(L["b"])(W.POSITIONING),i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:N.TOP_LEFT),void 0!==e.position&&i.setPosition(e.position),i}return Y(e,t),e.prototype.getElement=function(){return this.get(W.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(W.MAP)},e.prototype.getOffset=function(){return this.get(W.OFFSET)},e.prototype.getPosition=function(){return this.get(W.POSITION)},e.prototype.getPositioning=function(){return this.get(W.POSITIONING)},e.prototype.handleElementChanged=function(){Object(V["d"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(V["e"])(this.element),Object(B["c"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(B["a"])(t,P["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(W.ELEMENT,t)},e.prototype.setMap=function(t){this.set(W.MAP,t)},e.prototype.setOffset=function(t){this.set(W.OFFSET,t)},e.prototype.setPosition=function(t){this.set(W.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(W.POSITION)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),r=this.getRect(n,[Object(V["c"])(n),Object(V["b"])(n)]),o=t||{},s=void 0===o.margin?20:o.margin;if(!Object(A["g"])(i,r)){var a=r[0]-i[0],h=i[2]-r[2],l=r[1]-i[1],c=i[3]-r[3],u=[0,0];if(a<0?u[0]=a-s:h<0&&(u[0]=Math.abs(h)+s),l<0?u[1]=l-s:c<0&&(u[1]=Math.abs(c)+s),0!==u[0]||0!==u[1]){var p=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(p),d=[f[0]+u[0],f[1]+u[1]],g=o.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set(W.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",s=Math.round(t[1]+n[1])+"px",a="0%",h="0%";r==N.BOTTOM_RIGHT||r==N.CENTER_RIGHT||r==N.TOP_RIGHT?a="-100%":r!=N.BOTTOM_CENTER&&r!=N.CENTER_CENTER&&r!=N.TOP_CENTER||(a="-50%"),r==N.BOTTOM_LEFT||r==N.BOTTOM_CENTER||r==N.BOTTOM_RIGHT?h="-100%":r!=N.CENTER_LEFT&&r!=N.CENTER_CENTER&&r!=N.CENTER_RIGHT||(h="-50%");var l="translate("+a+", "+h+") translate("+o+", "+s+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,i.transform=l,i.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(L["a"]),X=U,z=i("6c77"),H=i("6cbf"),K=i("ce2c"),J=i("8682"),Z=i("83a6"),q=i("8295"),Q=i("d051"),$=i("e300"),tt=i("e47c"),et=i.n(tt),it=i("eeb9"),nt=i("2af9"),rt=i("ed08"),ot={name:"allUsersMap",components:{viMap:nt["h"]},data(){return{isMobile:window.isMobile,allUsers:[],map:null,layer:null,verifyLayer:null,verifyTranslate:null,userOverlay:null,clusterOverlay:null,emptyOverlay:null,curUser:{},userList:[],showVerify:!1,curUserId:""}},watch:{curUserId(t){const e=this.allUsers.find(e=>e.userId===t);if(this.userOverlay.setPosition(void 0),e&&e.longitude&&e.latitude){this.curUser=e;const t=[e.longitude,e.latitude];this.map.getView().animate({center:t}),this.userOverlay.setPosition(t)}else e?(this.curUser=e,this.$Message.info("该用户未设置定位<br>点击地图进行定位")):this.curUser={longitude:this.curUser.longitude,latitude:this.curUser.latitude}}},methods:{verifyLonlat(){this.layer&&(this.layer.getSource().getSource().clear(),this.map.removeLayer(this.layer),this.layer=null),this.userOverlay.setPosition(void 0);const t=new C["a"]({geometry:new j["a"]([this.curUser.longitude,this.curUser.latitude])}),e=new S["a"]({features:[t]});this.verifyLayer=new E["a"]({source:e,style:new z["b"]({image:new H["a"]({src:et.a,anchor:[.5,1]})})}),this.map.addLayer(this.verifyLayer);const i=new $["a"]([t]);this.verifyTranslate=new Q["a"]({features:i}),this.map.addInteraction(this.verifyTranslate),this.verifyTranslate.on("translatestart",()=>{this.showVerify=!0,this.emptyOverlay.setPosition(void 0)}),this.verifyTranslate.on("translateend",t=>{const e=t.features.array_[0].getGeometry().flatCoordinates;this.emptyOverlay.setPosition(e),this.curUser={...this.curUser,longitude:+e[0].toFixed(6),latitude:+e[1].toFixed(6)}})},closeEmptyOverlay(){this.emptyOverlay.setPosition(void 0),this.verifyLayer&&(this.map.removeLayer(this.verifyLayer),this.verifyLayer=null,this.map.removeInteraction(this.verifyTranslate),this.verifyTranslate=null),this.showVerify&&(this.showVerify=!1,this.drawCluster())},async confirmVerify(){try{const{data:t}=await Object(it["y"])(this.curUser)||{};t&&(this.$Message.success("校准成功"),this.closeEmptyOverlay(),this.getUsersList())}catch(t){this.$Message.error("校准失败："+(t.message||t))}},toMapNavigation(){const t=Object(rt["c"])(this.curUser);if(!t)return this.$Message.error("未找到定位");window.open(t,"_self")},showUserDetail(t){this.curUser={...t},this.clusterOverlay.setPosition(void 0),this.userOverlay.setPosition([t.longitude,t.latitude])},drawCluster(){if(!this.map)return;this.layer&&(this.layer.getSource().getSource().clear(),this.map.removeLayer(this.layer),this.layer=null);const t=this.allUsers.filter(t=>t.longitude&&t.latitude).map(t=>new C["a"]({geometry:new j["a"]([t.longitude,t.latitude]),data:t})),e=new M({distance:20,source:new S["a"]({features:t})});this.layer=new E["a"]({source:e,style:t=>this.setClusterStyle(t)}),this.map.addLayer(this.layer)},setClusterStyle(t){const e=t.get("features").length;return 1==e?new z["b"]({image:new H["a"]({src:et.a,anchor:[.5,1]})}):new z["b"]({image:new K["a"]({radius:16,stroke:new J["a"]({color:"#fff",width:1}),fill:new Z["a"]({color:"#6086FF"})}),text:new q["a"]({text:e.toString(),font:"12px sans-serif",fill:new Z["a"]({color:"#FFFFFF"})}),zIndex:e})},mapClickHandle(t){const e=this.map.forEachFeatureAtPixel(t.pixel,t=>t.get("features")),i=e&&e.length||0,n=this.userOverlay.getPosition()||this.clusterOverlay.getPosition()||this.emptyOverlay.getPosition();if(this.userOverlay.setPosition(void 0),this.clusterOverlay.setPosition(void 0),this.emptyOverlay.setPosition(void 0),i)1===i?(this.curUser=e[0].get("data"),this.userOverlay.setPosition(t.coordinate)):(this.userList=e.map(t=>t.get("data")),this.clusterOverlay.setPosition(t.coordinate));else{if(n)return;this.curUser={...this.curUserId?this.curUser:{},longitude:+t.coordinate[0].toFixed(6),latitude:+t.coordinate[1].toFixed(6)},this.emptyOverlay.setPosition(t.coordinate)}},onMount(t){this.map=t,this.userOverlay=new X({element:this.$refs.userPopup,positioning:"top-left",offset:[15,-20],autoPan:!0}),this.map.addOverlay(this.userOverlay),this.clusterOverlay=new X({element:this.$refs.clusterPopup,positioning:"top-left",offset:[10,-20],autoPan:!0}),this.map.addOverlay(this.clusterOverlay),this.emptyOverlay=new X({element:this.$refs.emptyPopup,positioning:"top-left",offset:[10,-20],autoPan:!0}),this.map.addOverlay(this.emptyOverlay),this.map.on("singleclick",this.mapClickHandle),this.drawCluster()},async getUsersList(){this.userOverlay&&this.userOverlay.setPosition(void 0),this.emptyOverlay&&this.emptyOverlay.setPosition(void 0);try{const{returnCode:t,data:e}=await Object(it["h"])()||{};0===t&&(this.allUsers=e||[],this.drawCluster())}catch(t){this.$Message.error("获取客户列表失败："+(t.message||t))}}},created(){this.getUsersList()},beforeUnmount(){this.map.un("singleclick",this.mapClickHandle)}},st=(i("3af4"),i("6b0d")),at=i.n(st);const ht=at()(ot,[["render",x],["__scopeId","data-v-387cb778"]]);e["a"]=ht},"3af4":function(t,e,i){"use strict";i("66b2")},"3e6b":function(t,e,i){"use strict";var n=i("1af9"),r=i("38f3"),o=i("6c77"),s=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a={RENDER_ORDER:"renderOrder"},h=function(t){function e(e){var i=this,n=e||{},o=Object(r["a"])({},n);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,i=t.call(this,o)||this,i.declutter_=void 0!==n.declutter&&n.declutter,i.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,i.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,i}return s(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(a.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(a.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:o["a"],this.styleFunction_=null===t?void 0:Object(o["c"])(this.style_),this.changed()},e}(n["a"]),l=h,c={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},u=[c.FILL],p=[c.STROKE],f=[c.BEGIN_PATH],d=[c.CLOSE_PATH],g=c,_=i("f623"),y=i("045d"),v=i("f78c"),m=i("e98d"),O=i("0af5"),b=i("ddea"),x=i("9f5e"),E=i("bb6c"),S=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),I=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=r,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return S(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,i,n,r,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=n);var h,l,c,u=t[e],p=t[e+1],f=this.tmpCoordinate_,d=!0;for(h=e+n;h<i;h+=n)f[0]=t[h],f[1]=t[h+1],c=Object(O["i"])(a,f),c!==l?(d&&(this.coordinates[s++]=u,this.coordinates[s++]=p),this.coordinates[s++]=f[0],this.coordinates[s++]=f[1],d=!1):c===y["a"].INTERSECTING?(this.coordinates[s++]=f[0],this.coordinates[s++]=f[1],d=!1):d=!0,u=f[0],p=f[1],l=c;return(r&&d||h===e+n)&&(this.coordinates[s++]=u,this.coordinates[s++]=p),s},e.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],h=this.appendFlatCoordinates(t,e,a,n,!1,!1);r.push(h),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,r,o,s,a,h=t.getType(),l=t.getStride(),c=this.coordinates.length;if(h==_["a"].MULTI_POLYGON){n=t.getOrientedFlatCoordinates(),s=[];var u=t.getEndss();a=0;for(var p=0,f=u.length;p<f;++p){var d=[];a=this.drawCustomCoordinates_(n,a,u[p],l,d),s.push(d)}this.instructions.push([g.CUSTOM,c,s,t,i,E["c"]])}else h==_["a"].POLYGON||h==_["a"].MULTI_LINE_STRING?(o=[],n=h==_["a"].POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(n,0,t.getEnds(),l,o),this.instructions.push([g.CUSTOM,c,o,t,i,E["b"]])):h==_["a"].LINE_STRING||h==_["a"].MULTI_POINT?(n=t.getFlatCoordinates(),r=this.appendFlatCoordinates(n,0,n.length,l,!1,!1),this.instructions.push([g.CUSTOM,c,r,t,i,E["a"]])):h==_["a"].POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),r=this.coordinates.length,this.instructions.push([g.CUSTOM,c,r,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[g.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[g.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,r=e.length,o=-1;for(t=0;t<r;++t)i=e[t],n=i[0],n==g.END_GEOMETRY?o=t:n==g.BEGIN_GEOMETRY&&(i[2]=t,Object(x["g"])(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=Object(m["a"])(n||b["c"])}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=Object(m["a"])(r||b["l"]);var o=e.getLineCap();i.lineCap=void 0!==o?o:b["e"];var s=e.getLineDash();i.lineDash=s?s.slice():b["f"];var a=e.getLineDashOffset();i.lineDashOffset=a||b["g"];var h=e.getLineJoin();i.lineJoin=void 0!==h?h:b["h"];var l=e.getWidth();i.lineWidth=void 0!==l?l:b["i"];var c=e.getMiterLimit();i.miterLimit=void 0!==c?c:b["j"],i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[g.SET_FILL_STYLE,e];return"string"!==typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[g.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"===typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!Object(x["a"])(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[g.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(O["d"])(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(O["c"])(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(v["a"]),C=I,w=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),j=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.declutterGroups_=null,o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return w(e,t),e.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([g.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([g.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([g.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([g.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),r=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroups_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0]},e}(C),T=j,R=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),A=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return R(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,n){var r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,n,!1,!1),s=[g.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([g.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],f);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(p),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([g.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],f);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),h=0,l=0,c=o.length;l<c;++l)h=this.drawFlatCoordinates_(s,h,o[l],a);this.hitDetectionInstructions.push(p),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(p),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(p),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(f)},e}(C),k=A,F=i("1c48"),D=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),M=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return D(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var r=this.state,o=void 0!==r.fillStyle,s=void 0!==r.strokeStyle,a=i.length;this.instructions.push(f),this.hitDetectionInstructions.push(f);for(var h=0;h<a;++h){var l=i[h],c=this.coordinates.length,_=this.appendFlatCoordinates(t,e,l,n,!0,!s),y=[g.MOVE_TO_LINE_TO,c,_];this.instructions.push(y),this.hitDetectionInstructions.push(y),s&&(this.instructions.push(d),this.hitDetectionInstructions.push(d)),e=l}return o&&(this.instructions.push(u),this.hitDetectionInstructions.push(u)),s&&(this.instructions.push(p),this.hitDetectionInstructions.push(p)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([g.SET_FILL_STYLE,b["c"]]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([g.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var h=[g.CIRCLE,a];this.instructions.push(f,h),this.hitDetectionInstructions.push(f,h),void 0!==i.fillStyle&&(this.instructions.push(u),this.hitDetectionInstructions.push(u)),void 0!==i.strokeStyle&&(this.instructions.push(p),this.hitDetectionInstructions.push(p)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([g.SET_FILL_STYLE,b["c"]]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([g.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([g.SET_FILL_STYLE,b["c"]]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([g.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0,l=0,c=o.length;l<c;++l)h=this.drawFlatCoordinatess_(s,h,o[l],a);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,r=i.length;n<r;++n)i[n]=Object(F["c"])(i[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,e=t.fillStyle;void 0!==e&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(C),L=M,P=i("29f6"),N=i("1300");function G(t,e,i,n,r){var o,s,a,h,l,c,u,p,f,d,g=i,_=i,y=0,v=0,m=i;for(s=i;s<n;s+=r){var O=e[s],b=e[s+1];void 0!==l&&(f=O-l,d=b-c,h=Math.sqrt(f*f+d*d),void 0!==u&&(v+=a,o=Math.acos((u*f+p*d)/(a*h)),o>t&&(v>y&&(y=v,g=m,_=s),v=0,m=s-r)),a=h,u=f,p=d),l=O,c=b}return v+=h,v>y?[m,s]:[g,_]}var B=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),V={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Y=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.declutterGroups_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o}return B(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||n)){var o,s,a=this.coordinates.length,h=t.getType(),l=null,c=2,u=t.getStride();if(r.placement===P["a"].LINE){if(!Object(O["F"])(this.getBufferedMaxExtent(),t.getExtent()))return;var p=void 0;if(l=t.getFlatCoordinates(),h==_["a"].LINE_STRING)p=[l.length];else if(h==_["a"].MULTI_LINE_STRING)p=t.getEnds();else if(h==_["a"].POLYGON)p=t.getEnds().slice(0,1);else if(h==_["a"].MULTI_POLYGON){var f=t.getEndss();for(p=[],o=0,s=f.length;o<s;++o)p.push(f[o][0])}this.beginGeometry(t,e);for(var d=r.textAlign,y=0,v=void 0,m=0,x=p.length;m<x;++m){if(void 0==d){var E=G(r.maxAngle,l,y,p[m],u);y=E[0],v=E[1]}else v=p[m];for(o=y;o<v;o+=u)this.coordinates.push(l[o],l[o+1]);c=this.coordinates.length,y=p[m];var S=this.declutterGroups_?0===m?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(a,c,S),a=c}this.endGeometry(e)}else{var I=null;switch(r.overflow||(I=[]),h){case _["a"].POINT:case _["a"].MULTI_POINT:l=t.getFlatCoordinates(),c=l.length;break;case _["a"].LINE_STRING:l=t.getFlatMidpoint();break;case _["a"].CIRCLE:l=t.getCenter();break;case _["a"].MULTI_LINE_STRING:l=t.getFlatMidpoints(),u=2,c=l.length;break;case _["a"].POLYGON:l=t.getFlatInteriorPoint(),r.overflow||I.push(l[2]/this.resolution),u=3;break;case _["a"].MULTI_POLYGON:var C=t.getFlatInteriorPoints();for(l=[],o=0,s=C.length;o<s;o+=3)r.overflow||I.push(C[o+2]/this.resolution),l.push(C[o],C[o+1]);if(u=2,c=l.length,0==c)return;break;default:}c=this.appendFlatCoordinates(l,0,c,u,!1,!1),this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var w=r.padding;if(w!=b["k"]&&(r.scale[0]<0||r.scale[1]<0)){var j=r.padding[0],T=r.padding[1],R=r.padding[2],A=r.padding[3];r.scale[0]<0&&(T=-T,A=-A),r.scale[1]<0&&(j=-j,R=-R),w=[j,T,R,A]}var k=this.pixelRatio;this.instructions.push([g.DRAW_IMAGE,a,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,w==b["k"]?b["k"]:w.map((function(t){return t*k})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,I]);var F=1/k;this.hitDetectionInstructions.push([g.DRAW_IMAGE,a,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[F,F],NaN,w,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,I]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||b["m"],textBaseline:e.textBaseline||b["n"],scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();var h=this.pixelRatio,l=V[r.textBaseline],c=this.textOffsetY_*h,u=this.text_,p=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([g.DRAW_CHARS,t,e,l,i,r.overflow,a,r.maxAngle,h,c,o,p*h,u,s,1]),this.hitDetectionInstructions.push([g.DRAW_CHARS,t,e,l,i,r.overflow,a,r.maxAngle,1,c,o,p,u,s,1/h])},e.prototype.setTextStyle=function(t,e){var i,n,r;if(t){this.declutterGroups_=e;var o=t.getFill();o?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=Object(m["a"])(o.getColor()||b["c"])):(n=null,this.textFillState_=n);var s=t.getStroke();if(s){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);var a=s.getLineDash(),h=s.getLineDashOffset(),l=s.getWidth(),c=s.getMiterLimit();r.lineCap=s.getLineCap()||b["e"],r.lineDash=a?a.slice():b["f"],r.lineDashOffset=void 0===h?b["g"]:h,r.lineJoin=s.getLineJoin()||b["h"],r.lineWidth=void 0===l?b["i"]:l,r.miterLimit=void 0===c?b["j"]:c,r.strokeStyle=Object(m["a"])(s.getColor()||b["l"])}else r=null,this.textStrokeState_=r;i=this.textState_;var u=t.getFont()||b["d"];Object(b["s"])(u);var p=t.getScaleArray();i.overflow=t.getOverflow(),i.font=u,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||b["n"],i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||b["k"],i.scale=void 0===p?[1,1]:p;var f=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===_?0:_,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:Object(N["c"])(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+Object(N["c"])(n.fillStyle):""}else this.text_=""},e}(C),W=Y,U={Circle:L,Default:C,Image:T,LineString:k,Polygon:L,Text:W},X=function(){function t(t,e,i,n,r){this.declutter_=r,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_,e[0][0]++):(e=[[1]],this.declutterGroups_=e)),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var n in i){var r=i[n].finish();t[e][n]=r}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);var r=n[e];if(void 0===r){var o=U[e];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=r}return r},t}(),z=X,H=i("137e"),K=i("3749"),J=i("b55e"),Z=i.n(J),q=i("617d"),Q=i("a896"),$=i("7fc9"),tt=i("bef8");function et(t,e,i,n,r,o,s,a,h,l,c,u){var p,f=[];if(u){var d=Object(tt["a"])(t,e,i,n,u,[t[e],t[e+1]]);p=d[0]>d[d.length-n]}else p=t[e]>t[i-n];var g=r.length,_=t[e],y=t[e+1];e+=n;for(var v,m,O=t[e],b=t[e+1],x=0,E=Math.sqrt(Math.pow(O-_,2)+Math.pow(b-y,2)),S=!1,I=0;I<g;++I){v=p?g-I-1:I;var C=r[v],w=a*h(l,C,c),j=o+w/2;while(e<i-n&&x+E<j)_=O,y=b,e+=n,O=t[e],b=t[e+1],x+=E,E=Math.sqrt(Math.pow(O-_,2)+Math.pow(b-y,2));var T=j-x,R=Math.atan2(b-y,O-_);if(p&&(R+=R>0?-Math.PI:Math.PI),void 0!==m){var A=R-m;if(S=S||0!==A,A+=A>Math.PI?-2*Math.PI:A<-Math.PI?2*Math.PI:0,Math.abs(A)>s)return null}m=R;var k=T/E,F=Object($["c"])(_,O,k),D=Object($["c"])(y,b,k);f[v]=[F,D,w/2,R,C],o+=w}return S?f:[[f[0][0],f[0][1],f[0][2],f[0][3],r]]}function it(t,e,i,n){for(var r=t[e],o=t[e+1],s=0,a=e+n;a<i;a+=n){var h=t[a],l=t[a+1];s+=Math.sqrt((h-r)*(h-r)+(l-o)*(l-o)),r=h,o=l}return s}var nt=Object(O["j"])(),rt=Object(Q["c"])(),ot=[],st=[],at=[],ht=[],lt=function(){function t(t,e,i,n,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderBuffer_=r,this.renderedTransform_=Object(Q["c"])(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,n){var r=t+e+i+n;if(this.labels_[r])return this.labels_[r];var o=n?this.strokeStates[n]:null,s=i?this.fillStates[i]:null,a=this.textStates[e],h=this.pixelRatio,l=[a.scale[0]*h,a.scale[1]*h],c=V[a.textAlign||b["m"]],u=n&&o.lineWidth?o.lineWidth:0,p=t.split("\n"),f=p.length,d=[],g=Object(b["r"])(a.font,p,d),_=Object(b["q"])(a.font),y=_*f,v=g+u,m=[],O=(v+2)*l[0],x=(y+u)*l[1],E={width:O<0?Math.floor(O):Math.ceil(O),height:x<0?Math.floor(x):Math.ceil(x),contextInstructions:m};if(1==l[0]&&1==l[1]||m.push("scale",l),m.push("font",a.font),n){m.push("strokeStyle",o.strokeStyle),m.push("lineWidth",u),m.push("lineCap",o.lineCap),m.push("lineJoin",o.lineJoin),m.push("miterLimit",o.miterLimit);var S=q["g"]?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;S.prototype.setLineDash&&(m.push("setLineDash",[o.lineDash]),m.push("lineDashOffset",o.lineDashOffset))}i&&m.push("fillStyle",s.fillStyle),m.push("textBaseline","middle"),m.push("textAlign","center");var I,C=.5-c,w=c*v+C*u;if(n)for(I=0;I<f;++I)m.push("strokeText",[p[I],w+C*d[I],.5*(u+_)+I*_]);if(i)for(I=0;I<f;++I)m.push("fillText",[p[I],w+C*d[I],.5*(u+_)+I*_]);return this.labels_[r]=E,E},t.prototype.replayTextBackground_=function(t,e,i,n,r,o,s,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],a&&(t.fillStyle=o[1]),this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,i,n,r,o,s,a,h,l,c,u,p,f,d,g,_,y,v){var m=y||v;o*=f[0],s*=f[1],i-=o,n-=s;var x=g+c>r.width?r.width-c:g,E=h+u>r.height?r.height-u:h,S=_[3]+x*f[0]+_[1],I=_[0]+E*f[1]+_[2],C=i-_[3],w=n-_[0];(m||0!==p)&&(ot[0]=C,ht[0]=C,ot[1]=w,st[1]=w,st[0]=C+S,at[0]=st[0],at[1]=w+I,ht[1]=at[1]);var j=null;if(0!==p){var T=i+o,R=n+s;j=Object(Q["b"])(rt,T,R,1,1,p,-T,-R),Object(Q["a"])(rt,ot),Object(Q["a"])(rt,st),Object(Q["a"])(rt,at),Object(Q["a"])(rt,ht),Object(O["k"])(Math.min(ot[0],st[0],at[0],ht[0]),Math.min(ot[1],st[1],at[1],ht[1]),Math.max(ot[0],st[0],at[0],ht[0]),Math.max(ot[1],st[1],at[1],ht[1]),nt)}else Object(O["k"])(C,w,C+S,w+I,nt);var A=0,k=0;if(a){var F=this.renderBuffer_;F[0]=Math.max(F[0],Object(O["E"])(nt)),A=F[0],F[1]=Math.max(F[1],Object(O["A"])(nt)),k=F[1]}var D=t.canvas,M=v?v[2]*f[0]/2:0,L=nt[0]-M<=(D.width+A)/e&&nt[2]+M>=-A/e&&nt[1]-M<=(D.height+k)/e&&nt[3]+M>=-k/e;if(d&&(i=Math.round(i),n=Math.round(n)),a){if(!L&&1==a[0])return!1;var P=L?[t,j?j.slice(0):null,l,r,c,u,x,E,i,n,f,nt.slice()]:null;P&&(m&&P.push(y,v,ot.slice(0),st.slice(0),at.slice(0),ht.slice(0)),a.push(P))}else L&&(m&&this.replayTextBackground_(t,ot,st,at,ht,y,v,!1),Object(b["o"])(t,j,l,r,c,u,x,E,i,n,f));return!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=Object(Q["a"])(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,i,n){for(var r=[],o=1,s=t.length;o<s;++o){var a=t[o],h=a[11];r.push({minX:h[0],minY:h[1],maxX:h[2],maxY:h[3],value:e})}n||(n=new Z.a(9));var l=!1;for(o=0,s=r.length;o<s;++o)if(n.collides(r[o])){l=!0;break}if(!l){n.load(r);for(var c=1,u=t.length;c<u;++c){a=t[c];var p=a[0],f=p.globalAlpha;f!==i&&(p.globalAlpha=i),a.length>12&&this.replayTextBackground_(a[0],a[14],a[15],a[16],a[17],a[12],a[13],!0),b["o"].apply(void 0,a),f!==i&&(p.globalAlpha=f)}}return t.length=1,n},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,n){var r=this.textStates[e],o=this.createLabel(t,e,n,i),s=this.strokeStates[i],a=this.pixelRatio,h=V[r.textAlign||b["m"]],l=V[r.textBaseline||b["n"]],c=s&&s.lineWidth?s.lineWidth:0,u=o.width/a-2*r.scale[0],p=h*u+2*(.5-h)*c,f=l*o.height/a+2*(.5-l)*c;return{label:o,anchorX:p,anchorY:f}},t.prototype.execute_=function(t,e,i,n,r,o,s){var a;this.declutterItems.length=0,this.pixelCoordinates_&&Object(x["a"])(i,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Object(tt["c"])(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),Object(Q["h"])(this.renderedTransform_,i));var h,l,c,u,p,f,d,_,y,v,m,E,S,I,C,w,j,T=0,R=n.length,A=0,k=0,F=0,D=null,M=null,L=this.coordinateCache_,P=this.viewRotation_,N=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,G={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:P},B=this.instructions!=n||this.overlaps?0:200;while(T<R){var Y=n[T],W=Y[0];switch(W){case g.BEGIN_GEOMETRY:C=Y[1],C.getGeometry()?void 0===s||Object(O["F"])(s,Y[3])?++T:T=Y[2]+1:T=Y[2];break;case g.BEGIN_PATH:k>B&&(this.fill_(t),k=0),F>B&&(t.stroke(),F=0),k||F||(t.beginPath(),u=NaN,p=NaN),++T;break;case g.CIRCLE:A=Y[1];var U=a[A],X=a[A+1],z=a[A+2],H=a[A+3],K=z-U,J=H-X,Z=Math.sqrt(K*K+J*J);t.moveTo(U+Z,X),t.arc(U,X,Z,0,2*Math.PI,!0),++T;break;case g.CLOSE_PATH:t.closePath(),++T;break;case g.CUSTOM:A=Y[1],h=Y[2];var q=Y[3],$=Y[4],nt=6==Y.length?Y[5]:void 0;G.geometry=q,G.feature=C,T in L||(L[T]=[]);var rt=L[T];nt?nt(a,A,h,2,rt):(rt[0]=a[A],rt[1]=a[A+1],rt.length=2),$(rt,G),++T;break;case g.DRAW_IMAGE:A=Y[1],h=Y[2],v=Y[3],l=Y[4],c=Y[5],y=o?null:Y[6];var ot=Y[7],st=Y[8],at=Y[9],ht=Y[10],lt=Y[11],ct=Y[12],ut=Y[13],pt=Y[14];if(!v&&Y.length>=19){m=Y[18],E=Y[19],S=Y[20],I=Y[21];var ft=this.drawLabelWithPointPlacement_(m,E,S,I);v=ft.label,Y[3]=v;var dt=Y[22];l=(ft.anchorX-dt)*this.pixelRatio,Y[4]=l;var gt=Y[23];c=(ft.anchorY-gt)*this.pixelRatio,Y[5]=c,ot=v.height,Y[7]=ot,pt=v.width,Y[14]=pt}var _t=void 0;Y.length>24&&(_t=Y[24]);var yt=void 0,vt=void 0,mt=void 0;Y.length>16?(yt=Y[15],vt=Y[16],mt=Y[17]):(yt=b["k"],vt=!1,mt=!1),lt&&N?ct+=P:lt||N||(ct-=P);for(var Ot=0,bt=0;A<h;A+=2)if(!(_t&&_t[Ot++]<pt/this.pixelRatio)){if(y){var xt=Math.floor(bt);_=y.length<xt+1?[y[0][0]]:y[xt]}var Et=this.replayImageOrLabel_(t,e,a[A],a[A+1],v,l,c,_,ot,st,at,ht,ct,ut,r,pt,yt,vt?D:null,mt?M:null);Et&&_&&y[y.length-1]!==_&&y.push(_),_&&(_.length-1===_[0]&&this.declutterItems.push(this,_,C),bt+=1/_[0])}++T;break;case g.DRAW_CHARS:var St=Y[1],It=Y[2],Ct=Y[3];_=o?null:Y[4];var wt=Y[5];I=Y[6];var jt=Y[7],Tt=Y[8],Rt=Y[9];S=Y[10];var At=Y[11];m=Y[12],E=Y[13];var kt=[Y[14],Y[14]],Ft=this.textStates[E],Dt=Ft.font,Mt=[Ft.scale[0]*Tt,Ft.scale[1]*Tt],Lt=void 0;Dt in this.widths_?Lt=this.widths_[Dt]:(Lt={},this.widths_[Dt]=Lt);var Pt=it(a,St,It,2),Nt=Math.abs(Mt[0])*Object(b["p"])(Dt,m,Lt);if(wt||Nt<=Pt){var Gt=this.textStates[E].textAlign,Bt=(Pt-Nt)*V[Gt],Vt=et(a,St,It,2,m,Bt,jt,Math.abs(Mt[0]),b["p"],Dt,Lt,N?0:this.viewRotation_);if(Vt){Et=!1;var Yt=void 0,Wt=void 0,Ut=void 0,Xt=void 0,zt=void 0;if(S)for(Yt=0,Wt=Vt.length;Yt<Wt;++Yt)zt=Vt[Yt],Ut=zt[4],Xt=this.createLabel(Ut,E,"",S),l=zt[2]+At,c=Ct*Xt.height+2*(.5-Ct)*At*Mt[1]/Mt[0]-Rt,Et=this.replayImageOrLabel_(t,e,zt[0],zt[1],Xt,l,c,_,Xt.height,1,0,0,zt[3],kt,!1,Xt.width,b["k"],null,null)||Et;if(I)for(Yt=0,Wt=Vt.length;Yt<Wt;++Yt)zt=Vt[Yt],Ut=zt[4],Xt=this.createLabel(Ut,E,I,""),l=zt[2],c=Ct*Xt.height-Rt,Et=this.replayImageOrLabel_(t,e,zt[0],zt[1],Xt,l,c,_,Xt.height,1,0,0,zt[3],kt,!1,Xt.width,b["k"],null,null)||Et;Et&&this.declutterItems.push(this,_,C)}}++T;break;case g.END_GEOMETRY:if(void 0!==o){C=Y[1];var Ht=o(C);if(Ht)return Ht}++T;break;case g.FILL:B?k++:this.fill_(t),++T;break;case g.MOVE_TO_LINE_TO:for(A=Y[1],h=Y[2],w=a[A],j=a[A+1],f=w+.5|0,d=j+.5|0,f===u&&d===p||(t.moveTo(w,j),u=f,p=d),A+=2;A<h;A+=2)w=a[A],j=a[A+1],f=w+.5|0,d=j+.5|0,A!=h-2&&f===u&&d===p||(t.lineTo(w,j),u=f,p=d);++T;break;case g.SET_FILL_STYLE:D=Y,this.alignFill_=Y[2],k&&(this.fill_(t),k=0,F&&(t.stroke(),F=0)),t.fillStyle=Y[1],++T;break;case g.SET_STROKE_STYLE:M=Y,F&&(t.stroke(),F=0),this.setStrokeStyle_(t,Y),++T;break;case g.STROKE:B?F++:t.stroke(),++T;break;default:++T;break}}k&&this.fill_(t),F&&t.stroke()},t.prototype.execute=function(t,e,i,n,r){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,r,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,i,n,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,r)},t}(),ct=lt,ut=i("0999"),pt=[K["a"].POLYGON,K["a"].CIRCLE,K["a"].LINE_STRING,K["a"].IMAGE,K["a"].TEXT,K["a"].DEFAULT],ft=function(){function t(t,e,i,n,r,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Object(Q["c"])(),this.createExecutors_(r)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var n=t[e],r=[this.renderBuffer_||0,this.renderBuffer_||0];for(var o in n){var s=n[o];i[o]=new ct(this.resolution_,this.pixelRatio_,this.overlaps_,s,r)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],n=0,r=t.length;n<r;++n)if(t[n]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o){n=Math.round(n);var s=2*n+1,a=Object(Q["b"])(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Object(ut["a"])(s,s));var h,l=this.hitDetectionContext_;l.canvas.width!==s||l.canvas.height!==s?(l.canvas.width=s,l.canvas.height=s):l.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(h=Object(O["j"])(),Object(O["r"])(h,t),Object(O["c"])(h,e*(this.renderBuffer_+n),h));var c,u=_t(n);function p(t){for(var e=l.getImageData(0,0,s,s).data,i=0;i<s;i++)for(var n=0;n<s;n++)if(u[i][n]&&e[4*(n*s+i)+3]>0){var a=void 0;return(!o||c!=K["a"].IMAGE&&c!=K["a"].TEXT||-1!==o.indexOf(t))&&(a=r(t)),a||void l.clearRect(0,0,s,s)}}var f,d,g,_,y,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(x["f"]),f=v.length-1;f>=0;--f){var m=v[f].toString();for(g=this.executorsByZIndex_[m],d=pt.length-1;d>=0;--d)if(c=pt[d],_=g[c],void 0!==_&&(y=_.executeHitDetection(l,a,i,p,h),y))return y}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],n=e[1],r=e[2],o=e[3],s=[i,n,i,o,r,o,r,n];return Object(tt["c"])(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return Object(r["d"])(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,n,r,o,s){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(x["f"]),this.maxExtent_&&(t.save(),this.clip(t,i));var h,l,c,u,p,f,d=o||pt;for(h=0,l=a.length;h<l;++h){var g=a[h].toString();for(p=this.executorsByZIndex_[g],c=0,u=d.length;c<u;++c){var _=d[c];if(f=p[_],void 0!==f)if(!s||_!=K["a"].IMAGE&&_!=K["a"].TEXT)f.execute(t,e,i,n,r);else{var y=s[g];y?y.push(f,i.slice(0)):s[g]=[f,i.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),dt={0:[[!0]]};function gt(t,e,i){var n,r=Math.floor(t.length/2);if(e>=r)for(n=r;n<e;n++)t[n][i]=!0;else if(e<r)for(n=e+1;n<r;n++)t[n][i]=!0}function _t(t){if(void 0!==dt[t])return dt[t];for(var e=2*t+1,i=new Array(e),n=0;n<e;n++)i[n]=new Array(e);var r=t,o=0,s=0;while(r>=o)gt(i,t+r,t+o),gt(i,t+o,t+r),gt(i,t-o,t+r),gt(i,t-r,t+o),gt(i,t-r,t-o),gt(i,t-o,t-r),gt(i,t+o,t-r),gt(i,t+r,t-o),o++,s+=1+2*o,2*(s-r)+1>0&&(r-=1,s+=1-2*r);return dt[t]=i,i}function yt(t,e,i,n,r,o){for(var s=Object.keys(t).map(Number).sort(x["f"]),a=0,h=s.length;a<h;++a)for(var l=t[s[a].toString()],c=void 0,u=0,p=l.length;u<p;){var f=l[u++],d=l[u++];f.execute(e,1,d,i,r),f!==c&&f.declutterItems.length>0&&(c=f,o.push({items:f.declutterItems,opacity:n}))}}var vt=ft,mt=i("496f"),Ot=i("c946"),bt=i("82b0"),xt=i("6cbf");function Et(t,e,i,n,r,o,s){var a=t[0]/2,h=t[1]/2,l=Object(ut["a"])(a,h);l.imageSmoothingEnabled=!1;for(var c=l.canvas,u=new Ot["a"](l,.5,r,null,s),p=i.length,f=Math.floor(16777215/p),d={},g=1;g<=p;++g){var y=i[g-1],v=y.getStyleFunction()||n;if(n){var m=v(y,o);if(m){Array.isArray(m)||(m=[m]);for(var b=g*f,E="#"+("000000"+b.toString(16)).slice(-6),S=0,I=m.length;S<I;++S){var C=m[S],w=C.clone(),j=w.getFill();j&&j.setColor(E);var T=w.getStroke();T&&T.setColor(E),w.setText(void 0);var R=C.getImage();if(R){var A=R.getImageSize();if(!A)continue;var k=document.createElement("canvas");k.width=A[0],k.height=A[1];var F=k.getContext("2d",{alpha:!1});F.fillStyle=E;var D=F.canvas;F.fillRect(0,0,D.width,D.height);var M=A?A[0]:D.width,L=A?A[1]:D.height,P=Object(ut["a"])(M,L);P.drawImage(D,0,0),w.setImage(new xt["a"]({img:D,imgSize:A,anchor:R.getAnchor(),anchorXUnits:bt["a"].PIXELS,anchorYUnits:bt["a"].PIXELS,offset:R.getOrigin(),size:R.getSize(),opacity:R.getOpacity(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}var N=Number(w.getZIndex()),G=d[N];G||(G={},d[N]=G,G[_["a"].POLYGON]=[],G[_["a"].CIRCLE]=[],G[_["a"].LINE_STRING]=[],G[_["a"].POINT]=[]);var B=w.getGeometryFunction()(y);B&&Object(O["F"])(r,B.getExtent())&&G[B.getType().replace("Multi","")].push(B,w)}}}}for(var V=Object.keys(d).map(Number).sort(x["f"]),Y=(g=0,V.length);g<Y;++g){G=d[V[g]];for(var W in G){var U=G[W];for(S=0,I=U.length;S<I;S+=2){u.setStyle(U[S+1]);for(var X=0,z=e.length;X<z;++X)u.setTransform(e[X]),u.drawGeometry(U[S])}}}return l.getImageData(0,0,c.width,c.height)}function St(t,e,i){var n=[];if(i){var r=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*i.width),o=i.data[r],s=i.data[r+1],a=i.data[r+2],h=a+256*(s+256*o),l=Math.floor(16777215/e.length);h&&h%l===0&&n.push(e[h/l-1])}return n}var It=i("30d1"),Ct=i("256f"),wt=i("a568"),jt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tt=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=Object(O["j"])(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.clipping=!0,i}return jt(e,t),e.prototype.useContainer=function(e,i,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,i,n)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];Object(Q["e"])(this.pixelTransform,1/i,1/i),Object(Q["d"])(this.inversePixelTransform,this.pixelTransform);var r=Object(Q["i"])(this.pixelTransform);this.useContainer(e,r,n.opacity);var o=this.context,s=o.canvas,a=this.replayGroup_;if(!a||a.isEmpty())return!this.containerReused&&s.width>0&&(s.width=0),this.container;var h=Math.round(t.size[0]*i),l=Math.round(t.size[1]*i);s.width!=h||s.height!=l?(s.width=h,s.height=l,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||o.clearRect(0,0,h,l),this.preRender(o,t);var c=t.extent,u=t.viewState,p=u.center,f=u.resolution,d=u.projection,g=u.rotation,_=d.getExtent(),y=this.getLayer().getSource(),v=!1;if(n.extent&&this.clipping){var m=Object(Ct["e"])(n.extent,d);v=!Object(O["g"])(m,t.extent)&&Object(O["F"])(m,t.extent),v&&this.clipUnrotated(o,t,m)}var b=t.viewHints,x=!(b[mt["a"].ANIMATING]||b[mt["a"].INTERACTING]),E=this.getRenderTransform(p,f,g,i,h,l,0),S=this.getLayer().getDeclutter()?{}:null;if(a.execute(o,1,E,g,x,void 0,S),y.getWrapX()&&d.canWrapX()&&!Object(O["g"])(_,c)){var I=c[0],C=Object(O["E"])(_),w=0,j=void 0;while(I<_[0]){--w,j=C*w;var T=this.getRenderTransform(p,f,g,i,h,l,j);a.execute(o,1,T,g,x,void 0,S),I+=C}w=0,I=c[2];while(I>_[2]){++w,j=C*w;var R=this.getRenderTransform(p,f,g,i,h,l,j);a.execute(o,1,R,g,x,void 0,S),I-=C}}if(S){var A=t.viewHints,k=!(A[mt["a"].ANIMATING]||A[mt["a"].INTERACTING]);yt(S,o,g,1,k,t.declutterItems)}v&&o.restore(),this.postRender(o,t);var F=n.opacity,D=this.container;return F!==parseFloat(D.style.opacity)&&(D.style.opacity=1===F?"":String(F)),this.renderedRotation_!==u.rotation&&(this.renderedRotation_=u.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e,i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];Object(Q["a"])(this.pixelTransform,n);var r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,h=this.renderedExtent_,l=this.getLayer(),c=[],u=n[0]/2,p=n[1]/2;c.push(this.getRenderTransform(r,o,s,.5,u,p,0).slice());var f=l.getSource(),d=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Object(O["g"])(d,h)){var g=h[0],_=Object(O["E"])(d),y=0,v=void 0;while(g<d[0])--y,v=_*y,c.push(this.getRenderTransform(r,o,s,.5,u,p,v).slice()),g+=_;y=0,g=h[2];while(g>d[2])++y,v=_*y,c.push(this.getRenderTransform(r,o,s,.5,u,p,v).slice()),g-=_}this.hitDetectionImageData_=Et(n,c,this.renderedFeatures_,l.getStyleFunction(),h,o,s)}e(St(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){if(this.replayGroup_){var o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),h={},l=this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,i,(function(t){var e=Object(N["c"])(t);if(!(e in h))return h[e]=!0,n(t,a)}),a.getDeclutter()?r:null);return l}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var n=t.viewHints[mt["a"].ANIMATING],r=t.viewHints[mt["a"].INTERACTING],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!s&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var a=t.extent,h=t.viewState,l=h.projection,c=h.resolution,u=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=It["a"]);var g=h.center.slice(),_=Object(O["c"])(a,f*c),y=[_.slice()],v=l.getExtent();if(i.getWrapX()&&l.canWrapX()&&!Object(O["g"])(v,t.extent)){var m=Object(O["E"])(v),b=Math.max(Object(O["E"])(_)/2,m);_[0]=v[0]-b,_[2]=v[2]+b,Object(wt["f"])(g,l);var x=Object(O["K"])(y[0],l);x[0]<v[0]&&x[2]<v[2]?y.push([x[0]+m,x[1],x[2]+m,x[3]]):x[0]>v[0]&&x[2]>v[2]&&y.push([x[0]-m,x[1],x[2]-m,x[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==p&&this.renderedRenderOrder_==d&&Object(O["g"])(this.renderedExtent_,_))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var E,S=new z(Object(It["c"])(c,u),_,c,u,e.getDeclutter()),I=Object(Ct["j"])();if(I){for(var C=0,w=y.length;C<w;++C)i.loadFeatures(Object(Ct["l"])(y[C],l),c,I);E=Object(Ct["i"])(I,l)}else for(C=0,w=y.length;C<w;++C)i.loadFeatures(y[C],c,l);var j=Object(It["b"])(c,u),T=function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,c)),i){var r=this.renderFeature(t,j,i,S,E);this.dirty_=this.dirty_||r}}.bind(this),R=Object(Ct["l"])(_,l),A=i.getFeaturesInExtent(R);d&&A.sort(d);for(C=0,w=A.length;C<w;++C)T(A[C]);this.renderedFeatures_=A;var k=S.finish(),F=new vt(_,c,u,i.getOverlaps(),k,e.getRenderBuffer());return this.renderedResolution_=c,this.renderedRevision_=p,this.renderedRenderOrder_=d,this.renderedExtent_=_,this.renderedCenter_=g,this.renderedProjection_=l,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,r){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=0,a=i.length;s<a;++s)o=Object(It["d"])(n,t,i[s],e,this.boundHandleStyleImageChange_,r)||o;else o=Object(It["d"])(n,t,i,e,this.boundHandleStyleImageChange_,r);return o},e}(H["a"]),Rt=Tt,At=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kt=function(t){function e(e){return t.call(this,e)||this}return At(e,t),e.prototype.createRenderer=function(){return new Rt(this)},e}(l);e["a"]=kt},"4cdf":function(t,e,i){"use strict";var n=i("e269"),r=i("01d4"),o=i("92fa"),s=i("1e8d"),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),h=function(t){function e(e){var i=t.call(this)||this;if(i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener(Object(n["b"])(i.geometryName_),i.handleGeometryChanged_),e)if("function"===typeof e.getSimplifiedGeometry){var r=e;i.setGeometry(r)}else{var o=e;i.setProperties(o)}return i}return a(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(s["c"])(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(s["a"])(t,r["a"].CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?l(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(Object(n["b"])(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(Object(n["b"])(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(n["a"]);function l(t){if("function"===typeof t)return t;var e;if(Array.isArray(t))e=t;else{Object(o["a"])("function"===typeof t.getZIndex,41);var i=t;e=[i]}return function(){return e}}e["a"]=h},5831:function(t,e,i){"use strict";var n=i("e300"),r=i("183a"),o=i("cef7"),s=i("01d4"),a=i("7b4f"),h=i("b55e"),l=i.n(h),c=i("0af5"),u=i("1300"),p=i("38f3"),f=function(){function t(t){this.rbush_=new l.a(t),this.items_={}}return t.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Object(u["c"])(e)]=i},t.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,r=e.length;n<r;n++){var o=t[n],s=e[n],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[n]=a,this.items_[Object(u["c"])(s)]=a}this.rbush_.load(i)},t.prototype.remove=function(t){var e=Object(u["c"])(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},t.prototype.update=function(t,e){var i=this.items_[Object(u["c"])(e)],n=[i.minX,i.minY,i.maxX,i.maxY];Object(c["p"])(n,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){var t=this.rbush_.all();return t.map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},i=this.rbush_.search(e);return i.map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,n=0,r=t.length;n<r;n++)if(i=e(t[n]),i)return i;return i},t.prototype.isEmpty=function(){return Object(p["d"])(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(c["k"])(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),d=f,g=i("ff80"),_=i("6d83"),y={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"},v=i("57cb");function m(t,e){return[[-1/0,-1/0,1/0,1/0]]}var O=i("92fa"),b=i("9f5e"),x=i("1e8d"),E={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},S=!1;function I(t,e,i,n){return function(r,o,s){var a=new XMLHttpRequest;a.open("GET","function"===typeof t?t(r,o,s):t,!0),e.getType()==E.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.withCredentials=S,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var o=e.getType(),h=void 0;o==E.JSON||o==E.TEXT?h=a.responseText:o==E.XML?(h=a.responseXML,h||(h=(new DOMParser).parseFromString(a.responseText,"application/xml"))):o==E.ARRAY_BUFFER&&(h=a.response),h?i.call(this,e.readFeatures(h,{extent:r,featureProjection:s}),e.readProjection(h)):n.call(this)}else n.call(this)}.bind(this),a.onerror=function(){n.call(this)}.bind(this),a.send()}}function C(t,e){return I(t,e,(function(t,e){var i=this;"function"===typeof i.addFeatures&&i.addFeatures(t)}),v["c"])}var w=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),j=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return w(e,t),e}(o["a"]),T=function(t){function e(e){var i=this,r=e||{};i=t.call(this,{attributions:r.attributions,projection:void 0,state:_["a"].READY,wrapX:void 0===r.wrapX||r.wrapX})||this,i.loader_=v["c"],i.format_=r.format,i.overlaps_=void 0===r.overlaps||r.overlaps,i.url_=r.url,void 0!==r.loader?i.loader_=r.loader:void 0!==i.url_&&(Object(O["a"])(i.format_,7),i.loader_=C(i.url_,i.format_)),i.strategy_=void 0!==r.strategy?r.strategy:m;var o,s,a=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.featuresRtree_=a?new d:null,i.loadedExtentsRtree_=new d,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(r.features)?s=r.features:r.features&&(o=r.features,s=o.getArray()),a||void 0!==o||(o=new n["a"](s)),void 0!==s&&i.addFeaturesInternal(s),void 0!==o&&i.bindFeaturesCollection_(o),i}return w(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(u["c"])(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new j(y.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(x["a"])(e,s["a"].CHANGE,this.handleFeatureChange_,this),Object(x["a"])(e,a["a"].PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(Object(O["a"])(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],n=[],r=0,o=t.length;r<o;r++){var s=t[r],a=Object(u["c"])(s);this.addToIndex_(a,s)&&i.push(s)}r=0;for(var h=i.length;r<h;r++){s=i[r],a=Object(u["c"])(s);this.setupChangeEvents_(a,s);var l=s.getGeometry();if(l){var c=l.getExtent();e.push(c),n.push(s)}else this.nullGeometryFeatures_[a]=s}this.featuresRtree_&&this.featuresRtree_.load(e,n);r=0;for(var p=i.length;r<p;r++)this.dispatchEvent(new j(y.ADDFEATURE,i[r]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(y.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(y.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(r["a"].ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(r["a"].REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){var i=this.featureChangeKeys_[e];i.forEach(x["c"])}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var r=new j(y.CLEAR);this.dispatchEvent(r),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){var n=i.getGeometry();return n.intersectsCoordinate(t)?e(i):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(i){var n=i.getGeometry();if(n.intersectsExtent(t)){var r=e(i);if(r)return r}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(p["d"])(this.nullGeometryFeatures_)||Object(b["b"])(t,Object(p["c"])(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],r=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],h=e||v["b"];return this.featuresRtree_.forEachInExtent(a,(function(t){if(h(t)){var e=t.getGeometry(),l=s;if(s=e.closestPointXY(i,n,o,s),s<l){r=t;var c=Math.sqrt(s);a[0]=i-c,a[1]=n-c,a[2]=i+c,a[3]=n+c}}})),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=Object(u["c"])(e),n=e.getGeometry();if(n){var r=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var o=e.getId();if(void 0!==o){var s=o.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new j(y.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(u["c"])(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(p["d"])(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var n=this.loadedExtentsRtree_,r=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var a=r[t],h=n.forEachInExtent(a,(function(t){return Object(c["g"])(t.extent,a)}));h||(s.loader_.call(s,a,e,i),n.insert(a,{extent:a.slice()}),s.loading=s.loader_!==v["c"])},s=this,a=0,h=r.length;a<h;++a)o(a,h)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,(function(i){if(Object(c["p"])(i.extent,t))return e=i,!0})),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=Object(u["c"])(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(u["c"])(t);this.featureChangeKeys_[e].forEach(x["c"]),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new j(y.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Object(O["a"])(this.format_,7),this.setLoader(C(t,this.format_))},e}(g["a"]);e["a"]=T},"661d":function(t,e,i){"use strict";i("9a13")},"66b2":function(t,e,i){},"6c77":function(t,e,i){"use strict";i.d(e,"c",(function(){return h})),i.d(e,"a",(function(){return c}));var n=i("ce2c"),r=i("83a6"),o=(i("f623"),i("8682")),s=i("92fa"),a=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=u,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"===typeof t?this.geometryFunction_=t:"string"===typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=u,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();function h(t){var e;if("function"===typeof t)e=t;else{var i;if(Array.isArray(t))i=t;else{Object(s["a"])("function"===typeof t.getZIndex,41);var n=t;i=[n]}e=function(){return i}}return e}var l=null;function c(t,e){if(!l){var i=new r["a"]({color:"rgba(255,255,255,0.4)"}),s=new o["a"]({color:"#3399CC",width:1.25});l=[new a({image:new n["a"]({fill:i,stroke:s,radius:5}),fill:i,stroke:s})]}return l}function u(t){return t.getGeometry()}e["b"]=a},"6cbf":function(t,e,i){"use strict";var n=i("01d4"),r=i("82b0"),o={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},s=i("869f"),a=i("ab35"),h=i("5c38"),l=i("92fa"),c=i("0ec0"),u=i("0999"),p=i("3c22"),f=i("6611"),d=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),g=null,_=function(t){function e(e,i,n,r,o,s){var a=t.call(this)||this;return a.hitDetectionImage_=null,a.image_=e||new Image,null!==r&&(a.image_.crossOrigin=r),a.canvas_={},a.color_=s,a.unlisten_=null,a.imageState_=o,a.size_=n,a.src_=i,a.tainted_,a}return d(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===s["a"].LOADED){g||(g=Object(u["a"])(1,1)),g.drawImage(this.image_,0,0);try{g.getImageData(0,0,1,1),this.tainted_=!1}catch(t){g=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(n["a"].CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=s["a"].ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=s["a"].LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=Object(u["a"])(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==s["a"].IDLE){this.imageState_=s["a"].LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Object(f["a"])(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),this.isTainted_()){var n=this.color_;return i.globalCompositeOperation="multiply",i.fillStyle="rgb("+n[0]+","+n[1]+","+n[2]+")",i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="destination-in",void i.drawImage(this.image_,0,0)}for(var r=i.getImageData(0,0,e.width,e.height),o=r.data,s=this.color_[0]/255,a=this.color_[1]/255,h=this.color_[2]/255,l=0,c=o.length;l<c;l+=4)o[l]*=s,o[l+1]*=a,o[l+2]*=h;i.putImageData(r,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(c["a"]);function y(t,e,i,n,r,o){var s=p["a"].get(e,n,o);return s||(s=new _(t,e,i,n,r,o),p["a"].set(e,n,o,s)),s}var v=i("1300"),m=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O=function(t){function e(e){var i=this,n=e||{},a=void 0!==n.opacity?n.opacity:1,c=void 0!==n.rotation?n.rotation:0,u=void 0!==n.scale?n.scale:1,p=void 0!==n.rotateWithView&&n.rotateWithView;i=t.call(this,{opacity:a,rotation:c,scale:u,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:p})||this,i.anchor_=void 0!==n.anchor?n.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:o.TOP_LEFT,i.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:r["a"].FRACTION,i.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:r["a"].FRACTION,i.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var f=void 0!==n.img?n.img:null,d=void 0!==n.imgSize?n.imgSize:null,g=n.src;Object(l["a"])(!(void 0!==g&&f),4),Object(l["a"])(!f||f&&d,5),void 0!==g&&0!==g.length||!f||(g=f.src||Object(v["c"])(f)),Object(l["a"])(void 0!==g&&g.length>0,6);var _=void 0!==n.src?s["a"].IDLE:s["a"].LOADED;return i.color_=void 0!==n.color?Object(h["a"])(n.color):null,i.iconImage_=y(f,g,d,i.crossOrigin_,_,i.color_),i.offset_=void 0!==n.offset?n.offset:[0,0],i.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:o.TOP_LEFT,i.origin_=null,i.size_=void 0!==n.size?n.size:null,i}return m(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==r["a"].FRACTION||this.anchorYUnits_==r["a"].FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==r["a"].FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==r["a"].FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=o.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=o.TOP_RIGHT&&this.anchorOrigin_!=o.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=o.BOTTOM_LEFT&&this.anchorOrigin_!=o.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=o.TOP_LEFT){var i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),this.offsetOrigin_!=o.TOP_RIGHT&&this.offsetOrigin_!=o.BOTTOM_RIGHT||(t[0]=n[0]-i[0]-t[0]),this.offsetOrigin_!=o.BOTTOM_LEFT&&this.offsetOrigin_!=o.BOTTOM_RIGHT||(t[1]=n[1]-i[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(n["a"].CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(n["a"].CHANGE,t)},e}(a["a"]);e["a"]=O},8295:function(t,e,i){"use strict";var n=i("83a6"),r=i("29f6"),o=i("345d"),s="#333",a=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Object(o["c"])(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new n["a"]({color:s}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:r["a"].POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Object(o["c"])(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();e["a"]=a},"82b0":function(t,e,i){"use strict";e["a"]={FRACTION:"fraction",PIXELS:"pixels"}},"83a6":function(t,e,i){"use strict";var n=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}();e["a"]=n},8682:function(t,e,i){"use strict";var n=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();e["a"]=n},"9a13":function(t,e,i){},ab35:function(t,e,i){"use strict";var n=i("1300"),r=i("345d"),o=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Object(r["c"])(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return Object(n["b"])()},t.prototype.getImage=function(t){return Object(n["b"])()},t.prototype.getHitDetectionImage=function(){return Object(n["b"])()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return Object(n["b"])()},t.prototype.getImageSize=function(){return Object(n["b"])()},t.prototype.getHitDetectionImageSize=function(){return Object(n["b"])()},t.prototype.getOrigin=function(){return Object(n["b"])()},t.prototype.getSize=function(){return Object(n["b"])()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Object(r["c"])(t)},t.prototype.listenImageChange=function(t){Object(n["b"])()},t.prototype.load=function(){Object(n["b"])()},t.prototype.unlistenImageChange=function(t){Object(n["b"])()},t}();e["a"]=o},b046:function(t,e,i){"use strict";var n=i("7a23");function r(t,e,i,r,o,s){const a=Object(n["resolveComponent"])("viMap"),h=Object(n["resolveComponent"])("Button"),l=Object(n["resolveComponent"])("Modal");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{title:s.title,modelValue:s.showModal,"onUpdate:modelValue":e[2]||(e[2]=t=>s.showModal=t),width:1e3,"class-name":"vertical-center-modal singleUserMap"},{footer:Object(n["withCtx"])(()=>[i.isEdit?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createVNode"])(h,{type:"text",onClick:e[0]||(e[0]=t=>s.showModal=!1)},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("取消")]),_:1}),Object(n["createVNode"])(h,{type:"primary",onClick:e[1]||(e[1]=e=>t.$emit("confirm",o.coordinate))},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("确定")]),_:1})],64)):(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:1,type:"primary",onClick:s.toMapNavigation},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("去导航")]),_:1},8,["onClick"]))]),default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(a,{onOnMount:s.onMount,class:"map"},null,8,["onOnMount"])]),_:1},8,["title","modelValue"])}var o=i("2af9"),s=i("3e6b"),a=i("5831"),h=i("4cdf"),l=i("6c77"),c=i("6cbf"),u=i("d051"),p=i("f403"),f=i("e47c"),d=i.n(f),g=i("ed08"),_={name:"singleUserMap",components:{viMap:o["h"]},props:{modelValue:{type:Boolean,default:!1},curRow:{type:Object,default(){return{}}},isEdit:{type:Boolean,default:!1}},data(){return{map:null,vectorSource:null,coordinate:[]}},computed:{showModal:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},title(){return`${this.isEdit?"点击/拖拽选择":"查看"} ${this.curRow.name} 定位`}},watch:{showModal(t){t&&this.drawPoint(this.curRow,!0)}},methods:{drawPoint({longitude:t,latitude:e},i){if(this.vectorSource.clear(),!t||!e)return void this.map.getView().setCenter(window.center);this.coordinate=[+t.toFixed(6),+e.toFixed(6)];const n=new h["a"]({geometry:new p["a"](this.coordinate)});this.vectorSource.addFeature(n),i&&this.map.getView().setCenter(this.coordinate)},onMount(t){this.map=t,this.vectorSource=new a["a"];const e=new s["a"]({source:this.vectorSource,style:()=>new l["b"]({image:new c["a"]({src:d.a,anchor:[.5,1]})})});if(this.map.addLayer(e),this.isEdit){this.map.on("singleclick",t=>{const[e,i]=t.coordinate;this.drawPoint({longitude:e,latitude:i})});const t=new u["a"]({layers:[e]});this.map.addInteraction(t),t.on("translateend",t=>{const[e,i]=t.features.array_[0].getGeometry().flatCoordinates;this.coordinate=[+e.toFixed(6),+i.toFixed(6)]})}},toMapNavigation(){const t=Object(g["c"])(this.curRow);if(!t)return this.$Message.error("未找到定位");window.open(t,"_self")}}},y=(i("661d"),i("bba2"),i("6b0d")),v=i.n(y);const m=v()(_,[["render",r],["__scopeId","data-v-2bb8c7b0"]]);e["a"]=m},b116:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACyElEQVRYR82WP2gUQRTGv7eHvYLcxWi82SAkCDaSJhHRFMbGxEotVMTGUhS1MLebXLxNLIxoWisRA6KNXmz8AwmCSSFoI5KA5vaMhJuNYArb7JM1OZHNzs7uBYnbznvv++2bN98MYZM/Squ/fdjdn2HuAVEf+2ghwi5mfCMDC2AurxC9/F4Q75PWTQyQG6keg48LAPfqi9MEDNyT/fnnuthEAFmn8phAJ3TFwusMfuJZ5sm4PC1AznE5rXA4XlpCqRML0DTsjjLjykYBiHC7VhBXo+ooAVb3nCc2Kv4n36DeqJlQAzjVcrKBS4pIE9LK94WjIwGyI24n+ZhOUHqcmT8T0R4Ap3XxbKDL6xczf8dFAuRK1REQX4+dXubumm1O1WOaSpXDTDQZC8F0U9r5fj3AsDsNRqeqWIb99kW7dS683lyab1shY1YJQZiRBdGlBciW3IXA4aIK6c52nGcEjunZokULEHf2mXnIs82i6i+zpUqRiAZV62FPiB5Cx50loE1RZFxa4oxKIOe4D1UDycCcZ4l2fQdKlWfBZaMQWZaW2BYD8APA1sh15rK0zeN6AKd6B+BLKhEmKnqF/FB4Xdd+gO5KK39ZD5DEBYkWmf23YHwCYS+RcQDMzbHHMMIN/08nDP5i0++CAKLJcW8xEHmL6Ww3tM+jNUtci8pJ8B6ovgC4J41gKPa1tMQRVb4e4MbCPhgrr4JdaQBiyfdxdGlAfGgYIEjMOvNnCcaDtABEfL5WMO/H5Wk7UE9OPQ/MY9I2lV5Sr5sY4PfJcBLPw5S0RHeSjqUCWIVwa5p5WAYZB2Vh98d/ArDD+dLhI/NOadO+f84baE08L6k7sNqFykWAxtZDrPd6XRcaAliDeATQqboAg994lnlIJxhebxhgDeIrQMEL52eGt3Qs2jvXPdN0QBsCWBvKSWYe82zzqU6sIStupGianF/sHQ4wqSJAzQAAAABJRU5ErkJggg=="},b55e:function(t,e,i){(function(e,i){t.exports=i()})(0,(function(){"use strict";function t(t,i,r,o,s){e(t,i,r||0,o||t.length-1,s||n)}function e(t,n,r,o,s){while(o>r){if(o-r>600){var a=o-r+1,h=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(h-a/2<0?-1:1),p=Math.max(r,Math.floor(n-h*c/a+u)),f=Math.min(o,Math.floor(n+(a-h)*c/a+u));e(t,n,p,f,s)}var d=t[n],g=r,_=o;i(t,r,n),s(t[o],d)>0&&i(t,r,o);while(g<_){i(t,g,_),g++,_--;while(s(t[g],d)<0)g++;while(s(t[_],d)>0)_--}0===s(t[r],d)?i(t,r,_):(_++,i(t,_,o)),_<=n&&(r=_+1),n<=_&&(o=_-1)}}function i(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,r){r||(r=y(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<i;o++){var s=t.children[o];h(r,t.leaf?n(s):s)}return r}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function d(t,e){var i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-i)*Math.max(0,o-n)}function g(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function _(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,i,n,r,o){var s=[i,n];while(s.length)if(n=s.pop(),i=s.pop(),!(n-i<=r)){var a=i+Math.ceil((n-i)/r/2)*r;t(e,a,i,n,o),s.push(i,a,a,n)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,i=[];if(!_(t,e))return i;var n=this.toBBox,r=[];while(e){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?n(s):s;_(t,a)&&(e.leaf?i.push(s):g(t,a)?this._all(s,i):r.push(s))}e=r.pop()}return i},r.prototype.collides=function(t){var e=this.data;if(!_(t,e))return!1;var i=[];while(e){for(var n=0;n<e.children.length;n++){var r=e.children[n],o=e.leaf?this.toBBox(r):r;if(_(t,o)){if(e.leaf||g(t,o))return!0;i.push(r)}}e=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=y([]),this},r.prototype.remove=function(t,e){if(!t)return this;var i,n,r,s=this.data,a=this.toBBox(t),h=[],l=[];while(s||h.length){if(s||(s=h.pop(),n=h[h.length-1],i=l.pop(),r=!0),s.leaf){var c=o(t,s.children,e);if(-1!==c)return s.children.splice(c,1),h.push(s),this._condense(h),this}r||s.leaf||!g(s,a)?n?(i++,s=n.children[i],r=!1):s=null:(h.push(s),l.push(i),i=0,n=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){var i=[];while(t)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},r.prototype._build=function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return r=y(t.slice(e,i+1)),s(r,this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),r=y([]),r.leaf=!1,r.height=n;var h=Math.ceil(o/a),l=h*Math.ceil(Math.sqrt(a));v(t,e,i,l,this.compareMinX);for(var c=e;c<=i;c+=l){var u=Math.min(c+l-1,i);v(t,c,u,h,this.compareMinY);for(var p=c;p<=u;p+=h){var f=Math.min(p+h-1,u);r.children.push(this._build(t,p,f,n-1))}}return s(r,this.toBBox),r},r.prototype._chooseSubtree=function(t,e,i,n){while(1){if(n.push(e),e.leaf||n.length-1===i)break;for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var h=e.children[a],l=u(h),c=f(t,h)-l;c<o?(o=c,r=l<r?l:r,s=h):c===o&&l<r&&(r=l,s=h)}e=s||e.children[0]}return e},r.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(n,this.data,e,r);o.children.push(t),h(o,n);while(e>=0){if(!(r[e].children.length>this._maxEntries))break;this._split(r,e),e--}this._adjustParentBBoxes(n,r,e)},r.prototype._split=function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),a=y(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},r.prototype._splitRoot=function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,i){for(var n,r=1/0,o=1/0,s=e;s<=i-e;s++){var h=a(t,0,s,this.toBBox),l=a(t,s,i,this.toBBox),c=d(h,l),p=u(h)+u(l);c<r?(r=c,n=s,o=p<o?p:o):c===r&&p<o&&(o=p,n=s)}return n||i-e},r.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:c,o=this._allDistMargin(t,e,i,n),s=this._allDistMargin(t,e,i,r);o<s&&t.children.sort(n)},r.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var r=this.toBBox,o=a(t,0,e,r),s=a(t,i-e,i,r),l=p(o)+p(s),c=e;c<i-e;c++){var u=t.children[c];h(o,t.leaf?r(u):u),l+=p(o)}for(var f=i-e-1;f>=e;f--){var d=t.children[f];h(s,t.leaf?r(d):d),l+=p(s)}return l},r.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)h(e[n],t)},r.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():s(t[e],this.toBBox)},r}))},bba2:function(t,e,i){"use strict";i("fec2")},c64b:function(t,e,i){"use strict";var n=i("7a23"),r=i("b116"),o=i.n(r);const s={class:"flex-ac"},a={key:0};function h(t,e,i,r,h,l){const c=Object(n["resolveComponent"])("viInput"),u=Object(n["resolveComponent"])("FormItem"),p=Object(n["resolveComponent"])("Form"),f=Object(n["resolveComponent"])("single-user-map"),d=Object(n["resolveComponent"])("Button"),g=Object(n["resolveComponent"])("Modal");return Object(n["openBlock"])(),Object(n["createBlock"])(g,{title:l.title,modelValue:l.showModal,"onUpdate:modelValue":e[6]||(e[6]=t=>l.showModal=t),width:400,"class-name":"vertical-center-modal"},{footer:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{type:"text",onClick:e[5]||(e[5]=t=>l.showModal=!1)},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("取消")]),_:1}),Object(n["createVNode"])(d,{type:"primary",onClick:l.submit,loading:h.loading},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("确定")]),_:1},8,["onClick","loading"])]),default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,{ref:"form",model:h.formData,rules:h.rules,"label-width":90,onKeydown:Object(n["withKeys"])(l.submit,["enter"]),class:"plr"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{label:"客户名称:",prop:"name"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{modelValue:h.formData.name,"onUpdate:modelValue":e[0]||(e[0]=t=>h.formData.name=t)},null,8,["modelValue"])]),_:1}),Object(n["createVNode"])(u,{label:"联系电话:",prop:"phone"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{modelValue:h.formData.phone,"onUpdate:modelValue":e[1]||(e[1]=t=>h.formData.phone=t)},null,8,["modelValue"])]),_:1}),Object(n["createVNode"])(u,{label:"备注:",prop:"remarks"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{modelValue:h.formData.remarks,"onUpdate:modelValue":e[2]||(e[2]=t=>h.formData.remarks=t),type:"textarea"},null,8,["modelValue"])]),_:1}),Object(n["createVNode"])(u,{label:"定位:"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("img",{src:o.a,onClick:e[3]||(e[3]=t=>h.showMapModal=!0),class:"pointer mr-10"}),h.formData.longitude&&h.formData.latitude?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",a,Object(n["toDisplayString"])(h.formData.longitude)+","+Object(n["toDisplayString"])(h.formData.latitude),1)):Object(n["createCommentVNode"])("",!0)])]),_:1})]),_:1},8,["model","rules","onKeydown"]),Object(n["createVNode"])(f,{modelValue:h.showMapModal,"onUpdate:modelValue":e[4]||(e[4]=t=>h.showMapModal=t),curRow:h.formData,isEdit:"",onConfirm:l.changeLonLat},null,8,["modelValue","curRow","onConfirm"])]),_:1},8,["title","modelValue"])}i("d9e2");var l=i("eeb9"),c=i("2410"),u=i.n(c),p=i("b046"),f={name:"addUserModal",components:{singleUserMap:p["a"]},props:{modelValue:{type:Boolean,default:!1},detailData:{type:Object,default(){return{}}},showCount:{type:Boolean,default:!1}},data(){const t=async(t,e,i)=>{if(e&&this.detailData.name!==this.formData.name){const{data:t}=await Object(l["A"])({name:e})||{};if(t)return i(new Error("该客户名称已存在"))}i()};return{formData:{},rules:{name:[{required:!0,message:"请输入客户名称"},{validator:t,trigger:"blur"}]},loading:!1,showMapModal:!1}},computed:{title(){return(this.detailData.userId?"编辑":"新增")+"客户"},showModal:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t),t||this.$emit("close")}}},watch:{detailData:{deep:!0,handler(){this.$refs.form.resetFields(),this.formData=u()(this.detailData)}}},methods:{changeLonLat([t,e]){this.formData={...this.formData,longitude:t,latitude:e},this.showMapModal=!1},submit(){this.loading=!0,this.$refs.form.validate(async t=>{if(!t)return this.$Message.error("数据校验不通过"),void(this.loading=!1);try{const{_index:t,_rowKey:e,count:i,...n}=this.formData,{data:r}=await Object(l["y"])(n)||{};r&&(this.$Message.success(this.title+"成功"),this.$emit("save",{...this.formData}),this.$refs.form.resetFields(),this.showModal=!1)}catch(e){this.$Message.error("请求失败："+(e.message||e))}finally{this.loading=!1}})}}},d=i("6b0d"),g=i.n(d);const _=g()(f,[["render",h]]);e["a"]=_},ce2c:function(t,e,i){"use strict";var n=i("869f"),r=i("ab35"),o=i("5c38"),s=i("e98d"),a=i("0999"),h=i("ddea"),l=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=function(t){function e(e){var i=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return i=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this,i.canvas_={},i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return l(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionCanvas_){var t=this.createRenderOptions();this.createHitDetectionCanvas_(t)}return this.hitDetectionCanvas_},e.prototype.getImage=function(t){if(!this.canvas_[t||1]){var e=this.createRenderOptions(),i=Object(a["a"])(e.size*t||1,e.size*t||1);this.draw_(e,i,0,0,t||1),this.canvas_[t||1]=i.canvas}return this.canvas_[t||1]},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return n["a"].LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.createRenderOptions=function(){var t,e=h["e"],i=h["h"],n=0,r=null,o=0,a=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=h["l"]),t=Object(s["a"])(t),a=this.stroke_.getWidth(),void 0===a&&(a=h["i"]),r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),i=this.stroke_.getLineJoin(),void 0===i&&(i=h["h"]),e=this.stroke_.getLineCap(),void 0===e&&(e=h["e"]),n=this.stroke_.getMiterLimit(),void 0===n&&(n=h["j"]));var l=2*(this.radius_+a)+1;return{strokeStyle:t,strokeWidth:a,size:l,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:i,miterLimit:n}},e.prototype.render=function(){var t=this.createRenderOptions(),e=Object(a["a"])(t.size,t.size);this.draw_(t,e,0,0,1),this.canvas_[1]=e.canvas;var i=e.canvas.width,n=i,r=this.getDisplacement();this.hitDetectionImageSize_=[t.size,t.size],this.createHitDetectionCanvas_(t),this.anchor_=[i/2-r[0],i/2+r[1]],this.size_=[i,i],this.imageSize_=[n,n]},e.prototype.draw_=function(t,e,i,n,r){var o,a,l;e.setTransform(r,0,0,r,0,0),e.translate(i,n),e.beginPath();var c=this.points_;if(c===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(c*=2),o=0;o<=c;o++)a=2*o*Math.PI/c-Math.PI/2+this.angle_,l=o%2===0?this.radius_:u,e.lineTo(t.size/2+l*Math.cos(a),t.size/2+l*Math.sin(a))}if(this.fill_){var p=this.fill_.getColor();null===p&&(p=h["c"]),e.fillStyle=Object(s["a"])(p),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionCanvas_=this.getImage(1),this.fill_){var e=this.fill_.getColor(),i=0;if("string"===typeof e&&(e=Object(o["a"])(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var n=Object(a["a"])(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.translate(i,n),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(r*=2);var s=void 0,a=void 0,l=void 0;for(s=0;s<=r;s++)l=2*s*Math.PI/r-Math.PI/2+this.angle_,a=s%2===0?this.radius_:o,e.lineTo(t.size/2+a*Math.cos(l),t.size/2+a*Math.sin(l))}e.fillStyle=h["c"],e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(r["a"]),u=c,p=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),f=function(t){function e(e){var i=this,n=e||{};return i=t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this,i}return p(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(u);e["a"]=f},d051:function(t,e,i){"use strict";var n=i("e300"),r=i("cef7"),o=i("bf62"),s=i("4105"),a=i("57cb"),h=i("e269"),l=i("9f5e"),c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),u={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},p=function(t){function e(e,i,n,r,o){var s=t.call(this,e)||this;return s.features=i,s.coordinate=n,s.startCoordinate=r,s.mapBrowserEvent=o,s}return c(e,t),e}(r["a"]),f=function(t){function e(e){var i,n=this,r=e||{};if(n=t.call(this,r)||this,n.lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==r.features?r.features:null,r.layers)if("function"===typeof r.layers)i=r.layers;else{var s=r.layers;i=function(t){return Object(l["c"])(s,t)}}else i=a["b"];return n.layerFilter_=i,n.filter_=r.filter?r.filter:a["b"],n.hitTolerance_=r.hitTolerance?r.hitTolerance:0,n.lastFeature_=null,n.addEventListener(Object(h["b"])(o["a"].ACTIVE),n.handleActiveChanged_),n}return c(e,t),e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new n["a"]([this.lastFeature_]);return this.dispatchEvent(new p(u.TRANSLATESTART,e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new n["a"]([this.lastFeature_]);return this.dispatchEvent(new p(u.TRANSLATEEND,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],r=e[1]-this.lastCoordinate_[1],o=this.features_||new n["a"]([this.lastFeature_]);o.forEach((function(t){var e=t.getGeometry();e.translate(i,r),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new p(u.TRANSLATING,o,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||Object(l["c"])(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();if((!e||!i)&&(e=e||t,e)){var n=e.getViewport();n.classList.remove("ol-grab","ol-grabbing")}},e}(s["b"]);e["a"]=f},e47c:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACvElEQVRYR7WXP2gUQRTGv3eb3TWIYJGAIdlFkXi7GBSMlZJgIQYEEURJJbHQaCMiFunUa8UihSAqYkijjQgBEYMYFcFGiyDk7lAJN5eoRG01t5u7J5uL4bzbP3OX3Wnnve/77cybN7OEFsenbeh0ddUgBrWT+nV74fe3VqSomaQ5QxtOgQcBnAJRZ30uARMVxrRddB7K6koBZE11lECjAPplhBn0hogyVmH5ZVR8JEDO1B4BGI4S8ptnYNIWzkhYbihAztSeAjjainltjiWcQJ/AibypXWPg+kbNq/l02RKlcT8tX4CsoR8h4ufxmFdVVoDdfcKZ8yncRpucqU0COB0nAIDHlnBORgJku/VdpHA+ZvPqRoBH0sL1Pm59NGxB1tCvEPHNRAAIT9IF50QoQM5QZ0B0KAkAT7P+RDSsQM7UPgPYmRSAUlaM3sU/C//0/QCWAehJATBVDtiFlXfBAIa65Nfn4wLiCvbYC87HsBX4AGBfXIb1Olx2OuxF/AoEyJvaAwbOJASwaAmnJ+oUXADR7SQAGMjYwvmvvTf2AVPtJ9D7ZAB4vy1cb4uDG5E3kzf1Owz27v/YBoHupkXpfL2g72WU36Hu5XLqBcAd8RDQT1Iqh9Pz7qwUgBeUNdVzHnUcAN5q2sK956cV8SBRxwG6tBEIZr5lF92LQRqRT7KsqU0RcKxFiGlLOENhuZEAs93tPbpSfgagr0mIAhQasuZLoVd7JMDqqTDaBphSHsRmaQim41axNBUVLwWwVpQjBJqIElybH7OEc0MmVhqgCqFlCLgaKsx03yqWzsqYezFNAVSblDbJge9FemuJ0oCseUsAM0Bbl6m/AvhgrRGBl1hJDUYVnXQjCvuKLz16r5vi1wC61uMkiy4WgNV6MPQhIvZ+27YCkC662AA8oVwHtiht2NT7HT+a2ffa2L/0LdAhIK9hBgAAAABJRU5ErkJggg=="},fec2:function(t,e,i){}}]);
//# sourceMappingURL=chunk-13deca7e.0ddc1cba.js.map