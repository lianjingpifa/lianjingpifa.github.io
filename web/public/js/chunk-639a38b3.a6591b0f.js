(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-639a38b3"],{8451:function(e,t,a){"use strict";var l=a("ca5c");t["a"]=l["a"]},"9ed6":function(e,t,a){"use strict";a.r(t);var l=a("8451"),o=a("5201"),c=(a("d9e2"),a("7a23")),r=a("ed08"),n=a("eeb9"),s=a("6605");const u=e=>(Object(c["pushScopeId"])("data-v-2f4e429e"),e=e(),Object(c["popScopeId"])(),e),d={class:"login"},i={key:0,class:"login-content"},b=u(()=>Object(c["createElementVNode"])("p",{class:"login-name"},"登录",-1)),m={class:"login-tip"},p={key:1,class:"login-content"},O=u(()=>Object(c["createElementVNode"])("p",{class:"login-name"},"注册",-1)),j={key:2,class:"login-content"},h=u(()=>Object(c["createElementVNode"])("p",{class:"login-name"},"重置密码",-1));var V={__name:"index",setup(e){const t=Object(s["c"])(),a=Object(s["d"])(),u=Object(c["ref"])(),V=Object(c["ref"])({});function w(e,t,a){t!==V.value.password?a(new Error("两次输入密码不一致")):a()}const v={userName:{required:!0,message:"请输入用户名"},phone:{required:!0,message:"请输入联系电话"},password:{required:!0,message:"请输入密码"},confirmPassword:[{required:!0,message:"请输入密码"},{validator:w,trigger:"blur"}]},f=Object(c["computed"])(()=>t.query.wxid),k=Object(c["ref"])("1");function g(){u.value.validate(async e=>{if(!e)return window.$Message.error("数据校验不通过");try{await Object(r["g"])({...V.value,loginType:k.value}),t.query.realName&&a.replace({name:t.query.realName,query:JSON.parse(t.query.query),params:JSON.parse(t.query.params)})}catch(l){window.$Message.error("登录失败："+(l.message||l))}})}const N=Object(c["ref"])(!1);function C(){u.value.validate(async e=>{if(!e)return window.$Message.error("数据校验不通过");try{o["a"].show();const{data:e}=await Object(n["E"])({name:t.query.wxid,wxid:t.query.wxid,nickName:V.value.nickName||t.query.wxid,phone:V.value.phone,remarks:V.value.remarks,password:Object(r["j"])(V.value.password),status:"2",power:"99"})||{};e&&(window.$Message.success("注册成功"),N.value=!1)}catch(a){window.$Message.error("注册失败："+(a.message||a))}finally{o["a"].hide()}})}const x=Object(c["ref"])(!1);function y(){u.value.validate(async e=>{if(!e)return window.$Message.error("数据校验不通过");try{o["a"].show();const{data:e}=await Object(n["F"])({wxid:t.query.wxid,phone:V.value.phone,password:Object(r["j"])(V.value.password)})||{};e&&(window.$Message.success("操作成功"),x.value=!1)}catch(a){window.$Message.error("操作失败："+(a.message||a))}finally{o["a"].hide()}})}const B=Object(c["ref"])(!1),I=Object(c["ref"])(!1);function E(e,t){t?localStorage.setItem(e,"1"):(localStorage.removeItem(e),"remember"===e&&localStorage.removeItem("token"))}return Object(c["onMounted"])(()=>{B.value="1"===localStorage.getItem("remember"),I.value="1"===localStorage.getItem("autoLogin");const e=sessionStorage.getItem("token")||localStorage.getItem("token");if(B.value&&e){var a;const[t,l]=null===(a=Object(r["b"])(e))||void 0===a?void 0:a.split("/");t&&l&&(V.value={userName:t,password:l})}t.query.wxid?(k.value="1",V.value.wxid=t.query.wxid,sessionStorage.setItem("wxid",t.query.wxid)):k.value="2",I.value&&e&&!t.query.from&&Object(c["nextTick"])(()=>{g()})}),(e,t)=>{const a=Object(c["resolveComponent"])("Radio"),o=Object(c["resolveComponent"])("RadioGroup"),r=Object(c["resolveComponent"])("FormItem"),n=Object(c["resolveComponent"])("viInput"),s=Object(c["resolveComponent"])("Form"),w=Object(c["resolveComponent"])("Button");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",d,[N.value||x.value?N.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",p,[O,Object(c["createVNode"])(s,{ref_key:"form",ref:u,model:V.value,rules:v,"label-width":86},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(r,{label:"用户名:",prop:"nickName"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.nickName,"onUpdate:modelValue":t[11]||(t[11]=e=>V.value.nickName=e)},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(r,{label:"联系电话:",prop:"phone"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.phone,"onUpdate:modelValue":t[12]||(t[12]=e=>V.value.phone=e),placeholder:"用于重置密码"},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(r,{label:"备注:",prop:"remarks"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.remarks,"onUpdate:modelValue":t[13]||(t[13]=e=>V.value.remarks=e),type:"textarea",placeholder:"用于商家审批"},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(r,{label:"密码:",prop:"password"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.password,"onUpdate:modelValue":t[14]||(t[14]=e=>V.value.password=e),type:"password",placeholder:"请输入密码",onOnEnter:g},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(r,{label:"确认密码:",prop:"confirmPassword"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.confirmPassword,"onUpdate:modelValue":t[15]||(t[15]=e=>V.value.confirmPassword=e),type:"password",placeholder:"请确认密码",onOnEnter:g},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),Object(c["createVNode"])(w,{onClick:C,long:"",type:"success"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("注册")]),_:1}),Object(c["createElementVNode"])("p",{onClick:t[16]||(t[16]=e=>N.value=!1),class:"vi-link-pointer tc mt-10"},"已有账号，点击登录")])):x.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",j,[h,Object(c["createVNode"])(s,{ref_key:"form",ref:u,model:V.value,rules:v,"label-width":86},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(r,{label:"联系电话:",prop:"phone"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.phone,"onUpdate:modelValue":t[17]||(t[17]=e=>V.value.phone=e)},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(r,{label:"新密码:",prop:"password"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.password,"onUpdate:modelValue":t[18]||(t[18]=e=>V.value.password=e),type:"password",placeholder:"请输入新密码",onOnEnter:g},null,8,["modelValue"])]),_:1}),Object(c["createVNode"])(r,{label:"确认密码:",prop:"confirmPassword"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.confirmPassword,"onUpdate:modelValue":t[19]||(t[19]=e=>V.value.confirmPassword=e),type:"password",placeholder:"请确认密码",onOnEnter:g},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),Object(c["createVNode"])(w,{onClick:y,long:"",type:"success"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("重置密码")]),_:1}),Object(c["createElementVNode"])("p",{onClick:t[20]||(t[20]=e=>x.value=!1),class:"vi-link-pointer tc mt-10"},"点击登录")])):Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",i,[b,Object(c["createVNode"])(s,{ref_key:"form",ref:u,model:V.value,rules:v,"label-width":76},{default:Object(c["withCtx"])(()=>[f.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createVNode"])(r,{label:"登陆方式:"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(o,{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=e=>k.value=e)},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(a,{label:"1"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("微信号")]),_:1}),Object(c["createVNode"])(a,{label:"2"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("昵称")]),_:1})]),_:1},8,["modelValue"])]),_:1}),"1"===k.value?(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:0,label:"微信号:",prop:"wxid"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.wxid,"onUpdate:modelValue":t[1]||(t[1]=e=>V.value.wxid=e),disabled:""},null,8,["modelValue"])]),_:1})):(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:1,label:"用户名:",prop:"userName"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.userName,"onUpdate:modelValue":t[2]||(t[2]=e=>V.value.userName=e),placeholder:"请输入用户名",onOnEnter:g},null,8,["modelValue"])]),_:1}))],64)):(Object(c["openBlock"])(),Object(c["createBlock"])(r,{key:1,label:"用户名:",prop:"userName"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.userName,"onUpdate:modelValue":t[3]||(t[3]=e=>V.value.userName=e),placeholder:"请输入用户名",onOnEnter:g},null,8,["modelValue"])]),_:1})),Object(c["createVNode"])(r,{label:"密码:",prop:"password"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{modelValue:V.value.password,"onUpdate:modelValue":t[4]||(t[4]=e=>V.value.password=e),type:"password",placeholder:"请输入密码",onOnEnter:g},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),f.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",{key:0,onClick:t[5]||(t[5]=e=>x.value=!0),class:"vi-link-pointer fr"},"忘记密码？")):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",m,[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{modelValue:B.value,"onUpdate:modelValue":t[6]||(t[6]=e=>B.value=e),onOnChange:t[7]||(t[7]=e=>E("remember",e))},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("记住密码")]),_:1},8,["modelValue"]),Object(c["createVNode"])(Object(c["unref"])(l["a"]),{modelValue:I.value,"onUpdate:modelValue":t[8]||(t[8]=e=>I.value=e),onOnChange:t[9]||(t[9]=e=>E("autoLogin",e))},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("自动登录")]),_:1},8,["modelValue"])]),Object(c["createVNode"])(w,{onClick:g,long:"",type:"success"},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("登录")]),_:1}),f.value?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",{key:1,onClick:t[10]||(t[10]=e=>N.value=!0),class:"vi-link-pointer tc mt-10"},"没有账号？点击注册")):Object(c["createCommentVNode"])("",!0)]))])}}},w=(a("f015"),a("6b0d")),v=a.n(w);const f=v()(V,[["__scopeId","data-v-2f4e429e"]]);t["default"]=f},ca5c:function(e,t,a){"use strict";var l=a("7a23");const o=["disabled","value","name"],c=["disabled","checked","name"],r={key:0,class:"ivu-checkbox-label-text"};function n(e,t,a,n,s,u){return Object(l["openBlock"])(),Object(l["createElementBlock"])("label",{class:Object(l["normalizeClass"])(u.wrapClasses)},[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(u.checkboxClasses)},[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(u.innerClasses)},null,2),u.group?Object(l["withDirectives"])((Object(l["openBlock"])(),Object(l["createElementBlock"])("input",{key:0,type:"checkbox",class:Object(l["normalizeClass"])(u.inputClasses),disabled:e.itemDisabled,value:a.label,"onUpdate:modelValue":t[0]||(t[0]=e=>s.model=e),name:a.name,onChange:t[1]||(t[1]=(...e)=>u.change&&u.change(...e)),onFocus:t[2]||(t[2]=(...e)=>u.onFocus&&u.onFocus(...e)),onBlur:t[3]||(t[3]=(...e)=>u.onBlur&&u.onBlur(...e))},null,42,o)),[[l["vModelCheckbox"],s.model]]):(Object(l["openBlock"])(),Object(l["createElementBlock"])("input",{key:1,type:"checkbox",class:Object(l["normalizeClass"])(u.inputClasses),disabled:e.itemDisabled,checked:u.currentValue,name:a.name,onChange:t[4]||(t[4]=(...e)=>u.change&&u.change(...e)),onFocus:t[5]||(t[5]=(...e)=>u.onFocus&&u.onFocus(...e)),onBlur:t[6]||(t[6]=(...e)=>u.onBlur&&u.onBlur(...e))},null,42,c))],2),s.showSlot?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",r,[Object(l["renderSlot"])(e.$slots,"default",{},()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(a.label),1)])])):Object(l["createCommentVNode"])("",!0)],2)}var s=a("694c"),u=a("9836");const d="ivu-checkbox";var i={name:"Checkbox",mixins:[u["a"]],emits:["update:modelValue","on-change"],inject:{CheckboxGroupInstance:{default:null}},props:{disabled:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator(e){return Object(s["h"])(e,["small","large","default"])},default(){const e=Object(l["getCurrentInstance"])().appContext.config.globalProperties;return e.$VIEWUI&&""!==e.$VIEWUI.size?e.$VIEWUI.size:"default"}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{showSlot:!0,focusInner:!1,model:[]}},computed:{wrapClasses(){return[d+"-wrapper",{[d+"-group-item"]:this.group,[d+"-wrapper-checked"]:this.currentValue,[d+"-wrapper-disabled"]:this.itemDisabled,[`${d}-${this.size}`]:!!this.size,[d+"-border"]:this.border}]},checkboxClasses(){return[""+d,{[d+"-checked"]:this.currentValue,[d+"-disabled"]:this.itemDisabled,[d+"-indeterminate"]:this.indeterminate}]},innerClasses(){return[d+"-inner",{[d+"-focus"]:this.focusInner}]},inputClasses(){return d+"-input"},currentValue(){return this.CheckboxGroupInstance?this.CheckboxGroupInstance.modelValue.indexOf(this.label)>=0:this.modelValue===this.trueValue},group(){return!!this.CheckboxGroupInstance}},mounted(){this.CheckboxGroupInstance||(this.showSlot=void 0!==this.$slots.default)},methods:{change(e){if(this.itemDisabled)return!1;const t=e.target.checked,a=t?this.trueValue:this.falseValue;this.$emit("update:modelValue",a),this.group?this.CheckboxGroupInstance.change(this.model):(this.$emit("on-change",a),this.handleFormItemChange("change",a))},onBlur(){this.focusInner=!1},onFocus(){this.focusInner=!0}},watch:{modelValue(e){if(e!==this.trueValue&&e!==this.falseValue)throw"Value should be trueValue or falseValue."},"CheckboxGroupInstance.modelValue":{handler(e){this.model=e||[]},immediate:!0}}},b=a("6b0d"),m=a.n(b);const p=m()(i,[["render",n]]);t["a"]=p},e9b8:function(e,t,a){},f015:function(e,t,a){"use strict";a("e9b8")}}]);