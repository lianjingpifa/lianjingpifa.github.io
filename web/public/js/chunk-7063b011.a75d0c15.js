(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7063b011"],{4183:function(e,t,o){"use strict";o.r(t);var n=o("7a23");const c={class:"mobileHome"},a={class:"home-header"},i={class:"home-footer"},r=["onClick"];function s(e,t,o,s,l,u){const m=Object(n["resolveComponent"])("Icon"),b=Object(n["resolveComponent"])("router-view"),d=Object(n["resolveComponent"])("Badge");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createElementVNode"])("div",a,[u.isHome?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,type:"ios-arrow-back",size:"25",onClick:t[0]||(t[0]=t=>e.$router.back()),class:"vi-header-icon left"})),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(l.routeName)+Object(n["toDisplayString"])("number"==typeof l.total[l.activeMenu]?`（${l.total[l.activeMenu]}）`:""),1)]),Object(n["createVNode"])(b,{class:"home-container"},{default:Object(n["withCtx"])(({Component:e})=>[(Object(n["openBlock"])(),Object(n["createBlock"])(n["KeepAlive"],null,[(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e),{draftCount:l.badge.mobileOrder,onTotal:t[1]||(t[1]=e=>l.total[l.activeMenu]=e)},null,40,["draftCount"]))],1024))]),_:1}),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",i,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.routeList,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t,class:Object(n["normalizeClass"])(["menu-item",{active:l.activeMenu===e.name}]),onClick:t=>u.toPath(e)},[Object(n["createVNode"])(d,{count:l.badge[e.name]||0,"overflow-count":"99",class:"menu-badge"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(m,{type:e.icon},null,8,["type"])]),_:2},1032,["count"]),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.title),1)],10,r))),128))],512),[[n["vShow"],u.isHome]])])}o("14d9"),o("13d5");var l=o("eeb9"),u={name:"mobileHome",data(){return{routeName:"",activeMenu:this.$route.name,routeList:[{title:"商品",name:"mobileGood",icon:"ios-home-outline"},{title:"结账",name:"mobileCashier",icon:"ios-cart-outline"},{title:"订单",name:"mobileOrder",icon:"ios-clipboard-outline"},{title:"客户",name:"mobileUser",icon:"ios-contacts-outline"},{title:"我的",name:"mobileMy",icon:"ios-person-outline"}],badge:{},total:{}}},watch:{$route:{deep:!0,immediate:!0,handler({name:e}){this.activeMenu=e;const t=this.routeList.find(t=>t.name===e)||{};this.routeName=t.title||this.$route.meta.title||this.routeList[0].title}}},computed:{isHome(){return!!this.routeList.find(e=>e.name===this.activeMenu)}},methods:{toPath({name:e}){this.$router.push({name:e})},changeBadge(e){this.badge={...this.badge,...e}},async getDraftCount(){try{const{returnCode:e,data:t}=await Object(l["o"])()||{};0===e&&(this.badge.mobileOrder=t||0)}catch(e){this.$Message.error("获取草稿数量失败："+(e.message||e))}}},mounted(){const e=JSON.parse(sessionStorage.getItem("order")||"[]");this.badge={mobileCashier:e.reduce((e,t)=>e+ +t.count,0)},this.getDraftCount(),this.$EventBus.$on("badge",this.changeBadge),this.$EventBus.$on("saveOrder",this.getDraftCount)},beforeUnmount(){this.$EventBus.$off("badge",this.changeBadge),this.$EventBus.$off("saveOrder",this.getDraftCount)}},m=(o("7009"),o("6b0d")),b=o.n(m);const d=b()(u,[["render",s],["__scopeId","data-v-57488446"]]);t["default"]=d},7009:function(e,t,o){"use strict";o("e64e")},e64e:function(e,t,o){}}]);