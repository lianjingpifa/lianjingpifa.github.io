{"version":3,"sources":["webpack:///./src/views/statistiAnalysis/index.vue?2221","webpack:///./node_modules/clone/clone.js","webpack:///./src/constant/index.js","webpack:///./src/views/statistiAnalysis/index.vue","webpack:///./src/views/statistiAnalysis/option.js","webpack:///./src/views/statistiAnalysis/index.vue?de8f"],"names":["_instanceof","obj","type","nativeMap","nativeSet","nativePromise","Map","_","Set","Promise","clone","parent","circular","depth","prototype","includeNonEnumerable","allParents","allChildren","useBuffer","Buffer","_clone","child","proto","resolve","reject","then","value","err","__isArray","__isRegExp","RegExp","source","__getRegExpFlags","lastIndex","__isDate","Date","getTime","isBuffer","allocUnsafe","length","copy","Error","Object","create","getPrototypeOf","index","indexOf","push","i","forEach","key","keyChild","valueChild","set","entryChild","add","attrs","getOwnPropertyDescriptor","getOwnPropertySymbols","symbols","symbol","descriptor","enumerable","defineProperty","allPropertyNames","getOwnPropertyNames","propertyName","Infinity","__objToStr","o","toString","call","re","flags","global","ignoreCase","multiline","clonePrototype","c","module","exports","TYPE_MAP","1","99","IS_BULK","item","class","_createElementVNode","_createBlock","_component_viLayoutUpDown","up","_withCtx","_createVNode","_component_viSearchForm","$data","searchData","$event","onSearch","$options","getSalesTop","_component_FormItem","label","prop","_component_Select","goodIds","filterable","multiple","placeholder","_createElementBlock","_Fragment","_renderList","allGoods","_component_Option","goodId","name","userIds","allUsers","userId","_component_DatePicker","timeRange","options","down","_hoisted_1","_component_Spin","fix","show","barLoading","_hoisted_2","_hoisted_3","_hoisted_4","_component_RadioGroup","barType","onOnChange","_component_Radio","barSort","clearable","transfer","drawBar","_component_viChart","barOption","onOnMount","addBarInteraction","_hoisted_5","lineLoading","_hoisted_6","_hoisted_7","ref","onWheel","_cache","_ctx","$refs","list","scrollLeft","deltaY","lineData","userMap","_toDisplayString","goodMap","_component_Icon","size","onClick","splice","drawLine","_hoisted_8","_component_Button","getSalesTrend","barData","map","data","lineType","button-style","lineOption","grid","bottom","top","left","right","containLabel","legend","itemWidth","itemHeight","textStyle","fontWeight","fontSize","padding","tooltip","trigger","appendToBody","axisPointer","xAxis","axisLabel","rotate","yAxis","series","barMaxWidth","barMinWidth","position","dataZoom","height","startValue","endValue","zoomOnMouseWheel","moveOnMouseWheel","pos","params","dom","rect","contentSize","viewSize","symbolSize","smooth","components","DatePicker","_DatePicker","viChart","shortcuts","text","startOf","subtract","methods","getParams","startTime","endTime","this","join","format","endOf","returnCode","$Message","error","message","option","citem","count","reverse","chart","on","findIndex","clear","filter","minDate","maxDate","_item$data$","_item$data","date","dateList","time","find","concat","getAllGoods","getAllUsers","mounted","created","getGoodsList","getUsersList","__exports__","render"],"mappings":"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","file":"public/js/chunk-5abcafd8.e6b7ba77.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=1eb5409e&lang=less&scoped=true\"","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","export const TYPE_MAP = {\r\n  1: \"整件\",\r\n  99: \"散装\",\r\n};\r\n\r\nexport const IS_BULK = (item) => item.type == \"99\";\r\n","<!--\r\n * @Author: zzx\r\n * @Date: 2022-06-11 20:35:10\r\n * @LastEditors: zzx\r\n * @LastEditTime: 2023-12-03 10:35:05\r\n-->\r\n<template>\r\n  <viLayoutUpDown>\r\n    <template #up>\r\n      <viSearchForm v-model=\"searchData\" @search=\"getSalesTop\">\r\n        <FormItem label=\"商品范围:\" prop=\"goodIds\">\r\n          <Select v-model=\"searchData.goodIds\" filterable multiple placeholder=\"全部\" class=\"stat-width\">\r\n            <Option\r\n              v-for=\"item in allGoods\"\r\n              :key=\"item.goodId\"\r\n              :value=\"item.goodId\"\r\n            >{{ item.name }}</Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"客户范围:\" prop=\"userIds\">\r\n          <Select v-model=\"searchData.userIds\" filterable multiple placeholder=\"全部\" class=\"stat-width\">\r\n            <Option\r\n              v-for=\"item in allUsers\"\r\n              :key=\"item.userId\"\r\n              :value=\"item.userId\"\r\n            >{{ item.name }}</Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"时间范围:\" prop=\"timeRange\">\r\n          <DatePicker\r\n            v-model=\"searchData.timeRange\"\r\n            type=\"daterange\"\r\n            :options=\"options\"\r\n            placeholder=\"请选择\"\r\n            class=\"vi-width\"\r\n          />\r\n        </FormItem>\r\n      </viSearchForm>\r\n    </template>\r\n    <template #down>\r\n      <div class=\"chart-box\">\r\n        <Spin fix :show=\"barLoading\"></Spin>\r\n        <div class=\"chart-header\">\r\n          <p class=\"title\">商品销量排行榜<span class=\"tip\">（点击柱子进行趋势分析）</span></p>\r\n          <div>\r\n            <span>排行范围：</span>\r\n            <RadioGroup v-model=\"barType\" @on-change=\"getSalesTop\">\r\n              <Radio label=\"\">全部</Radio>\r\n              <Radio v-for=\"(item, key) in TYPE_MAP\" :key=\"key\" :label=\"key\">{{ item }}</Radio>\r\n              <Radio label=\"其他\">其他</Radio>\r\n            </RadioGroup>\r\n            <Select v-model=\"barSort\" :clearable=\"false\" transfer @on-change=\"drawBar\" class=\"vi-width\">\r\n              <Option value=\"desc\">倒序</Option>\r\n              <Option value=\"asc\">升序</Option>\r\n            </Select>\r\n          </div>\r\n        </div>\r\n        <viChart :options=\"barOption\" @onMount=\"addBarInteraction\" class=\"chart-content\"></viChart>\r\n      </div>\r\n      <div class=\"chart-box\">\r\n        <Spin fix :show=\"lineLoading\"></Spin>\r\n        <div class=\"chart-header\">\r\n          <p class=\"title\">商品销量趋势分析</p>\r\n          <p class=\"line-legend\" ref=\"list\" @wheel=\"$refs.list.scrollLeft += $event.deltaY\">\r\n            <span v-for=\"(item, index) in lineData\" :key=\"index\">\r\n              {{ item.userId ? `${userMap[item.userId]}-` : \"\" }}{{ goodMap[item.goodId] }}\r\n              <Icon type=\"md-close\" size=\"16\" @click=\"lineData.splice(index, 1);drawLine()\" class=\"vi-link-pointer mr-5\" />\r\n            </span>\r\n          </p>\r\n          <div class=\"flex-none\">\r\n            <Button class=\"mr-15\" @click=\"getSalesTrend(barData.map(({ data }) => data[0]))\">重置</Button>\r\n            <RadioGroup v-model=\"lineType\" type=\"button\" button-style=\"solid\" @on-change=\"getSalesTrend(lineData)\">\r\n              <Radio label=\"month\">按月</Radio>\r\n              <Radio label=\"day\">按天</Radio>\r\n            </RadioGroup>\r\n          </div>\r\n        </div>\r\n        <viChart :options=\"lineOption\" class=\"chart-content\"></viChart>\r\n      </div>\r\n    </template>\r\n  </viLayoutUpDown>\r\n</template>\r\n\r\n<script>\r\nimport { DatePicker } from \"view-ui-plus\";\r\nimport { viChart } from \"@/components\";\r\nimport { getAllGoods, getAllUsers, getSalesTop, getSalesTrend } from \"@/axios\";\r\nimport { TYPE_MAP } from \"@/constant\";\r\nimport { barOption, lineOption } from \"./option\";\r\nimport clone from \"clone\";\r\n\r\nexport default {\r\n  name: \"statisticsAnalysis\",\r\n  components: { DatePicker, viChart },\r\n  data() {\r\n    return {\r\n      TYPE_MAP,\r\n      allGoods: [],\r\n      goodMap: {},\r\n      allUsers: [],\r\n      userMap: {},\r\n      searchData: {\r\n        goodIds: [],\r\n        userIds: [],\r\n        timeRange: [],\r\n      },\r\n      options: {\r\n        shortcuts: [\r\n          { text: \"本周\", value: () => [new Date().startOf(\"week\"), new Date()] },\r\n          { text: \"近7天\", value: () => [new Date().subtract(7), new Date()] },\r\n          { text: \"本月\", value: () => [new Date().startOf(\"month\"), new Date()] },\r\n          { text: \"近30天\", value: () => [new Date().subtract(30), new Date()] },\r\n          { text: \"近90天\", value: () => [new Date().subtract(90), new Date()] },\r\n          { text: \"今年\", value: () => [new Date().startOf(\"year\"), new Date()] },\r\n          { text: \"近一年\", value: () => [new Date().subtract(365), new Date()] },\r\n          { text: \"近三年\", value: () => [new Date().subtract(1095), new Date()] },\r\n        ],\r\n      },\r\n      barOption: {},\r\n      barType: \"1\", // 默认整件的统计\r\n      barSort: \"desc\",\r\n      barData: [],\r\n      barLoading: false,\r\n      lineOption: {},\r\n      lineType: \"month\",\r\n      lineData: [],\r\n      lineLoading: false,\r\n    };\r\n  },\r\n  methods: {\r\n    getParams() {\r\n      const [startTime, endTime] = this.searchData.timeRange;\r\n      return {\r\n        goodIds: this.searchData.goodIds.join(),\r\n        userIds: this.searchData.userIds.join(),\r\n        startTime: startTime && new Date(startTime).startOf(\"day\").format(\"YYYY-MM-DD HH:mm:ss\"),\r\n        endTime: endTime && new Date(endTime).endOf(\"day\").format(\"YYYY-MM-DD HH:mm:ss\"),\r\n      };\r\n    },\r\n    async getSalesTop() {\r\n      try {\r\n        this.barLoading = true;\r\n        this.lineLoading = true;\r\n        const params = this.getParams();\r\n        const { returnCode, data } = await getSalesTop({\r\n          ...params,\r\n          type: this.barType,\r\n        }) || {};\r\n        if (returnCode === 0) {\r\n          this.barData = data || [];\r\n          this.drawBar();\r\n          const lineData = this.barData.map(({ data }) => data[0]);\r\n          this.getSalesTrend(lineData);\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`获取商品排行榜失败：${err.message || err}`);\r\n      } finally {\r\n        this.barLoading = false;\r\n      }\r\n    },\r\n    drawBar() {\r\n      if (!this.barData.length) {\r\n        this.barOption = {};\r\n        return;\r\n      }\r\n      const option = clone(barOption);\r\n      option.legend.data = this.barData.map((item) => this.userMap[item.userId] || \"销售总量\");\r\n      option.xAxis.data = this.barData[0].data.map((item) => this.goodMap[item.goodId]);\r\n      option.series = this.barData.map((item) => {\r\n        const data = item.data.map((citem) => {\r\n          return { userId: item.userId, goodId: citem.goodId, value: +(citem.count || 0) };\r\n        });\r\n        if (this.barSort === \"asc\") {\r\n          data.reverse();\r\n        }\r\n        return {\r\n          ...option.series[0],\r\n          name: this.userMap[item.userId] || \"销售总量\",\r\n          data,\r\n        };\r\n      });\r\n      if (this.barData[0].data.length < 10) {\r\n        option.dataZoom = [];\r\n        option.xAxis.axisLabel.rotate = 0;\r\n      }\r\n      this.barOption = option;\r\n    },\r\n    addBarInteraction(chart) {\r\n      chart.on(\"click\", (params) => {\r\n        const { goodId, userId } = params.data;\r\n        const index = this.lineData.findIndex((item) => item.goodId == goodId && item.userId == userId);\r\n        if (index === -1) {\r\n          this.getSalesTrend([{ goodId, userId }], false);\r\n        } else {\r\n          this.lineData.splice(index, 1);\r\n          this.drawLine();\r\n        }\r\n      });\r\n    },\r\n    async getSalesTrend(list = [], clear = true) {\r\n      try {\r\n        this.lineLoading = true;\r\n        const { startTime, endTime } = this.getParams();\r\n        const { returnCode, data } = await getSalesTrend({\r\n          startTime,\r\n          endTime,\r\n          lineType: this.lineType,\r\n          list: list.filter((item) => item),\r\n        }) || {};\r\n        if (returnCode === 0) {\r\n          const format = this.lineType == \"month\" ? \"YYYY-MM\" : \"YYYY-MM-DD\";\r\n          let minDate = new Date().format(format);\r\n          let maxDate = new Date(0).format(format);\r\n          for (let item of data) {\r\n            const startTime = item.data[0]?.date || minDate;\r\n            const endTime = item.data[item.data.length - 1]?.date || minDate;\r\n            if (startTime > maxDate) maxDate = startTime;\r\n            if (endTime < minDate) minDate = endTime;\r\n          }\r\n          const dateList = [];\r\n          for (let time = maxDate, i = 0; time >= minDate; i++) {\r\n            dateList.push(time);\r\n            if (this.lineType === \"day\") {\r\n              time = new Date(time).subtract(1, \"days\").format(\"YYYY-MM-DD\");\r\n            } else {\r\n              time = new Date(time).subtract(1, \"months\").format(\"YYYY-MM\");\r\n            }\r\n          }\r\n          data.forEach((item) => {\r\n            item.data = dateList.map((date) => {\r\n              const obj = item.data.find((citem) => citem.date === date);\r\n              return { date, count: obj ? +obj.count : 0 };\r\n            });\r\n          });\r\n          if (clear) {\r\n            this.lineData = data || [];\r\n          } else {\r\n            this.lineData = this.lineData.concat(data || []);\r\n          }\r\n          this.drawLine();\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`获取商品销量趋势失败：${err.message || err}`);\r\n      } finally {\r\n        this.lineLoading = false;\r\n      }\r\n    },\r\n    drawLine() {\r\n      if (!this.lineData.length) {\r\n        this.lineOption = {};\r\n        return;\r\n      }\r\n      const option = clone(lineOption);\r\n      option.legend.data = this.lineData.map(({ userId, goodId }) =>\r\n        `${userId ? `${this.userMap[userId]}-` : \"\"}${this.goodMap[goodId]}`);\r\n      option.xAxis.data = this.lineData[0].data.map((item) => item.date);\r\n      option.series = this.lineData.map(({ userId, goodId, data }) => {\r\n        return {\r\n          ...option.series[0],\r\n          name: `${userId ? `${this.userMap[userId]}-` : \"\"}${this.goodMap[goodId]}`,\r\n          data: data.map((item) => {\r\n            return { ...item, value: +(item.count || 0) };\r\n          }),\r\n        };\r\n      });\r\n      if (this.lineData[0].data.length < 10) {\r\n        option.dataZoom = [];\r\n      }\r\n      this.lineOption = option;\r\n    },\r\n    async getGoodsList() {\r\n      try {\r\n        const { returnCode, data } = await getAllGoods() || {};\r\n        if (returnCode === 0) {\r\n          this.allGoods = data || [];\r\n          const goodMap = {};\r\n          this.allGoods.forEach((item) => {\r\n            goodMap[item.goodId] = item.name;\r\n          });\r\n          this.goodMap = goodMap;\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`获取商品字典失败：${err.message || err}`);\r\n      }\r\n    },\r\n    async getUsersList() {\r\n      try {\r\n        const { returnCode, data } = await getAllUsers() || {};\r\n        if (returnCode === 0) {\r\n          this.allUsers = data || [];\r\n          const userMap = {};\r\n          this.allUsers.forEach((item) => {\r\n            userMap[item.userId] = item.name;\r\n          });\r\n          this.userMap = userMap;\r\n        }\r\n      } catch (err) {\r\n        this.$Message.error(`获取客户列表失败：${err.message || err}`);\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getSalesTop();\r\n  },\r\n  created() {\r\n    this.getGoodsList();\r\n    this.getUsersList();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.stat-width {\r\n  min-width: 200px;\r\n}\r\n.chart-box {\r\n  height: calc(50% - 10px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 10px;\r\n  position: relative;\r\n  .chart-header {\r\n    flex: none;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    overflow: hidden;\r\n    .title {\r\n      flex: none;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n    }\r\n    .tip {\r\n      font-size: 12px;\r\n      color: #DDD;\r\n      margin-left: 5px;\r\n    }\r\n    .line-legend {\r\n      flex: 1;\r\n      white-space: nowrap;\r\n      overflow-x: auto;\r\n      margin: 0 20px;\r\n      text-align: right;\r\n    }\r\n  }\r\n  .chart-content {\r\n    height: calc(100% - 42px);\r\n  }\r\n}\r\n</style>\r\n","export const barOption = {\r\n  grid: {\r\n    bottom: 15,\r\n    top: 20,\r\n    left: 0,\r\n    right: 0,\r\n    containLabel: true\r\n  },\r\n  legend: {\r\n    data: [\"销售总量\"],\r\n    right: 0,\r\n    itemWidth: 10,\r\n    itemHeight: 8,\r\n    textStyle: {\r\n      fontWeight: 400,\r\n      fontSize: 12,\r\n      padding: [0, 0, -3, 0]\r\n    }\r\n  },\r\n  tooltip: {\r\n    trigger: \"axis\",\r\n    appendToBody: true,\r\n    axisPointer: {\r\n      // 坐标轴指示器，坐标轴触发有效\r\n      type: \"shadow\" // 默认为直线，可选为：\"line\" | \"shadow\"\r\n    }\r\n  },\r\n  xAxis: {\r\n    type: \"category\",\r\n    data: [],\r\n    axisLabel: {\r\n      rotate: 10,\r\n      fontWeight: 400,\r\n      fontSize: 12\r\n    }\r\n  },\r\n  yAxis: {\r\n    type: \"value\",\r\n    axisLabel: {\r\n      fontWeight: 400,\r\n      fontSize: 12\r\n    }\r\n  },\r\n  series: [\r\n    {\r\n      data: [],\r\n      type: \"bar\",\r\n      name: \"销售总量\",\r\n      barMaxWidth: 30,\r\n      barMinWidth: 20,\r\n      label: {\r\n        show: true,\r\n        position: \"top\"\r\n      },\r\n    }\r\n  ],\r\n  dataZoom: [\r\n    {\r\n      type: \"slider\",\r\n      height: 15,\r\n      bottom: 5,\r\n      right: 5,\r\n      startValue: 0,\r\n      endValue: 9,\r\n    },\r\n    {\r\n      type: \"inside\",\r\n      startValue: 0,\r\n      endValue: 9,\r\n      zoomOnMouseWheel: false, // 关闭滚轮缩放\r\n      moveOnMouseWheel: true, // 开启滚轮平移\r\n    },\r\n  ],\r\n};\r\n\r\n\r\nexport const lineOption = {\r\n  grid: {\r\n    bottom: 20,\r\n    top: 20,\r\n    left: 0,\r\n    right: 0,\r\n    containLabel: true\r\n  },\r\n  legend: {\r\n    data: [\"销售总量\"],\r\n    right: 0,\r\n    itemWidth: 10,\r\n    itemHeight: 8,\r\n    textStyle: {\r\n      fontWeight: 400,\r\n      fontSize: 12,\r\n      padding: [0, 0, -3, 0]\r\n    }\r\n  },\r\n  tooltip: {\r\n    trigger: \"axis\",\r\n    appendToBody: true,\r\n    axisPointer: {\r\n      // 坐标轴指示器，坐标轴触发有效\r\n      type: \"shadow\" // 默认为直线，可选为：\"line\" | \"shadow\"\r\n    },\r\n    position: (pos, params, dom, rect, size) => {\r\n      // 鼠标在左侧时 tooltip 显示到右侧，鼠标在右侧时 tooltip 显示到左侧。\r\n      let obj = { top: pos[1] - size.contentSize[1] / 2 };\r\n      if (pos[0] + size.contentSize[0] + 20 < size.viewSize[0]) {\r\n        obj.left = pos[0] + 20;\r\n      } else {\r\n        obj.left = pos[0] - size.contentSize[0] - 20;\r\n      }\r\n      return obj;\r\n    }\r\n  },\r\n  xAxis: {\r\n    type: \"category\",\r\n    data: [],\r\n    axisLabel: {\r\n      fontWeight: 400,\r\n      fontSize: 12,\r\n    },\r\n  },\r\n  yAxis: {\r\n    type: \"value\",\r\n    axisLabel: {\r\n      fontWeight: 400,\r\n      fontSize: 12\r\n    }\r\n  },\r\n  series: [\r\n    {\r\n      data: [],\r\n      type: \"line\",\r\n      name: \"销售总量\",\r\n      symbol: \"circle\",\r\n      symbolSize: 10,\r\n      smooth: true,\r\n    }\r\n  ],\r\n  dataZoom: [\r\n    {\r\n      type: \"slider\",\r\n      height: 15,\r\n      bottom: 5,\r\n      right: 5,\r\n      startValue: 0,\r\n      endValue: 9,\r\n    },\r\n    {\r\n      type: \"inside\",\r\n      startValue: 0,\r\n      endValue: 9,\r\n      zoomOnMouseWheel: false, // 关闭滚轮缩放\r\n      moveOnMouseWheel: true, // 开启滚轮平移\r\n    },\r\n  ],\r\n};\r\n","import { render } from \"./index.vue?vue&type=template&id=1eb5409e&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=1eb5409e&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\goodCashier\\\\web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1eb5409e\"]])\n\nexport default __exports__"],"sourceRoot":""}