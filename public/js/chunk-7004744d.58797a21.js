(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7004744d"],{1680:function(e,t,a){"use strict";a("b487")},8451:function(e,t,a){"use strict";var l=a("ca5c");t["a"]=l["a"]},"9ed6":function(e,t,a){"use strict";a.r(t);var l=a("8451"),o=a("7a23"),c=a("c02b"),r=(a("d9e2"),a("eeb9")),n=a("ed08"),u=a("6605"),d={__name:"register",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,l=Object(u["c"])(),c=Object(o["inject"])("$Message",()=>{}),d=Object(o["ref"])({}),s=Object(o["ref"])();function i(e,t,a){t!==d.value.password?a(new Error("两次输入密码不一致")):a()}const b={phone:{required:!0,message:"请输入联系电话"},password:{required:!0,message:"请输入密码"},confirmPassword:[{required:!0,message:"请输入密码"},{validator:i,trigger:"blur"}]},m=Object(o["computed"])({get(){return a.modelValue},set(e){t("update:modelValue",e),e||s.value.resetFields()}}),p=Object(o["ref"])(!1);function O(){s.value.validate(async e=>{e||c.error("数据校验不通过");try{p.value=!0;const{data:e}=await Object(r["D"])({name:l.query.wxid,wxid:l.query.wxid,nickName:d.value.nickName||l.query.wxid,phone:d.value.phone,remarks:d.value.remarks,password:Object(n["k"])(d.value.password),status:"2",power:"99"})||{};e&&(c.success("注册成功"),m.value=!1)}catch(t){c.error("注册失败："+(t.message||t))}finally{p.value=!1}})}return(e,t)=>{const a=Object(o["resolveComponent"])("viInput"),l=Object(o["resolveComponent"])("FormItem"),c=Object(o["resolveComponent"])("Form"),r=Object(o["resolveComponent"])("Button"),n=Object(o["resolveComponent"])("viModal");return Object(o["openBlock"])(),Object(o["createBlock"])(n,{modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=e=>m.value=e),title:"注册"},{footer:Object(o["withCtx"])(()=>[Object(o["createVNode"])(r,{onClick:t[5]||(t[5]=e=>m.value=!1)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("取消")]),_:1}),Object(o["createVNode"])(r,{type:"primary",onClick:O,loading:p.value},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("确定")]),_:1},8,["loading"])]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{ref_key:"formRef",ref:s,model:d.value,rules:b,"label-width":86,onKeydown:Object(o["withKeys"])(O,["enter"]),class:"vi-modal-content"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,{label:"用户名:",prop:"nickName"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(a,{modelValue:d.value.nickName,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.nickName=e)},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(l,{label:"联系电话:",prop:"phone"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(a,{modelValue:d.value.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value.phone=e),placeholder:"用于重置密码"},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(l,{label:"备注:",prop:"remarks"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(a,{modelValue:d.value.remarks,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value.remarks=e),type:"textarea",placeholder:"用于商家审批"},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(l,{label:"密码:",prop:"password"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(a,{modelValue:d.value.password,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value.password=e),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(l,{label:"确认密码:",prop:"confirmPassword"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(a,{modelValue:d.value.confirmPassword,"onUpdate:modelValue":t[4]||(t[4]=e=>d.value.confirmPassword=e),type:"password",placeholder:"请确认密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","onKeydown"])]),_:1},8,["modelValue"])}}};const s=d;var i=s;const b=e=>(Object(o["pushScopeId"])("data-v-478ed7aa"),e=e(),Object(o["popScopeId"])(),e),m={class:"login"},p={class:"login-content"},O=b(()=>Object(o["createElementVNode"])("p",{class:"login-name"},"登录",-1)),j={class:"login-tip"};var v={__name:"index",setup(e){const t=Object(u["c"])(),a=Object(u["d"])(),r=Object(o["inject"])("$Message",()=>{}),d={userName:{required:!0,message:"请输入用户名"},password:{required:!0,message:"请输入密码"}},s=Object(o["computed"])(()=>t.query.wxid),b=Object(o["ref"])("1"),v=Object(o["ref"])(),h=Object(o["ref"])({});function V(){v.value.validate(async e=>{if(!e)return r.error("数据校验不通过");try{await Object(n["h"])({...h.value,loginType:b.value}),t.query.realName&&a.replace({name:t.query.realName,query:JSON.parse(t.query.query),params:JSON.parse(t.query.params)})}catch(l){r.error("登录失败："+(l.message||l))}})}const w=Object(o["ref"])(!1),f=Object(o["ref"])(!1),k=Object(o["ref"])(!1),C=Object(o["ref"])(!1);function x(e,t){t?localStorage.setItem(e,"1"):(localStorage.removeItem(e),"remember"===e&&localStorage.removeItem("token"))}return Object(o["onMounted"])(()=>{k.value="1"===localStorage.getItem("remember"),C.value="1"===localStorage.getItem("autoLogin");const e=sessionStorage.getItem("token")||localStorage.getItem("token");if(k.value&&e){var a;const[t,l]=null===(a=Object(n["d"])(e))||void 0===a?void 0:a.split("/");t&&l&&(h.value={userName:t,password:l})}t.query.wxid?(b.value="1",h.value.wxid=t.query.wxid,sessionStorage.setItem("wxid",t.query.wxid)):b.value="2",C.value&&e&&!t.query.from&&Object(o["nextTick"])(()=>{V()})}),(e,t)=>{const a=Object(o["resolveComponent"])("Radio"),r=Object(o["resolveComponent"])("RadioGroup"),n=Object(o["resolveComponent"])("FormItem"),u=Object(o["resolveComponent"])("viInput"),g=Object(o["resolveComponent"])("Form"),N=Object(o["resolveComponent"])("Button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",m,[Object(o["createElementVNode"])("div",p,[O,Object(o["createVNode"])(g,{ref_key:"formRef",ref:v,model:h.value,rules:d,"label-width":76,onKeydown:Object(o["withKeys"])(V,["enter"])},{default:Object(o["withCtx"])(()=>[s.value?(Object(o["openBlock"])(),Object(o["createBlock"])(n,{key:0,label:"登陆方式:"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(r,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(a,{label:"1"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("微信号")]),_:1}),Object(o["createVNode"])(a,{label:"2"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("昵称")]),_:1})]),_:1},8,["modelValue"])]),_:1})):Object(o["createCommentVNode"])("",!0),s.value&&"1"==b.value?(Object(o["openBlock"])(),Object(o["createBlock"])(n,{key:1,label:"微信号:",prop:"wxid"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,{modelValue:h.value.wxid,"onUpdate:modelValue":t[1]||(t[1]=e=>h.value.wxid=e),disabled:""},null,8,["modelValue"])]),_:1})):(Object(o["openBlock"])(),Object(o["createBlock"])(n,{key:2,label:"用户名:",prop:"userName"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,{modelValue:h.value.userName,"onUpdate:modelValue":t[2]||(t[2]=e=>h.value.userName=e),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1})),Object(o["createVNode"])(n,{label:"密码:",prop:"password"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,{modelValue:h.value.password,"onUpdate:modelValue":t[3]||(t[3]=e=>h.value.password=e),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","onKeydown"]),s.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",{key:0,onClick:t[4]||(t[4]=e=>f.value=!0),class:"vi-link-pointer fr"},"忘记密码？")):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(c["a"],{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=e=>f.value=e)},null,8,["modelValue"]),Object(o["createElementVNode"])("div",j,[Object(o["createVNode"])(Object(o["unref"])(l["a"]),{modelValue:k.value,"onUpdate:modelValue":t[6]||(t[6]=e=>k.value=e),onOnChange:t[7]||(t[7]=e=>x("remember",e))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("记住密码")]),_:1},8,["modelValue"]),Object(o["createVNode"])(Object(o["unref"])(l["a"]),{modelValue:C.value,"onUpdate:modelValue":t[8]||(t[8]=e=>C.value=e),onOnChange:t[9]||(t[9]=e=>x("autoLogin",e))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("自动登录")]),_:1},8,["modelValue"])]),Object(o["createVNode"])(N,{onClick:V,long:"",type:"success"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("登录")]),_:1}),s.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",{key:1,onClick:t[10]||(t[10]=e=>w.value=!0),class:"vi-link-pointer tc mt-10"},"没有账号？点击注册")):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(i,{modelValue:w.value,"onUpdate:modelValue":t[11]||(t[11]=e=>w.value=e)},null,8,["modelValue"])])])}}},h=(a("1680"),a("6b0d")),V=a.n(h);const w=V()(v,[["__scopeId","data-v-478ed7aa"]]);t["default"]=w},b487:function(e,t,a){},c02b:function(e,t,a){"use strict";a("d9e2");var l=a("7a23"),o=a("eeb9"),c=a("ed08"),r=a("4360"),n=a("6605"),u={__name:"resetPassword",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,u=Object(r["b"])(),d=Object(l["computed"])(()=>u.userInfo),s=Object(n["c"])(),i=Object(l["inject"])("$Message",()=>{}),b=Object(l["ref"])({}),m=Object(l["ref"])();function p(e,t,a){t!==b.value.password?a(new Error("两次输入密码不一致")):a()}const O={phone:{required:!0,message:"请输入联系电话"},oldPassword:{required:!0,message:"请输入旧密码"},password:{required:!0,message:"请输入新密码"},confirmPassword:[{required:!0,message:"请确认密码"},{validator:p,trigger:"blur"}]},j=Object(l["computed"])({get(){return a.modelValue},set(e){t("update:modelValue",e),e?d.value.wxid&&(b.value={phone:d.value.phone}):m.value.resetFields()}}),v=Object(l["ref"])(!1);function h(){m.value.validate(async e=>{e||i.error("数据校验不通过");try{v.value=!0;const{data:e}=await Object(o["E"])({wxid:d.value.wxid||s.query.wxid,password:Object(c["k"])(b.value.password),...d.value.userId?{oldPassword:Object(c["k"])(b.value.oldPassword)}:{phone:b.value.phone}})||{};e&&(i.success("操作成功"),j.value=!1)}catch(t){i.error("操作失败："+(t.message||t))}finally{v.value=!1}})}return(e,t)=>{const a=Object(l["resolveComponent"])("viInput"),o=Object(l["resolveComponent"])("FormItem"),c=Object(l["resolveComponent"])("Form"),r=Object(l["resolveComponent"])("Button"),n=Object(l["resolveComponent"])("viModal");return Object(l["openBlock"])(),Object(l["createBlock"])(n,{modelValue:j.value,"onUpdate:modelValue":t[5]||(t[5]=e=>j.value=e),title:d.value.userId?"修改密码":"重置密码"},{footer:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{onClick:t[4]||(t[4]=e=>j.value=!1)},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("取消")]),_:1}),Object(l["createVNode"])(r,{type:"primary",onClick:h,loading:v.value},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("确定")]),_:1},8,["loading"])]),default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(c,{ref_key:"formRef",ref:m,model:b.value,rules:O,"label-width":86,onKeydown:Object(l["withKeys"])(h,["enter"]),class:"vi-modal-content"},{default:Object(l["withCtx"])(()=>[d.value.userId?(Object(l["openBlock"])(),Object(l["createBlock"])(o,{key:1,label:"旧密码:",prop:"oldPassword"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{modelValue:b.value.oldPassword,"onUpdate:modelValue":t[1]||(t[1]=e=>b.value.oldPassword=e),type:"password",placeholder:"请输入旧密码"},null,8,["modelValue"])]),_:1})):(Object(l["openBlock"])(),Object(l["createBlock"])(o,{key:0,label:"联系电话:",prop:"phone"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{modelValue:b.value.phone,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value.phone=e)},null,8,["modelValue"])]),_:1})),Object(l["createVNode"])(o,{label:"新密码:",prop:"password"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{modelValue:b.value.password,"onUpdate:modelValue":t[2]||(t[2]=e=>b.value.password=e),type:"password",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(o,{label:"确认密码:",prop:"confirmPassword"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{modelValue:b.value.confirmPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>b.value.confirmPassword=e),type:"password",placeholder:"请确认密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","onKeydown"])]),_:1},8,["modelValue","title"])}}};const d=u;t["a"]=d},ca5c:function(e,t,a){"use strict";var l=a("7a23");const o=["disabled","value","name"],c=["disabled","checked","name"],r={key:0,class:"ivu-checkbox-label-text"};function n(e,t,a,n,u,d){return Object(l["openBlock"])(),Object(l["createElementBlock"])("label",{class:Object(l["normalizeClass"])(d.wrapClasses)},[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(d.checkboxClasses)},[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(d.innerClasses)},null,2),d.group?Object(l["withDirectives"])((Object(l["openBlock"])(),Object(l["createElementBlock"])("input",{key:0,type:"checkbox",class:Object(l["normalizeClass"])(d.inputClasses),disabled:e.itemDisabled,value:a.label,"onUpdate:modelValue":t[0]||(t[0]=e=>u.model=e),name:a.name,onChange:t[1]||(t[1]=(...e)=>d.change&&d.change(...e)),onFocus:t[2]||(t[2]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[3]||(t[3]=(...e)=>d.onBlur&&d.onBlur(...e))},null,42,o)),[[l["vModelCheckbox"],u.model]]):(Object(l["openBlock"])(),Object(l["createElementBlock"])("input",{key:1,type:"checkbox",class:Object(l["normalizeClass"])(d.inputClasses),disabled:e.itemDisabled,checked:d.currentValue,name:a.name,onChange:t[4]||(t[4]=(...e)=>d.change&&d.change(...e)),onFocus:t[5]||(t[5]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[6]||(t[6]=(...e)=>d.onBlur&&d.onBlur(...e))},null,42,c))],2),u.showSlot?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",r,[Object(l["renderSlot"])(e.$slots,"default",{},()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(a.label),1)])])):Object(l["createCommentVNode"])("",!0)],2)}var u=a("694c"),d=a("9836");const s="ivu-checkbox";var i={name:"Checkbox",mixins:[d["a"]],emits:["update:modelValue","on-change"],inject:{CheckboxGroupInstance:{default:null}},props:{disabled:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator(e){return Object(u["h"])(e,["small","large","default"])},default(){const e=Object(l["getCurrentInstance"])().appContext.config.globalProperties;return e.$VIEWUI&&""!==e.$VIEWUI.size?e.$VIEWUI.size:"default"}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{showSlot:!0,focusInner:!1,model:[]}},computed:{wrapClasses(){return[s+"-wrapper",{[s+"-group-item"]:this.group,[s+"-wrapper-checked"]:this.currentValue,[s+"-wrapper-disabled"]:this.itemDisabled,[`${s}-${this.size}`]:!!this.size,[s+"-border"]:this.border}]},checkboxClasses(){return[""+s,{[s+"-checked"]:this.currentValue,[s+"-disabled"]:this.itemDisabled,[s+"-indeterminate"]:this.indeterminate}]},innerClasses(){return[s+"-inner",{[s+"-focus"]:this.focusInner}]},inputClasses(){return s+"-input"},currentValue(){return this.CheckboxGroupInstance?this.CheckboxGroupInstance.modelValue.indexOf(this.label)>=0:this.modelValue===this.trueValue},group(){return!!this.CheckboxGroupInstance}},mounted(){this.CheckboxGroupInstance||(this.showSlot=void 0!==this.$slots.default)},methods:{change(e){if(this.itemDisabled)return!1;const t=e.target.checked,a=t?this.trueValue:this.falseValue;this.$emit("update:modelValue",a),this.group?this.CheckboxGroupInstance.change(this.model):(this.$emit("on-change",a),this.handleFormItemChange("change",a))},onBlur(){this.focusInner=!1},onFocus(){this.focusInner=!0}},watch:{modelValue(e){if(e!==this.trueValue&&e!==this.falseValue)throw"Value should be trueValue or falseValue."},"CheckboxGroupInstance.modelValue":{handler(e){this.model=e||[]},immediate:!0}}},b=a("6b0d"),m=a.n(b);const p=m()(i,[["render",n]]);t["a"]=p}}]);