(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93f7d560"],{"2baa":function(e,t,a){},8451:function(e,t,a){"use strict";var l=a("ca5c");t["a"]=l["a"]},"9ed6":function(e,t,a){"use strict";a.r(t);var l=a("8451"),o=a("7a23"),c=(a("d9e2"),a("eeb9")),r=a("ed08"),n=a("6605"),u={__name:"register",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","on-submit"],setup(e,{emit:t}){const a=e,l=Object(n["c"])(),u=Object(o["inject"])("$Message",()=>{}),s=Object(o["ref"])({}),d=Object(o["ref"])();function i(e,t,a){t!==s.value.password?a(new Error("两次输入密码不一致")):a()}const b={nickName:{required:!0,message:"请输入用户名"},password:{required:!0,message:"请输入密码"},confirmPassword:[{required:!0,message:"请输入密码"},{validator:i,trigger:"blur"}]},m=Object(o["computed"])({get(){return a.modelValue},set(e){t("update:modelValue",e),e||d.value.resetFields()}}),p=Object(o["ref"])(!1);function j(){d.value.validate(async e=>{e||u.error("数据校验不通过");try{p.value=!0;const{data:e}=await Object(c["F"])({name:l.query.wxid,wxid:l.query.wxid,nickName:s.value.nickName||l.query.wxid,remarks:s.value.remarks,password:Object(r["j"])(s.value.password),status:"2",power:"99"})||{};e&&(u.success("注册成功"),t("on-submit",{...s.value}),m.value=!1)}catch(a){u.error("注册失败："+(a.message||a))}finally{p.value=!1}})}return(e,t)=>{const a=Object(o["resolveComponent"])("viInput"),l=Object(o["resolveComponent"])("FormItem"),c=Object(o["resolveComponent"])("Form"),r=Object(o["resolveComponent"])("Button"),n=Object(o["resolveComponent"])("viModal");return Object(o["openBlock"])(),Object(o["createBlock"])(n,{modelValue:m.value,"onUpdate:modelValue":t[5]||(t[5]=e=>m.value=e),title:"注册"},{footer:Object(o["withCtx"])(()=>[Object(o["createVNode"])(r,{onClick:t[4]||(t[4]=e=>m.value=!1)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("取消")]),_:1}),Object(o["createVNode"])(r,{type:"primary",onClick:j,loading:p.value},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("确定")]),_:1},8,["loading"])]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{ref_key:"formRef",ref:d,model:s.value,rules:b,"label-width":86,onKeydown:Object(o["withKeys"])(j,["enter"]),class:"vi-modal-content"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,{label:"用户名:",prop:"nickName"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(a,{modelValue:s.value.nickName,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value.nickName=e)},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(l,{label:"备注:",prop:"remarks"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(a,{modelValue:s.value.remarks,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.remarks=e),type:"textarea",placeholder:"用于商家审批"},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(l,{label:"密码:",prop:"password"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(a,{modelValue:s.value.password,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value.password=e),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(l,{label:"确认密码:",prop:"confirmPassword"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(a,{modelValue:s.value.confirmPassword,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value.confirmPassword=e),type:"password",placeholder:"请确认密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","onKeydown"])]),_:1},8,["modelValue"])}}};const s=u;var d=s;const i=e=>(Object(o["pushScopeId"])("data-v-565fb40e"),e=e(),Object(o["popScopeId"])(),e),b={class:"login"},m={class:"login-content"},p=i(()=>Object(o["createElementVNode"])("p",{class:"login-name"},"登录",-1)),j={class:"login-tip"};var O={__name:"index",setup(e){const t=Object(n["c"])(),a=Object(n["d"])(),u=Object(o["inject"])("$Message",()=>{}),s=Object(o["inject"])("$Modal",()=>{}),i={userName:{required:!0,message:"请输入用户名"},password:{required:!0,message:"请输入密码"}},O=Object(o["computed"])(()=>t.query.wxid),h=Object(o["ref"])("1"),v=Object(o["ref"])(),V=Object(o["ref"])({}),f=Object(o["ref"])(""),w=Object(o["ref"])(!1);function k(){v.value.validate(async e=>{if(!e)return u.error("数据校验不通过");try{w.value=!0,f.value!==V.value.password&&(V.value.password=Object(r["j"])(V.value.password));const{returnCode:e,data:l}=await Object(c["D"])({loginType:h.value||"2",..."1"===h.value?{wxid:V.value.wxid}:{userName:V.value.userName},password:V.value.password})||{};0===e&&(Object(r["k"])(V.value,l),a.replace({name:t.query.realName||"home",query:JSON.parse(t.query.query||"{}"),params:JSON.parse(t.query.params||"{}")}))}catch(l){u.error("登录失败："+(l.message||l))}finally{w.value=!1}})}const C=Object(o["ref"])(!1);function x(e){V.value={...V.value,...e,userName:e.nickName||""}}function g(){s.info({title:"忘记密码？",content:"通知店家重置密码"})}const N=Object(o["ref"])(!1),y=Object(o["ref"])(!1);function B(e,t){t?localStorage.setItem(e,"1"):(localStorage.removeItem(e),"remember"===e&&localStorage.removeItem("token"))}return Object(o["onMounted"])(()=>{window.document.title="登录",N.value="1"===localStorage.getItem("remember"),y.value="1"===localStorage.getItem("autoLogin");const e=sessionStorage.getItem("token")||localStorage.getItem("token");if(N.value&&e){var a;const[t,l]=null===(a=Object(r["d"])(e))||void 0===a?void 0:a.split("/");t&&l&&(V.value={userName:t,password:l},f.value=l)}t.query.wxid?(h.value="1",V.value.wxid=t.query.wxid,sessionStorage.setItem("wxid",t.query.wxid)):h.value="2",y.value&&e&&!t.query.from&&Object(o["nextTick"])(()=>{Object(c["D"])()})}),(e,t)=>{const a=Object(o["resolveComponent"])("Spin"),c=Object(o["resolveComponent"])("Radio"),r=Object(o["resolveComponent"])("RadioGroup"),n=Object(o["resolveComponent"])("FormItem"),u=Object(o["resolveComponent"])("viInput"),s=Object(o["resolveComponent"])("Form"),f=Object(o["resolveComponent"])("Button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",b,[Object(o["createVNode"])(a,{fix:"",show:w.value},null,8,["show"]),Object(o["createElementVNode"])("div",m,[p,Object(o["createVNode"])(s,{ref_key:"formRef",ref:v,model:V.value,rules:i,"label-width":76,onKeydown:Object(o["withKeys"])(k,["enter"])},{default:Object(o["withCtx"])(()=>[O.value?(Object(o["openBlock"])(),Object(o["createBlock"])(n,{key:0,label:"登陆方式:"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(r,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=e=>h.value=e)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{label:"1"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("微信号")]),_:1}),Object(o["createVNode"])(c,{label:"2"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("昵称")]),_:1})]),_:1},8,["modelValue"])]),_:1})):Object(o["createCommentVNode"])("",!0),O.value&&"1"==h.value?(Object(o["openBlock"])(),Object(o["createBlock"])(n,{key:1,label:"微信号:",prop:"wxid"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,{modelValue:V.value.wxid,"onUpdate:modelValue":t[1]||(t[1]=e=>V.value.wxid=e),disabled:""},null,8,["modelValue"])]),_:1})):(Object(o["openBlock"])(),Object(o["createBlock"])(n,{key:2,label:"用户名:",prop:"userName"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,{modelValue:V.value.userName,"onUpdate:modelValue":t[2]||(t[2]=e=>V.value.userName=e),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1})),Object(o["createVNode"])(n,{label:"密码:",prop:"password"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,{modelValue:V.value.password,"onUpdate:modelValue":t[3]||(t[3]=e=>V.value.password=e),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","onKeydown"]),O.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",{key:0,onClick:g,class:"vi-link-pointer fr"},"忘记密码？")):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",j,[Object(o["createVNode"])(Object(o["unref"])(l["a"]),{modelValue:N.value,"onUpdate:modelValue":t[4]||(t[4]=e=>N.value=e),onOnChange:t[5]||(t[5]=e=>B("remember",e))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("记住密码")]),_:1},8,["modelValue"]),Object(o["createVNode"])(Object(o["unref"])(l["a"]),{modelValue:y.value,"onUpdate:modelValue":t[6]||(t[6]=e=>y.value=e),onOnChange:t[7]||(t[7]=e=>B("autoLogin",e))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("自动登录")]),_:1},8,["modelValue"])]),Object(o["createVNode"])(f,{onClick:k,long:"",type:"success"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("登录")]),_:1}),O.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",{key:1,onClick:t[8]||(t[8]=e=>C.value=!0),class:"vi-link-pointer tc mt-10"},"没有账号？点击注册")):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(d,{modelValue:C.value,"onUpdate:modelValue":t[9]||(t[9]=e=>C.value=e),onOnSubmit:x},null,8,["modelValue"])])])}}},h=(a("f7db"),a("6b0d")),v=a.n(h);const V=v()(O,[["__scopeId","data-v-565fb40e"]]);t["default"]=V},ca5c:function(e,t,a){"use strict";var l=a("7a23");const o=["disabled","value","name"],c=["disabled","checked","name"],r={key:0,class:"ivu-checkbox-label-text"};function n(e,t,a,n,u,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("label",{class:Object(l["normalizeClass"])(s.wrapClasses)},[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(s.checkboxClasses)},[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(s.innerClasses)},null,2),s.group?Object(l["withDirectives"])((Object(l["openBlock"])(),Object(l["createElementBlock"])("input",{key:0,type:"checkbox",class:Object(l["normalizeClass"])(s.inputClasses),disabled:e.itemDisabled,value:a.label,"onUpdate:modelValue":t[0]||(t[0]=e=>u.model=e),name:a.name,onChange:t[1]||(t[1]=(...e)=>s.change&&s.change(...e)),onFocus:t[2]||(t[2]=(...e)=>s.onFocus&&s.onFocus(...e)),onBlur:t[3]||(t[3]=(...e)=>s.onBlur&&s.onBlur(...e))},null,42,o)),[[l["vModelCheckbox"],u.model]]):(Object(l["openBlock"])(),Object(l["createElementBlock"])("input",{key:1,type:"checkbox",class:Object(l["normalizeClass"])(s.inputClasses),disabled:e.itemDisabled,checked:s.currentValue,name:a.name,onChange:t[4]||(t[4]=(...e)=>s.change&&s.change(...e)),onFocus:t[5]||(t[5]=(...e)=>s.onFocus&&s.onFocus(...e)),onBlur:t[6]||(t[6]=(...e)=>s.onBlur&&s.onBlur(...e))},null,42,c))],2),u.showSlot?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",r,[Object(l["renderSlot"])(e.$slots,"default",{},()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(a.label),1)])])):Object(l["createCommentVNode"])("",!0)],2)}var u=a("694c"),s=a("9836");const d="ivu-checkbox";var i={name:"Checkbox",mixins:[s["a"]],emits:["update:modelValue","on-change"],inject:{CheckboxGroupInstance:{default:null}},props:{disabled:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator(e){return Object(u["h"])(e,["small","large","default"])},default(){const e=Object(l["getCurrentInstance"])().appContext.config.globalProperties;return e.$VIEWUI&&""!==e.$VIEWUI.size?e.$VIEWUI.size:"default"}},name:{type:String},border:{type:Boolean,default:!1}},data(){return{showSlot:!0,focusInner:!1,model:[]}},computed:{wrapClasses(){return[d+"-wrapper",{[d+"-group-item"]:this.group,[d+"-wrapper-checked"]:this.currentValue,[d+"-wrapper-disabled"]:this.itemDisabled,[`${d}-${this.size}`]:!!this.size,[d+"-border"]:this.border}]},checkboxClasses(){return[""+d,{[d+"-checked"]:this.currentValue,[d+"-disabled"]:this.itemDisabled,[d+"-indeterminate"]:this.indeterminate}]},innerClasses(){return[d+"-inner",{[d+"-focus"]:this.focusInner}]},inputClasses(){return d+"-input"},currentValue(){return this.CheckboxGroupInstance?this.CheckboxGroupInstance.modelValue.indexOf(this.label)>=0:this.modelValue===this.trueValue},group(){return!!this.CheckboxGroupInstance}},mounted(){this.CheckboxGroupInstance||(this.showSlot=void 0!==this.$slots.default)},methods:{change(e){if(this.itemDisabled)return!1;const t=e.target.checked,a=t?this.trueValue:this.falseValue;this.$emit("update:modelValue",a),this.group?this.CheckboxGroupInstance.change(this.model):(this.$emit("on-change",a),this.handleFormItemChange("change",a))},onBlur(){this.focusInner=!1},onFocus(){this.focusInner=!0}},watch:{modelValue(e){if(e!==this.trueValue&&e!==this.falseValue)throw"Value should be trueValue or falseValue."},"CheckboxGroupInstance.modelValue":{handler(e){this.model=e||[]},immediate:!0}}},b=a("6b0d"),m=a.n(b);const p=m()(i,[["render",n]]);t["a"]=p},f7db:function(e,t,a){"use strict";a("2baa")}}]);