(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4b79a8a"],{"00b4":function(e,t,o){"use strict";o("d3c6")},"13d5":function(e,t,o){"use strict";var n=o("23e7"),c=o("d58f").left,a=o("a640"),r=o("2d00"),i=o("605d"),l=!i&&r>79&&r<83,u=l||!a("reduce");n({target:"Array",proto:!0,forced:u},{reduce:function(e){var t=arguments.length;return c(this,e,t,t>1?arguments[1]:void 0)}})},2404:function(e,t,o){"use strict";o.r(t);o("13d5"),o("14d9");var n=o("7a23"),c=o("eeb9"),a=o("6605");const r={class:"mobileHome"},i={class:"home-header"},l={class:"home-footer"},u=["onClick"];var s={__name:"mobile",setup(e){const t=Object(a["c"])(),o=Object(a["d"])(),s=Object(n["inject"])("$Message",()=>{}),d=Object(n["inject"])("$Auth",()=>!1),b=Object(n["computed"])(()=>[{title:"商品",name:"mobileGood",icon:"ios-home-outline"},{title:"结账",name:"mobileCashier",icon:"ios-cart-outline"},{title:"订单",name:"mobileOrder",icon:"ios-clipboard-outline"},{title:"客户",name:"mobileUser",icon:"ios-contacts-outline"},{title:"我的",name:"mobileMy",icon:"ios-person-outline"}].map(e=>{var t;const n=o.getRoutes(),c=n.find(t=>e.name===t.name);return e.power=(null===c||void 0===c||null===(t=c.meta)||void 0===t?void 0:t.power)||void 0,e}).filter(e=>d(e.power))),v=Object(n["ref"])(""),m=Object(n["ref"])(t.name),f=Object(n["ref"])({}),O=Object(n["ref"])({});Object(n["watch"])(()=>t,({name:e})=>{m.value=e;const o=b.value.find(t=>t.name===e)||{};v.value=o.title||t.meta.title||b.value[0].title},{deep:!0,immediate:!0});const j=Object(n["computed"])(()=>!!b.value.find(e=>e.name===m.value));async function p(){try{const{returnCode:e,data:t}=await Object(c["s"])()||{};0===e&&(f.value.mobileOrder=t||0)}catch(e){s.error("获取草稿数量失败："+(e.message||e))}}async function w(){try{const{returnCode:e,data:t}=await Object(c["r"])()||{};0===e&&(f.value.mobileUser=t||0)}catch(e){s.error("获取待审批数量失败："+(e.message||e))}}function h(e){f.value={...f.value,...e}}function k(e,t){O.value[e]=t}return Object(n["onMounted"])(()=>{const e=JSON.parse(localStorage.getItem("order")||"[]");f.value={mobileCashier:e.reduce((e,t)=>e+ +t.count,0)},p(),w(),window.$EventBus.$on("badge",h),window.$EventBus.$on("saveOrder",p),window.$EventBus.$on("saveUser",w)}),Object(n["onBeforeUnmount"])(()=>{window.$EventBus.$off("badge",h),window.$EventBus.$off("saveOrder",p),window.$EventBus.$off("saveUser",w)}),(e,t)=>{const c=Object(n["resolveComponent"])("Icon"),a=Object(n["resolveComponent"])("router-view"),s=Object(n["resolveComponent"])("Badge");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createElementVNode"])("div",i,[j.value?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,type:"ios-arrow-back",size:"25",onClick:t[0]||(t[0]=t=>e.$router.back()),class:"vi-header-icon left"})),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(v.value)+Object(n["toDisplayString"])("number"==typeof O.value[m.value]?`（${O.value[m.value]}）`:""),1)]),Object(n["createVNode"])(a,{class:"home-container"},{default:Object(n["withCtx"])(({Component:e})=>[(Object(n["openBlock"])(),Object(n["createBlock"])(n["KeepAlive"],null,[(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e),{draftCount:f.value[m.value],onTotal:k},null,40,["draftCount"]))],1024))]),_:1}),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",l,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(b.value,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t,class:Object(n["normalizeClass"])(["menu-item",{active:m.value===e.name}]),onClick:t=>Object(n["unref"])(o).push(e.name)},[Object(n["createVNode"])(s,{count:f.value[e.name]||0,"overflow-count":"99",class:"menu-badge"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{type:e.icon},null,8,["type"])]),_:2},1032,["count"]),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.title),1)],10,u))),128))],512),[[n["vShow"],j.value]])])}}},d=(o("00b4"),o("6b0d")),b=o.n(d);const v=b()(s,[["__scopeId","data-v-d6cb1276"]]);t["default"]=v},"605d":function(e,t,o){"use strict";var n=o("da84"),c=o("c6b6");e.exports="process"===c(n.process)},a640:function(e,t,o){"use strict";var n=o("d039");e.exports=function(e,t){var o=[][e];return!!o&&n((function(){o.call(null,t||function(){return 1},1)}))}},d3c6:function(e,t,o){},d58f:function(e,t,o){"use strict";var n=o("59ed"),c=o("7b0b"),a=o("44ad"),r=o("07fa"),i=TypeError,l=function(e){return function(t,o,l,u){n(o);var s=c(t),d=a(s),b=r(s),v=e?b-1:0,m=e?-1:1;if(l<2)while(1){if(v in d){u=d[v],v+=m;break}if(v+=m,e?v<0:b<=v)throw i("Reduce of empty array with no initial value")}for(;e?v>=0:b>v;v+=m)v in d&&(u=o(u,d[v],v,s));return u}};e.exports={left:l(!1),right:l(!0)}}}]);