(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b8b38f30"],{"13d5":function(e,t,o){"use strict";var n=o("23e7"),c=o("d58f").left,a=o("a640"),r=o("2d00"),l=o("605d"),i=!l&&r>79&&r<83,u=i||!a("reduce");n({target:"Array",proto:!0,forced:u},{reduce:function(e){var t=arguments.length;return c(this,e,t,t>1?arguments[1]:void 0)}})},2404:function(e,t,o){"use strict";o.r(t);o("13d5"),o("14d9");var n=o("7a23"),c=o("eeb9"),a=o("6605");const r={class:"mobileHome"},l={class:"home-header"},i={class:"home-footer"},u=["onClick"];var s={__name:"mobile",setup(e){const t=Object(a["c"])(),o=Object(a["d"])(),s=Object(n["inject"])("$Message",()=>{}),b=Object(n["inject"])("$Auth",()=>!1),d=Object(n["computed"])(()=>[{title:"商品",name:"mobileGood",icon:"ios-home-outline"},{title:"结账",name:"mobileCashier",icon:"ios-cart-outline"},{title:"订单",name:"mobileOrder",icon:"ios-clipboard-outline"},{title:"客户",name:"mobileUser",icon:"ios-contacts-outline"},{title:"我的",name:"mobileMy",icon:"ios-person-outline"}].map(e=>{var t;const n=o.getRoutes(),c=n.find(t=>e.name===t.name);return e.power=(null===c||void 0===c||null===(t=c.meta)||void 0===t?void 0:t.power)||void 0,e}).filter(e=>b(e.power))),m=Object(n["ref"])(""),v=Object(n["ref"])(t.name),f=Object(n["ref"])({}),O=Object(n["ref"])({});Object(n["watch"])(()=>t,({name:e})=>{v.value=e;const o=d.value.find(t=>t.name===e)||{};m.value=o.title||t.meta.title||d.value[0].title},{deep:!0,immediate:!0});const j=Object(n["computed"])(()=>!!d.value.find(e=>e.name===v.value));async function p(){try{const{returnCode:e,data:t}=await Object(c["q"])()||{};0===e&&(f.value.mobileOrder=t||0)}catch(e){s.error("获取草稿数量失败："+(e.message||e))}}async function w(){try{const{returnCode:e,data:t}=await Object(c["p"])()||{};0===e&&(f.value.mobileUser=t||0)}catch(e){s.error("获取待审批数量失败："+(e.message||e))}}function h(e){f.value={...f.value,...e}}return Object(n["onMounted"])(()=>{const e=JSON.parse(localStorage.getItem("order")||"[]");f.value={mobileCashier:e.reduce((e,t)=>e+ +t.count,0)},p(),w(),window.$EventBus.$on("badge",h),window.$EventBus.$on("saveOrder",p)}),Object(n["onBeforeUnmount"])(()=>{window.$EventBus.$off("badge",h),window.$EventBus.$off("saveOrder",p)}),(e,t)=>{const c=Object(n["resolveComponent"])("Icon"),a=Object(n["resolveComponent"])("router-view"),s=Object(n["resolveComponent"])("Badge");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createElementVNode"])("div",l,[j.value?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,type:"ios-arrow-back",size:"25",onClick:t[0]||(t[0]=t=>e.$router.back()),class:"vi-header-icon left"})),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(m.value)+Object(n["toDisplayString"])("number"==typeof O.value[v.value]?`（${O.value[v.value]}）`:""),1)]),Object(n["createVNode"])(a,{class:"home-container"},{default:Object(n["withCtx"])(({Component:e})=>[(Object(n["openBlock"])(),Object(n["createBlock"])(n["KeepAlive"],null,[(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e),{draftCount:f.value[v.value],onTotal:t[1]||(t[1]=e=>O.value[v.value]=e)},null,40,["draftCount"]))],1024))]),_:1}),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",i,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(d.value,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t,class:Object(n["normalizeClass"])(["menu-item",{active:v.value===e.name}]),onClick:t=>Object(n["unref"])(o).push(e.name)},[Object(n["createVNode"])(s,{count:f.value[e.name]||0,"overflow-count":"99",class:"menu-badge"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{type:e.icon},null,8,["type"])]),_:2},1032,["count"]),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.title),1)],10,u))),128))],512),[[n["vShow"],j.value]])])}}},b=(o("92ec"),o("6b0d")),d=o.n(b);const m=d()(s,[["__scopeId","data-v-0b2e79b2"]]);t["default"]=m},"2bbf":function(e,t,o){},"605d":function(e,t,o){"use strict";var n=o("da84"),c=o("c6b6");e.exports="process"===c(n.process)},"92ec":function(e,t,o){"use strict";o("2bbf")},a640:function(e,t,o){"use strict";var n=o("d039");e.exports=function(e,t){var o=[][e];return!!o&&n((function(){o.call(null,t||function(){return 1},1)}))}},d58f:function(e,t,o){"use strict";var n=o("59ed"),c=o("7b0b"),a=o("44ad"),r=o("07fa"),l=TypeError,i=function(e){return function(t,o,i,u){n(o);var s=c(t),b=a(s),d=r(s),m=e?d-1:0,v=e?-1:1;if(i<2)while(1){if(m in b){u=b[m],m+=v;break}if(m+=v,e?m<0:d<=m)throw l("Reduce of empty array with no initial value")}for(;e?m>=0:d>m;m+=v)m in b&&(u=o(u,b[m],m,s));return u}};e.exports={left:i(!1),right:i(!0)}}}]);