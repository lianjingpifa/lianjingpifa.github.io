(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34b11b44"],{"1f38":function(e,t,a){"use strict";a("d9e2");var o=a("7a23"),l=a("2af9"),n=a("eeb9"),c=a("2410"),r=a.n(c),u=a("4360"),d={__name:"addGoodModal",props:{modelValue:{type:Boolean,default:!1},detailData:{type:Object,default(){return{}}},showCount:{type:Boolean,default:!1}},emits:["update:modelValue","save","close"],setup(e,{emit:t}){const a=e,c=Object(u["a"])(),d=Object(o["computed"])(()=>c.dictMap),i=Object(o["inject"])("$Message",()=>{}),b=Object(o["ref"])({});async function s(e,t,o){if(t&&a.detailData.name!==b.value.name){const{data:e}=await Object(n["R"])({name:t})||{};if(e)return o(new Error("该商品名称已存在"))}o()}const p={name:[{required:!0,message:"请输入商品名称"},{validator:s,trigger:"blur"}]},f=Object(o["computed"])(()=>(a.detailData.goodId?"编辑":"新增")+"商品"),j=Object(o["computed"])({get(){return a.modelValue},set(e){t("update:modelValue",e),e||t("close")}}),O=Object(o["ref"])();Object(o["watch"])(()=>a.detailData,()=>{var e;null===(e=O.value)||void 0===e||e.resetFields(),b.value=r()(a.detailData)},{deep:!0});const m=Object(o["ref"])(!1);function v(){m.value=!0,O.value.validate(async e=>{if(!e)return i.error("数据校验不通过"),void(m.value=!1);try{const{_index:e,_rowKey:a,count:o,...l}=b.value,{data:c}=await Object(n["J"])(l)||{};c&&(i.success(f.value+"成功"),t("save",{...b.value}),O.value.resetFields(),j.value=!1)}catch(a){i.error("请求失败："+(a.message||a))}finally{m.value=!1}})}return(t,a)=>{const n=Object(o["resolveComponent"])("viInput"),c=Object(o["resolveComponent"])("FormItem"),r=Object(o["resolveComponent"])("viInputNumber"),u=Object(o["resolveComponent"])("Option"),i=Object(o["resolveComponent"])("viSelect"),s=Object(o["resolveComponent"])("Form"),V=Object(o["resolveComponent"])("Button"),y=Object(o["resolveComponent"])("viModal");return Object(o["openBlock"])(),Object(o["createBlock"])(y,{modelValue:j.value,"onUpdate:modelValue":a[9]||(a[9]=e=>j.value=e),title:f.value},{footer:Object(o["withCtx"])(()=>[Object(o["createVNode"])(V,{onClick:a[8]||(a[8]=e=>j.value=!1)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("取消")]),_:1}),Object(o["createVNode"])(V,{type:"primary",onClick:v,loading:m.value},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])("确定")]),_:1},8,["loading"])]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{ref_key:"formRef",ref:O,model:b.value,rules:p,"label-width":60,onKeydown:Object(o["withKeys"])(v,["enter"]),class:"vi-modal-content"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{label:"名称:",prop:"name"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(n,{modelValue:b.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value.name=e)},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(c,{label:"规格:",prop:"standard"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(n,{modelValue:b.value.standard,"onUpdate:modelValue":a[1]||(a[1]=e=>b.value.standard=e)},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(c,{label:"单位:",prop:"unit"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(n,{modelValue:b.value.unit,"onUpdate:modelValue":a[2]||(a[2]=e=>b.value.unit=e)},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(c,{label:"单价:",prop:"price"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(r,{modelValue:b.value.price,"onUpdate:modelValue":a[3]||(a[3]=e=>b.value.price=e),step:.5},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(c,{label:"标签:",prop:"label"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(i,{modelValue:b.value.label,"onUpdate:modelValue":a[4]||(a[4]=e=>b.value.label=e),multiple:""},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(d.value.good,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t,value:e.id},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Object(o["createVNode"])(c,{label:"仓库:",prop:"store"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(i,{modelValue:b.value.store,"onUpdate:modelValue":a[5]||(a[5]=e=>b.value.store=e),multiple:""},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(d.value.store,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t,value:e.id},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Object(o["createVNode"])(c,{label:"图片:",prop:"picture"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(Object(o["unref"])(l["s"]),{modelValue:b.value.picture,"onUpdate:modelValue":a[6]||(a[6]=e=>b.value.picture=e)},null,8,["modelValue"])]),_:1}),e.showCount?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,label:"数量:",prop:"count"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(r,{modelValue:b.value.count,"onUpdate:modelValue":a[7]||(a[7]=e=>b.value.count=e),integer:"",min:0},null,8,["modelValue"])]),_:1})):Object(o["createCommentVNode"])("",!0)]),_:1},8,["model","onKeydown"])]),_:1},8,["modelValue","title"])}}};const i=d;t["a"]=i},2410:function(e,t,a){(function(t){var a=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var a,o,l;try{a=Map}catch(b){a=function(){}}try{o=Set}catch(b){o=function(){}}try{l=Promise}catch(b){l=function(){}}function n(c,r,u,d,b){"object"===typeof r&&(u=r.depth,d=r.prototype,b=r.includeNonEnumerable,r=r.circular);var s=[],p=[],f="undefined"!=typeof t;function j(c,u){if(null===c)return null;if(0===u)return c;var O,m;if("object"!=typeof c)return c;if(e(c,a))O=new a;else if(e(c,o))O=new o;else if(e(c,l))O=new l((function(e,t){c.then((function(t){e(j(t,u-1))}),(function(e){t(j(e,u-1))}))}));else if(n.__isArray(c))O=[];else if(n.__isRegExp(c))O=new RegExp(c.source,i(c)),c.lastIndex&&(O.lastIndex=c.lastIndex);else if(n.__isDate(c))O=new Date(c.getTime());else{if(f&&t.isBuffer(c))return O=t.allocUnsafe?t.allocUnsafe(c.length):new t(c.length),c.copy(O),O;e(c,Error)?O=Object.create(c):"undefined"==typeof d?(m=Object.getPrototypeOf(c),O=Object.create(m)):(O=Object.create(d),m=d)}if(r){var v=s.indexOf(c);if(-1!=v)return p[v];s.push(c),p.push(O)}for(var V in e(c,a)&&c.forEach((function(e,t){var a=j(t,u-1),o=j(e,u-1);O.set(a,o)})),e(c,o)&&c.forEach((function(e){var t=j(e,u-1);O.add(t)})),c){var y;m&&(y=Object.getOwnPropertyDescriptor(m,V)),y&&null==y.set||(O[V]=j(c[V],u-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(c);for(V=0;V<w.length;V++){var h=w[V],g=Object.getOwnPropertyDescriptor(c,h);(!g||g.enumerable||b)&&(O[h]=j(c[h],u-1),g.enumerable||Object.defineProperty(O,h,{enumerable:!1}))}}if(b){var _=Object.getOwnPropertyNames(c);for(V=0;V<_.length;V++){var x=_[V];g=Object.getOwnPropertyDescriptor(c,x);g&&g.enumerable||(O[x]=j(c[x],u-1),Object.defineProperty(O,x,{enumerable:!1}))}}return O}return"undefined"==typeof r&&(r=!0),"undefined"==typeof u&&(u=1/0),j(c,u)}function c(e){return Object.prototype.toString.call(e)}function r(e){return"object"===typeof e&&"[object Date]"===c(e)}function u(e){return"object"===typeof e&&"[object Array]"===c(e)}function d(e){return"object"===typeof e&&"[object RegExp]"===c(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return n.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},n.__objToStr=c,n.__isDate=r,n.__isArray=u,n.__isRegExp=d,n.__getRegExpFlags=i,n}();e.exports&&(e.exports=a)}).call(this,a("b639").Buffer)},"269b":function(e,t,a){"use strict";a.r(t);var o=a("7a23"),l=a("2af9"),n=a("1f38"),c=a("eeb9");const r={class:"plr"};var u={__name:"index",setup(e){const t=Object(o["inject"])("$Message",()=>{}),a=Object(o["ref"])(!1),u=Object(o["ref"])(!1),d=Object(o["ref"])({});async function i(e){try{a.value=!0;const{data:{code:o,msg:l,data:n}}=await Object(c["u"])(e)||{};1==o?d.value={name:n.goodsName,standard:n.standard,price:+n.price}:(d.value={},t.info(l+"\n免费接口查不到信息\n自己填吧")),u.value=!0}catch(o){t.error("获取商品信息失败："+(o.message||o))}finally{a.value=!1}}function b(e){d.value={...e},u.value=!0}const s=Object(o["ref"])();function p(){window.$EventBus.$emit("saveGood"),s.value.openScan()}return(e,t)=>{const c=Object(o["resolveComponent"])("Icon"),f=Object(o["resolveComponent"])("Spin");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createVNode"])(c,{type:"ios-add",size:"34",onClick:t[0]||(t[0]=e=>b()),class:"vi-header-icon right"}),Object(o["createVNode"])(f,{fix:"",show:a.value},null,8,["show"]),Object(o["createVNode"])(Object(o["unref"])(l["n"]),{ref_key:"scanRef",ref:s,"close-after-scan":"",onScan:i},null,512),Object(o["createVNode"])(Object(o["unref"])(n["a"]),{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),detailData:d.value,onSave:p},null,8,["modelValue","detailData"])])}}};const d=u;t["default"]=d}}]);