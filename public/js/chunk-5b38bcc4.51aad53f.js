(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b38bcc4"],{"0969":function(e,t,o){"use strict";o("a14c")},"13d5":function(e,t,o){"use strict";var n=o("23e7"),c=o("d58f").left,r=o("a640"),a=o("2d00"),i=o("605d"),l=!i&&a>79&&a<83,u=l||!r("reduce");n({target:"Array",proto:!0,forced:u},{reduce:function(e){var t=arguments.length;return c(this,e,t,t>1?arguments[1]:void 0)}})},2404:function(e,t,o){"use strict";o.r(t);o("13d5"),o("14d9");var n=o("7a23"),c=o("eeb9"),r=o("ed08"),a=o("6605");const i={class:"mobileHome"},l={class:"home-header"},u={class:"home-footer"},s=["onClick"];var d={__name:"mobile",setup(e){const t=Object(a["c"])(),o=Object(a["d"])(),d=Object(n["inject"])("$Message",()=>{}),b=Object(n["inject"])("$Auth",()=>!1),m=Object(n["computed"])(()=>[{title:"商品",name:"mobileGood",icon:"ios-home-outline"},{title:"结账",name:"mobileCashier",icon:"ios-cart-outline"},{title:"订单",name:"mobileOrder",icon:"ios-clipboard-outline"},{title:"客户",name:"mobileUser",icon:"ios-contacts-outline"},{title:"我的",name:"mobileMy",icon:"ios-person-outline"}].map(e=>{var t;const n=o.getRoutes(),c=n.find(t=>e.name===t.name);return e.power=(null===c||void 0===c||null===(t=c.meta)||void 0===t?void 0:t.power)||void 0,e}).filter(e=>b(e.power))),v=Object(n["ref"])(""),f=Object(n["ref"])(t.name),O=Object(n["ref"])({}),j=Object(n["ref"])({});Object(n["watch"])(()=>t,({name:e})=>{f.value=e;const o=m.value.find(t=>t.name===e)||{};v.value=o.title||t.meta.title||m.value[0].title},{deep:!0,immediate:!0});const p=Object(n["computed"])(()=>!!m.value.find(e=>e.name===f.value));async function w(){try{const{returnCode:e,data:t}=await Object(c["s"])()||{};0===e&&(O.value.mobileOrder=t||0)}catch(e){d.error("获取草稿数量失败："+(e.message||e))}}async function h(){try{const{returnCode:e,data:t}=await Object(c["q"])()||{};0===e&&(O.value.mobileUser=t||0)}catch(e){d.error("获取待审批数量失败："+(e.message||e))}}function k(e){O.value={...O.value,...e}}function B(e,t){j.value[e]=t}return Object(n["onMounted"])(()=>{Object(r["e"])();const e=JSON.parse(localStorage.getItem("order")||"[]");O.value={mobileCashier:e.reduce((e,t)=>e+ +t.count,0)},w(),h(),window.$EventBus.$on("setBadge",k),window.$EventBus.$on("refreshOrder",w),window.$EventBus.$on("refreshUser",h)}),Object(n["onBeforeUnmount"])(()=>{window.$EventBus.$off("setBadge",k),window.$EventBus.$off("refreshOrder",w),window.$EventBus.$off("refreshUser",h)}),(e,t)=>{const c=Object(n["resolveComponent"])("Icon"),r=Object(n["resolveComponent"])("router-view"),a=Object(n["resolveComponent"])("Badge");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[Object(n["createElementVNode"])("div",l,[p.value?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,type:"ios-arrow-back",size:"25",onClick:t[0]||(t[0]=t=>e.$router.back()),class:"vi-header-icon left"})),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(v.value)+Object(n["toDisplayString"])("number"==typeof j.value[f.value]?`（${j.value[f.value]}）`:""),1)]),Object(n["createVNode"])(r,{class:"home-container"},{default:Object(n["withCtx"])(({Component:e})=>[(Object(n["openBlock"])(),Object(n["createBlock"])(n["KeepAlive"],null,[(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e),{draftCount:O.value[f.value],onTotal:B},null,40,["draftCount"]))],1024))]),_:1}),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",u,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(m.value,(e,t)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t,class:Object(n["normalizeClass"])(["menu-item",{active:f.value===e.name}]),onClick:t=>Object(n["unref"])(o).push(e.name)},[Object(n["createVNode"])(a,{count:O.value[e.name]||0,"overflow-count":"99",class:"menu-badge"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(c,{type:e.icon},null,8,["type"])]),_:2},1032,["count"]),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.title),1)],10,s))),128))],512),[[n["vShow"],p.value]])])}}},b=(o("0969"),o("6b0d")),m=o.n(b);const v=m()(d,[["__scopeId","data-v-c36cea5e"]]);t["default"]=v},"605d":function(e,t,o){"use strict";var n=o("da84"),c=o("c6b6");e.exports="process"===c(n.process)},a14c:function(e,t,o){},a640:function(e,t,o){"use strict";var n=o("d039");e.exports=function(e,t){var o=[][e];return!!o&&n((function(){o.call(null,t||function(){return 1},1)}))}},d58f:function(e,t,o){"use strict";var n=o("59ed"),c=o("7b0b"),r=o("44ad"),a=o("07fa"),i=TypeError,l=function(e){return function(t,o,l,u){n(o);var s=c(t),d=r(s),b=a(s),m=e?b-1:0,v=e?-1:1;if(l<2)while(1){if(m in d){u=d[m],m+=v;break}if(m+=v,e?m<0:b<=m)throw i("Reduce of empty array with no initial value")}for(;e?m>=0:b>m;m+=v)m in d&&(u=o(u,d[m],m,s));return u}};e.exports={left:l(!1),right:l(!0)}}}]);