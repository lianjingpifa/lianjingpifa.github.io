(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-331aba96"],{"51d9":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),l=a("aad9"),o=a("3e47"),n=a("eeb9"),r=a("2af9"),d=(a("14d9"),a("6605"));const i={class:"detail-container"},u={class:"card-list"},s={class:"title"},b={class:"card-bottom"},j={key:0,class:"price origin"},O={class:"price"},m={key:1,class:"ml-5"},p={key:2,class:"standard"},v={class:"count"},f={class:"f-20"},V={class:"total"};var N={__name:"orderDetailModal",props:{modelValue:{type:Boolean,default:!1},detailData:{type:Object,default(){return{}}}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,l=Object(d["d"])(),o=Object(c["inject"])("$Message",()=>{}),r=Object(c["inject"])("$Modal",()=>{}),N=Object(c["inject"])("$Auth",()=>!1),k=Object(c["computed"])({get(){return a.modelValue},set(e){t("update:modelValue",e)}});function C(){r.confirm({title:"删除订单",content:"是否确认删除所选订单？",onOk:async()=>{try{const{returnCode:e,data:t}=await Object(n["g"])({orderIds:""+a.detailData.orderId})||{};0===e&&t&&(o.success("删除成功"),window.$EventBus.$emit("saveOrder"),k.value=!1)}catch(e){o.error("删除失败："+(e.message||e))}}})}function y(){k.value=!1,l.push({name:"mobileCashier",state:{params:{type:"change",userId:a.detailData.userId,userName:a.detailData.userName,goodList:a.detailData.detail,orderId:a.detailData.orderId}}})}function h(){k.value=!1,l.push({name:"mobileCashier",state:{params:{type:"copy",goodList:a.detailData.detail}}})}return(t,a)=>{const l=Object(c["resolveComponent"])("van-cell"),o=Object(c["resolveComponent"])("viEmpty"),n=Object(c["resolveComponent"])("Button"),r=Object(c["resolveComponent"])("viModal");return Object(c["openBlock"])(),Object(c["createBlock"])(r,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e),title:"订单详情"},{footer:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("p",V,"总金额：￥"+Object(c["toDisplayString"])(e.detailData.total),1),Object(c["unref"])(N)(3)||"1"==e.detailData.status?(Object(c["openBlock"])(),Object(c["createBlock"])(n,{key:0,type:"primary",onClick:y},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("修改")]),_:1})):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(n,{type:"success",onClick:h},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("复制")]),_:1}),Object(c["unref"])(N)(3)||"1"==e.detailData.status?(Object(c["openBlock"])(),Object(c["createBlock"])(n,{key:1,type:"error",onClick:C},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("删除")]),_:1})):Object(c["createCommentVNode"])("",!0)]),default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(l,{title:"订单编号",value:e.detailData.orderId,class:"flex-none"},null,8,["value"]),Object(c["createVNode"])(l,{title:"客户名称",value:e.detailData.userName,class:"flex-none"},null,8,["value"]),Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",u,[e.detailData.list.length?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createBlock"])(o,{key:0})),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.detailData.list,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"card",key:t},[Object(c["createElementVNode"])("p",s,Object(c["toDisplayString"])(e.name),1),Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",null,[e.price!=e.originPrice&&e.unit==e.originUnit&&e.standard==e.originStandard?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",j,"￥"+Object(c["toDisplayString"])(e.originPrice&&e.originPrice.toFixed(2)),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("span",O,"￥"+Object(c["toDisplayString"])(e.price&&e.price.toFixed(2)),1),e.unit?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",m,"/ "+Object(c["toDisplayString"])(e.unit),1)):Object(c["createCommentVNode"])("",!0),e.standard?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p,Object(c["toDisplayString"])(e.standard),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("p",v,[Object(c["createTextVNode"])("X "),Object(c["createElementVNode"])("span",f,Object(c["toDisplayString"])(e.count),1)])])]))),128))])])]),_:1},8,["modelValue"])}}},k=(a("6a68"),a("6b0d")),C=a.n(k);const y=C()(N,[["__scopeId","data-v-b52b3196"]]);var h=y,g=a("4360");const D=["onClick"],x={class:"title"},B={class:"f-16"},w={class:"f-16"},E={class:"f-16"};var _={__name:"mobile",props:{draftCount:{type:Number,default:void 0}},setup(e){const t=e,a=Object(d["c"])(),i=Object(g["b"])(),u=Object(c["inject"])("$Auth",()=>!1),s=Object(c["ref"])();function b(){var e;null===(e=s.value)||void 0===e||e.reSearch()}Object(c["watch"])(()=>t.draftCount,()=>{b()});const j=Object(c["ref"])({}),O=Object(c["computed"])(()=>{var e,t;return!!(null!==(e=j.value.createTime)&&void 0!==e&&e.length||null!==(t=j.value.updateTime)&&void 0!==t&&t.length)}),m=Object(c["ref"])(""),p=Object(c["ref"])("1"),v=Object(c["ref"])([]),f=Object(c["ref"])([]),V=Object(c["ref"])(""),N=Object(c["ref"])("");function k(){f.value=[],v.value=[]}function C(){V.value="",N.value="",b()}function y(e){const{updateTime:t=[],createTime:a=[]}=j.value,[c,l]=t,[o,r]=a;return Object(n["t"])({...e,userId:V.value,userName:m.value,status:p.value,updateTimeStart:c&&c+" 00:00:00",updateTimeEnd:l&&l+" 23:59:59",createTimeStart:o&&o+" 00:00:00",createTimeEnd:r&&r+" 23:59:59"})}Object(c["watch"])(()=>a,({name:e})=>{if("mobileOrder"!==e)return;u(3)||(V.value=i.userInfo.userId,N.value=i.userInfo.nickName);const{params:t={}}=history.state;Object.keys(t).length&&(V.value=t.userId,N.value=t.name,m.value="",p.value="2",k(),b(),history.state.params={})},{deep:!0,immediate:!0});const _=Object(c["ref"])(!1);function T(){f.value=j.value.updateTime||[],v.value=j.value.createTime||[],_.value=!0}function S(){j.value={updateTime:f.value,createTime:v.value},_.value=!1,b()}const I=Object(c["ref"])({}),U=Object(c["ref"])(!1);function $(e){I.value={...e,list:JSON.parse(e.detail||"[]"),total:e.total.toFixed(2)},U.value=!0}return Object(c["onActivated"])(()=>{b()}),(t,a)=>{const n=Object(c["resolveComponent"])("Icon"),d=Object(c["resolveComponent"])("van-cell"),i=Object(c["resolveComponent"])("van-search"),j=Object(c["resolveComponent"])("Button"),g=Object(c["resolveComponent"])("viModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(Object(c["unref"])(l["a"]),{active:p.value,"onUpdate:active":a[0]||(a[0]=e=>p.value=e),onChange:b},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(o["a"]),{title:Object(c["unref"])(u)(3)?"草稿":"未出单",name:"1",badge:e.draftCount||void 0},null,8,["title","badge"]),Object(c["createVNode"])(Object(c["unref"])(o["a"]),{title:Object(c["unref"])(u)(3)?"已打印":"已出单",name:"2"},null,8,["title"])]),_:1},8,["active"]),Object(c["createVNode"])(i,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=e=>m.value=e),shape:"round",placeholder:"请输入客户名称搜索","show-action":"",onClear:b,onSearch:b,class:"search-input"},{action:Object(c["withCtx"])(()=>[V.value?(Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:0,title:"客户名称",value:N.value,class:"user-id-cell"},Object(c["createSlots"])({_:2},[Object(c["unref"])(u)(3)?{name:"right-icon",fn:Object(c["withCtx"])(()=>[Object(c["createVNode"])(n,{type:"md-close",size:"25",onClick:C,class:"vi-link-text ml-10"})]),key:"0"}:void 0]),1032,["value"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(n,{type:O.value?"ios-funnel":"ios-funnel-outline",size:"24",color:O.value?"#2d8cf0":"#555",onClick:T},null,8,["type","color"])]),_:1},8,["modelValue"]),Object(c["createVNode"])(g,{modelValue:_.value,"onUpdate:modelValue":a[4]||(a[4]=e=>_.value=e),title:"更多检索条件"},{footer:Object(c["withCtx"])(()=>[Object(c["createVNode"])(j,{onClick:k},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("重置")]),_:1}),Object(c["createVNode"])(j,{type:"primary",onClick:S},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])("检索")]),_:1})]),default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(Object(c["unref"])(r["a"]),{modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=e=>f.value=e),title:"修改时间"},null,8,["modelValue"]),Object(c["createVNode"])(Object(c["unref"])(r["a"]),{modelValue:v.value,"onUpdate:modelValue":a[3]||(a[3]=e=>v.value=e),title:"创建时间"},null,8,["modelValue"])]),_:1},8,["modelValue"]),Object(c["createVNode"])(Object(c["unref"])(r["i"]),{ref_key:"listRef",ref:s,getData:y,class:"container"},{default:Object(c["withCtx"])(({item:e})=>[Object(c["createElementVNode"])("div",{class:"card",onClick:t=>$(e)},[Object(c["createElementVNode"])("p",x,"订单编号："+Object(c["toDisplayString"])(e.orderId),1),Object(c["createElementVNode"])("p",B,"客户名称："+Object(c["toDisplayString"])(e.userName),1),Object(c["createElementVNode"])("p",w,"总 金 额 ：￥"+Object(c["toDisplayString"])(e.total&&e.total.toFixed(2)),1),Object(c["createElementVNode"])("p",E,"修改时间："+Object(c["toDisplayString"])(e.updateTime),1)],8,D)]),_:1},512),Object(c["createVNode"])(Object(c["unref"])(h),{modelValue:U.value,"onUpdate:modelValue":a[5]||(a[5]=e=>U.value=e),detailData:I.value},null,8,["modelValue","detailData"])])}}};a("fbd6");const T=C()(_,[["__scopeId","data-v-4d4dbf0d"]]);t["default"]=T},"6a68":function(e,t,a){"use strict";a("e64c")},df2a:function(e,t,a){},e64c:function(e,t,a){},fbd6:function(e,t,a){"use strict";a("df2a")}}]);